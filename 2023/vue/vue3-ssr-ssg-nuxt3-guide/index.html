<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Hexo Theme Keep">
    <meta name="description" content="Hexo Theme Keep">
    <meta name="author" content="Orion K">
    
    <title>
        
            Vue 3 服务端渲染与静态站点生成：Nuxt 3 全栈开发实战 |
        
        Orion K Blog
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    
        <link rel="shortcut icon" href="/images/logo.svg">
    
    
<link rel="stylesheet" href="/font/css/fontawesome.min.css">

    
<link rel="stylesheet" href="/font/css/regular.min.css">

    
<link rel="stylesheet" href="/font/css/solid.min.css">

    
<link rel="stylesheet" href="/font/css/brands.min.css">

    
    <script class="keep-theme-configurations">
    const KEEP = window.KEEP || {}
    KEEP.hexo_config = {"hostname":"example.com","root":"/","language":"zh-CN","path":"search.json"}
    KEEP.theme_config = {"base_info":{"primary_color":"#0066cc","title":"Orion K Blog","author":"Orion K","avatar":"/images/avatar.svg","logo":"/images/logo.svg","favicon":"/images/logo.svg"},"menu":{"home":"/                        || fa-solid fa-home","archives":"/archives            || fa-solid fa-box-archive","tags":"/tags                    || fa-solid fa-tags","categories":"/categories        || fa-solid fa-layer-group"},"first_screen":{"enable":false,"background_img":"/images/bg.svg","background_img_dark":"/images/bg.svg","description":"Keep writing and Keep loving.","hitokoto":false},"social_contact":{"enable":false,"links":{"github":null,"weixin":null,"qq":null,"weibo":null,"zhihu":null,"twitter":null,"x":null,"facebook":null,"email":null}},"scroll":{"progress_bar":false,"percent":false,"hide_header":true},"home":{"announcement":"欢迎来到 Orion K 的博客，这是一个分享互联网技术的博客。联系：wxmm686800@gmail.com","category":true,"tag":true,"post_datetime":"created"},"post":{"author_badge":{"enable":true,"level_badge":true,"custom_badge":["One","Two","Three"]},"word_count":{"wordcount":false,"min2read":false},"datetime_format":"YYYY-MM-DD HH:mm:ss","copyright_info":false,"share":false,"reward":{"enable":false,"img_link":null,"text":null,"icon":null}},"code_block":{"tools":{"enable":false,"style":"default"},"highlight_theme":"default"},"toc":{"enable":true,"number":false,"expand_all":true,"init_open":true,"layout":"right"},"website_count":{"busuanzi_count":{"enable":false,"site_uv":false,"site_pv":false,"page_pv":false}},"local_search":{"enable":true,"preload":true},"comment":{"enable":false,"use":"valine","valine":{"appid":null,"appkey":null,"server_urls":null,"placeholder":null},"gitalk":{"github_id":null,"github_admins":null,"repository":null,"client_id":null,"client_secret":null,"proxy":null},"twikoo":{"env_id":null,"region":null,"version":"1.6.39"},"waline":{"server_url":null,"reaction":false,"version":"3.3.2"},"giscus":{"repo":null,"repo_id":null,"category":"Announcements","category_id":null,"reactions_enabled":false},"artalk":{"server":null},"disqus":{"shortname":null}},"rss":{"enable":false},"lazyload":{"enable":false},"cdn":{"enable":false,"provider":"cdnjs"},"pjax":{"enable":false},"footer":{"since":2025,"word_count":false,"site_deploy":{"enable":true,"provider":"github","url":null},"record":{"enable":false,"list":[{"code":null,"link":null}]}},"inject":{"enable":false,"css":[null],"js":[null]},"root":"","source_data":{},"version":"4.2.5"}
    KEEP.language_ago = {"second":"%s 秒前","minute":"%s 分钟前","hour":"%s 小时前","day":"%s 天前","week":"%s 周前","month":"%s 个月前","year":"%s 年前"}
    KEEP.language_code_block = {"copy":"复制代码","copied":"已复制","fold":"折叠代码块","folded":"已折叠"}
    KEEP.language_copy_copyright = {"copy":"复制版权信息","copied":"已复制","title":"原文标题","author":"原文作者","link":"原文链接"}
  </script>
<meta name="generator" content="Hexo 7.3.0"></head>


<body>
<div class="progress-bar-container">
    

    
</div>



<main class="page-container border-box">
    <!-- home first screen  -->
    

    <!-- page content -->
    <div class="page-main-content border-box">
        <div class="page-main-content-top">
            
<header class="header-wrapper">

    <div class="border-box header-content">
        <div class="left flex-start border-box">
            
                <a class="logo-image border-box" href="/">
                    <img src="/images/logo.svg">
                </a>
            
            <a class="site-name border-box" href="/">
               Orion K Blog
            </a>
        </div>

        <div class="right border-box">
            <div class="pc border-box">
                <ul class="menu-list border-box">
                    
                        
                        <li class="menu-item flex-start border-box">
                            <a class="menu-text-color border-box" href="/">
                                
                                    <i class="menu-text-color menu-icon fa-solid fa-home"></i>
                                
                                首页
                                
                            </a>
                            
                        </li>
                    
                        
                        <li class="menu-item flex-start border-box">
                            <a class="menu-text-color border-box" href="/archives">
                                
                                    <i class="menu-text-color menu-icon fa-solid fa-box-archive"></i>
                                
                                归档
                                
                            </a>
                            
                        </li>
                    
                        
                        <li class="menu-item flex-start border-box">
                            <a class="menu-text-color border-box" href="/tags">
                                
                                    <i class="menu-text-color menu-icon fa-solid fa-tags"></i>
                                
                                标签
                                
                            </a>
                            
                        </li>
                    
                        
                        <li class="menu-item flex-start border-box">
                            <a class="menu-text-color border-box" href="/categories">
                                
                                    <i class="menu-text-color menu-icon fa-solid fa-layer-group"></i>
                                
                                分类
                                
                            </a>
                            
                        </li>
                    
                    
                        <li class="menu-item search search-popup-trigger">
                            <i class="menu-text-color fas search fa-search"></i>
                        </li>
                    
                </ul>
            </div>
            <div class="mobile border-box flex-start">
                
                    <div class="icon-item search search-popup-trigger"><i class="fas fa-search"></i></div>
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list border-box">
            
                
                <li class="drawer-menu-item border-box not-sub-menu">
                    <label class="drawer-menu-label border-box">
                        <a class="drawer-menu-text-color left-side flex-start border-box" href="/">
                            
                                <span class="menu-icon-wrap border-box flex-center">
                                    <i class="drawer-menu-text-color menu-icon fa-solid fa-home"></i>
                                </span>
                            
                            首页
                        </a>
                        
                    </label>
                    
                </li>
            
                
                <li class="drawer-menu-item border-box not-sub-menu">
                    <label class="drawer-menu-label border-box">
                        <a class="drawer-menu-text-color left-side flex-start border-box" href="/archives">
                            
                                <span class="menu-icon-wrap border-box flex-center">
                                    <i class="drawer-menu-text-color menu-icon fa-solid fa-box-archive"></i>
                                </span>
                            
                            归档
                        </a>
                        
                    </label>
                    
                </li>
            
                
                <li class="drawer-menu-item border-box not-sub-menu">
                    <label class="drawer-menu-label border-box">
                        <a class="drawer-menu-text-color left-side flex-start border-box" href="/tags">
                            
                                <span class="menu-icon-wrap border-box flex-center">
                                    <i class="drawer-menu-text-color menu-icon fa-solid fa-tags"></i>
                                </span>
                            
                            标签
                        </a>
                        
                    </label>
                    
                </li>
            
                
                <li class="drawer-menu-item border-box not-sub-menu">
                    <label class="drawer-menu-label border-box">
                        <a class="drawer-menu-text-color left-side flex-start border-box" href="/categories">
                            
                                <span class="menu-icon-wrap border-box flex-center">
                                    <i class="drawer-menu-text-color menu-icon fa-solid fa-layer-group"></i>
                                </span>
                            
                            分类
                        </a>
                        
                    </label>
                    
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="page-main-content-middle border-box">

            <div class="main-content border-box">
                

                    
<div class="fade-in-down-animation">
    <div class="post-page-container border-box">
        <div class="post-content-container border-box">
            

            <div class="post-content-bottom border-box">
                
                    <div class="post-title">
                        Vue 3 服务端渲染与静态站点生成：Nuxt 3 全栈开发实战
                    </div>
                

                
                    <div class="post-header border-box">
                        
                            <div class="avatar-box border-box">
                                <img src="/images/avatar.svg">
                            </div>
                        
                        <div class="info-box">
                            <div class="author border-box">
                                <span class="name">Orion K</span>
                                
                                    <span class="author-badge">Lv6</span>
                                
                            </div>
                            <div class="meta-info border-box">
                                

<div class="post-meta-info-container border-box post">
    <div class="post-meta-info border-box">
        

        
            <span class="meta-info-item post-create-date">
                <i class="icon fa-solid fa-calendar-plus"></i>&nbsp;
                <span class="datetime">2023-08-15 14:30:00</span>
            </span>
        

        
            <span class="meta-info-item post-category border-box"><i class="icon fas fa-folder"></i>&nbsp;
                <ul class="post-category-ul">
                    
                            <li class="category-item"><a href="/categories/vue/">vue</a></li>
                        
                    
                </ul>
            </span>
        

        
            <span class="post-tag meta-info-item border-box">
                <ul class="post-tag-ul">
                    
                            <li class="tag-item"><span class="tag-separator"><i class="icon fas fa-hashtag"></i></span><a href="/tags/Vue3/">Vue3</a></li>
                        
                    
                            <li class="tag-item"><span class="tag-separator"><i class="icon fas fa-hashtag"></i></span><a href="/tags/SSR/">SSR</a></li>
                        
                    
                            <li class="tag-item"><span class="tag-separator"><i class="icon fas fa-hashtag"></i></span><a href="/tags/SSG/">SSG</a></li>
                        
                    
                            <li class="tag-item"><span class="tag-separator"><i class="icon fas fa-hashtag"></i></span><a href="/tags/Nuxt3/">Nuxt3</a></li>
                        
                    
                            <li class="tag-item"><span class="tag-separator"><i class="icon fas fa-hashtag"></i></span><a href="/tags/%E5%85%A8%E6%A0%88%E5%BC%80%E5%8F%91/">全栈开发</a></li>
                        
                    
                </ul>
            </span>
        

        
        
        
        
    </div>

    
</div>

                            </div>
                        </div>
                    </div>
                

                <div class="post-content keep-markdown-body ">
                    

                    
                         <p>随着现代 Web 应用对 SEO 和首屏性能要求的提高，服务端渲染(SSR)和静态站点生成(SSG)成为了前端开发的重要技术。本文将深入探讨 Vue 3 生态中的 SSR&#x2F;SSG 解决方案，特别是 Nuxt 3 框架的实战应用。</p>
<span id="more"></span>

<h2 id="SSR-vs-SSG-vs-SPA-对比分析"><a href="#SSR-vs-SSG-vs-SPA-对比分析" class="headerlink" title="SSR vs SSG vs SPA 对比分析"></a>SSR vs SSG vs SPA 对比分析</h2><h3 id="1-渲染模式对比"><a href="#1-渲染模式对比" class="headerlink" title="1. 渲染模式对比"></a>1. 渲染模式对比</h3><p><strong>渲染策略分析</strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// types/rendering.ts</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 渲染模式枚举</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">enum</span> <span class="title class_">RenderingMode</span> &#123;</span><br><span class="line">  <span class="variable constant_">SPA</span> = <span class="string">&#x27;spa&#x27;</span>,           <span class="comment">// 单页应用</span></span><br><span class="line">  <span class="variable constant_">SSR</span> = <span class="string">&#x27;ssr&#x27;</span>,           <span class="comment">// 服务端渲染</span></span><br><span class="line">  <span class="variable constant_">SSG</span> = <span class="string">&#x27;ssg&#x27;</span>,           <span class="comment">// 静态站点生成</span></span><br><span class="line">  <span class="variable constant_">ISR</span> = <span class="string">&#x27;isr&#x27;</span>,           <span class="comment">// 增量静态再生</span></span><br><span class="line">  <span class="variable constant_">HYBRID</span> = <span class="string">&#x27;hybrid&#x27;</span>      <span class="comment">// 混合渲染</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 渲染模式特性对比</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> renderingModeComparison = &#123;</span><br><span class="line">  [<span class="title class_">RenderingMode</span>.<span class="property">SPA</span>]: &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;单页应用&#x27;</span>,</span><br><span class="line">    <span class="attr">description</span>: <span class="string">&#x27;客户端渲染，动态加载内容&#x27;</span>,</span><br><span class="line">    <span class="attr">advantages</span>: [</span><br><span class="line">      <span class="string">&#x27;交互体验流畅&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;开发简单&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;服务器压力小&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;适合复杂交互&#x27;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">disadvantages</span>: [</span><br><span class="line">      <span class="string">&#x27;SEO 不友好&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;首屏加载慢&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;依赖 JavaScript&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;爬虫抓取困难&#x27;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">useCases</span>: [</span><br><span class="line">      <span class="string">&#x27;管理后台&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;复杂应用&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;用户交互密集&#x27;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">performance</span>: &#123;</span><br><span class="line">      <span class="attr">firstContentfulPaint</span>: <span class="string">&#x27;slow&#x27;</span>,</span><br><span class="line">      <span class="attr">timeToInteractive</span>: <span class="string">&#x27;fast&#x27;</span>,</span><br><span class="line">      <span class="attr">seoScore</span>: <span class="string">&#x27;poor&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  [<span class="title class_">RenderingMode</span>.<span class="property">SSR</span>]: &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;服务端渲染&#x27;</span>,</span><br><span class="line">    <span class="attr">description</span>: <span class="string">&#x27;服务器生成 HTML，客户端激活&#x27;</span>,</span><br><span class="line">    <span class="attr">advantages</span>: [</span><br><span class="line">      <span class="string">&#x27;SEO 友好&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;首屏快速&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;爬虫友好&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;社交分享优化&#x27;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">disadvantages</span>: [</span><br><span class="line">      <span class="string">&#x27;服务器压力大&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;开发复杂&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;缓存策略复杂&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;TTFB 可能较高&#x27;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">useCases</span>: [</span><br><span class="line">      <span class="string">&#x27;电商网站&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;新闻媒体&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;企业官网&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;内容展示&#x27;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">performance</span>: &#123;</span><br><span class="line">      <span class="attr">firstContentfulPaint</span>: <span class="string">&#x27;fast&#x27;</span>,</span><br><span class="line">      <span class="attr">timeToInteractive</span>: <span class="string">&#x27;medium&#x27;</span>,</span><br><span class="line">      <span class="attr">seoScore</span>: <span class="string">&#x27;excellent&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  [<span class="title class_">RenderingMode</span>.<span class="property">SSG</span>]: &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;静态站点生成&#x27;</span>,</span><br><span class="line">    <span class="attr">description</span>: <span class="string">&#x27;构建时预生成静态 HTML&#x27;</span>,</span><br><span class="line">    <span class="attr">advantages</span>: [</span><br><span class="line">      <span class="string">&#x27;SEO 完美&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;性能极佳&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;CDN 友好&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;安全性高&#x27;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">disadvantages</span>: [</span><br><span class="line">      <span class="string">&#x27;构建时间长&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;动态内容限制&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;更新需重新构建&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;不适合个性化&#x27;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">useCases</span>: [</span><br><span class="line">      <span class="string">&#x27;博客网站&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;文档站点&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;营销页面&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;产品展示&#x27;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">performance</span>: &#123;</span><br><span class="line">      <span class="attr">firstContentfulPaint</span>: <span class="string">&#x27;excellent&#x27;</span>,</span><br><span class="line">      <span class="attr">timeToInteractive</span>: <span class="string">&#x27;fast&#x27;</span>,</span><br><span class="line">      <span class="attr">seoScore</span>: <span class="string">&#x27;excellent&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  [<span class="title class_">RenderingMode</span>.<span class="property">ISR</span>]: &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;增量静态再生&#x27;</span>,</span><br><span class="line">    <span class="attr">description</span>: <span class="string">&#x27;SSG + 按需重新生成&#x27;</span>,</span><br><span class="line">    <span class="attr">advantages</span>: [</span><br><span class="line">      <span class="string">&#x27;结合 SSG 和 SSR 优势&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;内容可更新&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;性能优秀&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;扩展性好&#x27;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">disadvantages</span>: [</span><br><span class="line">      <span class="string">&#x27;实现复杂&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;缓存策略复杂&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;调试困难&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;框架支持有限&#x27;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">useCases</span>: [</span><br><span class="line">      <span class="string">&#x27;大型内容站&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;电商产品页&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;新闻网站&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;社区论坛&#x27;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">performance</span>: &#123;</span><br><span class="line">      <span class="attr">firstContentfulPaint</span>: <span class="string">&#x27;excellent&#x27;</span>,</span><br><span class="line">      <span class="attr">timeToInteractive</span>: <span class="string">&#x27;fast&#x27;</span>,</span><br><span class="line">      <span class="attr">seoScore</span>: <span class="string">&#x27;excellent&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 渲染模式选择决策树</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">RenderingModeSelector</span> &#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 根据项目需求选择渲染模式</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">selectMode</span>(<span class="attr">requirements</span>: &#123;</span><br><span class="line">    <span class="attr">seoRequired</span>: <span class="built_in">boolean</span></span><br><span class="line">    <span class="attr">contentFrequency</span>: <span class="string">&#x27;static&#x27;</span> | <span class="string">&#x27;dynamic&#x27;</span> | <span class="string">&#x27;mixed&#x27;</span></span><br><span class="line">    <span class="attr">userInteraction</span>: <span class="string">&#x27;low&#x27;</span> | <span class="string">&#x27;medium&#x27;</span> | <span class="string">&#x27;high&#x27;</span></span><br><span class="line">    <span class="attr">trafficVolume</span>: <span class="string">&#x27;low&#x27;</span> | <span class="string">&#x27;medium&#x27;</span> | <span class="string">&#x27;high&#x27;</span></span><br><span class="line">    <span class="attr">developmentComplexity</span>: <span class="string">&#x27;simple&#x27;</span> | <span class="string">&#x27;medium&#x27;</span> | <span class="string">&#x27;complex&#x27;</span></span><br><span class="line">  &#125;): <span class="title class_">RenderingMode</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; seoRequired, contentFrequency, userInteraction, trafficVolume &#125; = requirements</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// SEO 不重要的应用</span></span><br><span class="line">    <span class="keyword">if</span> (!seoRequired) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="title class_">RenderingMode</span>.<span class="property">SPA</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 静态内容为主</span></span><br><span class="line">    <span class="keyword">if</span> (contentFrequency === <span class="string">&#x27;static&#x27;</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="title class_">RenderingMode</span>.<span class="property">SSG</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 高交互应用</span></span><br><span class="line">    <span class="keyword">if</span> (userInteraction === <span class="string">&#x27;high&#x27;</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> trafficVolume === <span class="string">&#x27;high&#x27;</span> ? <span class="title class_">RenderingMode</span>.<span class="property">ISR</span> : <span class="title class_">RenderingMode</span>.<span class="property">SSR</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 混合内容</span></span><br><span class="line">    <span class="keyword">if</span> (contentFrequency === <span class="string">&#x27;mixed&#x27;</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="title class_">RenderingMode</span>.<span class="property">HYBRID</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 默认 SSR</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">RenderingMode</span>.<span class="property">SSR</span></span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 获取推荐配置</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">getRecommendedConfig</span>(<span class="params"><span class="attr">mode</span>: <span class="title class_">RenderingMode</span></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> configs = &#123;</span><br><span class="line">      [<span class="title class_">RenderingMode</span>.<span class="property">SPA</span>]: &#123;</span><br><span class="line">        <span class="attr">framework</span>: <span class="string">&#x27;Vue 3 + Vite&#x27;</span>,</span><br><span class="line">        <span class="attr">deployment</span>: <span class="string">&#x27;CDN + SPA&#x27;</span>,</span><br><span class="line">        <span class="attr">caching</span>: <span class="string">&#x27;Browser Cache&#x27;</span>,</span><br><span class="line">        <span class="attr">monitoring</span>: <span class="string">&#x27;Client-side&#x27;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      [<span class="title class_">RenderingMode</span>.<span class="property">SSR</span>]: &#123;</span><br><span class="line">        <span class="attr">framework</span>: <span class="string">&#x27;Nuxt 3&#x27;</span>,</span><br><span class="line">        <span class="attr">deployment</span>: <span class="string">&#x27;Node.js Server&#x27;</span>,</span><br><span class="line">        <span class="attr">caching</span>: <span class="string">&#x27;Server + CDN&#x27;</span>,</span><br><span class="line">        <span class="attr">monitoring</span>: <span class="string">&#x27;Full-stack&#x27;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      [<span class="title class_">RenderingMode</span>.<span class="property">SSG</span>]: &#123;</span><br><span class="line">        <span class="attr">framework</span>: <span class="string">&#x27;Nuxt 3 + generate&#x27;</span>,</span><br><span class="line">        <span class="attr">deployment</span>: <span class="string">&#x27;Static Hosting&#x27;</span>,</span><br><span class="line">        <span class="attr">caching</span>: <span class="string">&#x27;CDN&#x27;</span>,</span><br><span class="line">        <span class="attr">monitoring</span>: <span class="string">&#x27;Client-side&#x27;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      [<span class="title class_">RenderingMode</span>.<span class="property">ISR</span>]: &#123;</span><br><span class="line">        <span class="attr">framework</span>: <span class="string">&#x27;Nuxt 3 + ISR&#x27;</span>,</span><br><span class="line">        <span class="attr">deployment</span>: <span class="string">&#x27;Edge Functions&#x27;</span>,</span><br><span class="line">        <span class="attr">caching</span>: <span class="string">&#x27;Multi-layer&#x27;</span>,</span><br><span class="line">        <span class="attr">monitoring</span>: <span class="string">&#x27;Full-stack&#x27;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      [<span class="title class_">RenderingMode</span>.<span class="property">HYBRID</span>]: &#123;</span><br><span class="line">        <span class="attr">framework</span>: <span class="string">&#x27;Nuxt 3 + Hybrid&#x27;</span>,</span><br><span class="line">        <span class="attr">deployment</span>: <span class="string">&#x27;Mixed&#x27;</span>,</span><br><span class="line">        <span class="attr">caching</span>: <span class="string">&#x27;Intelligent&#x27;</span>,</span><br><span class="line">        <span class="attr">monitoring</span>: <span class="string">&#x27;Full-stack&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> configs[mode]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-性能指标对比"><a href="#2-性能指标对比" class="headerlink" title="2. 性能指标对比"></a>2. 性能指标对比</h3><p><strong>性能监控工具</strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// utils/performanceMonitor.ts</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 性能指标接口</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">PerformanceMetrics</span> &#123;</span><br><span class="line">  <span class="comment">// Core Web Vitals</span></span><br><span class="line">  <span class="attr">lcp</span>: <span class="built_in">number</span>          <span class="comment">// Largest Contentful Paint</span></span><br><span class="line">  <span class="attr">fid</span>: <span class="built_in">number</span>          <span class="comment">// First Input Delay</span></span><br><span class="line">  <span class="attr">cls</span>: <span class="built_in">number</span>          <span class="comment">// Cumulative Layout Shift</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 其他重要指标</span></span><br><span class="line">  <span class="attr">fcp</span>: <span class="built_in">number</span>          <span class="comment">// First Contentful Paint</span></span><br><span class="line">  <span class="attr">tti</span>: <span class="built_in">number</span>          <span class="comment">// Time to Interactive</span></span><br><span class="line">  <span class="attr">tbt</span>: <span class="built_in">number</span>          <span class="comment">// Total Blocking Time</span></span><br><span class="line">  <span class="attr">si</span>: <span class="built_in">number</span>           <span class="comment">// Speed Index</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 自定义指标</span></span><br><span class="line">  <span class="attr">ttfb</span>: <span class="built_in">number</span>         <span class="comment">// Time to First Byte</span></span><br><span class="line">  <span class="attr">domContentLoaded</span>: <span class="built_in">number</span></span><br><span class="line">  <span class="attr">loadComplete</span>: <span class="built_in">number</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 资源指标</span></span><br><span class="line">  <span class="attr">resourceCount</span>: <span class="built_in">number</span></span><br><span class="line">  <span class="attr">resourceSize</span>: <span class="built_in">number</span></span><br><span class="line">  <span class="attr">cacheHitRate</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 性能监控器</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">PerformanceMonitor</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">metrics</span>: <span class="title class_">Partial</span>&lt;<span class="title class_">PerformanceMetrics</span>&gt; = &#123;&#125;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">observers</span>: <span class="title class_">PerformanceObserver</span>[] = []</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 初始化性能监控</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="title function_">init</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">observeWebVitals</span>()</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">observeNavigation</span>()</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">observeResources</span>()</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 监控 Core Web Vitals</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">private</span> <span class="title function_">observeWebVitals</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="comment">// LCP 监控</span></span><br><span class="line">    <span class="keyword">const</span> lcpObserver = <span class="keyword">new</span> <span class="title class_">PerformanceObserver</span>(<span class="function">(<span class="params">list</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> entries = list.<span class="title function_">getEntries</span>()</span><br><span class="line">      <span class="keyword">const</span> lastEntry = entries[entries.<span class="property">length</span> - <span class="number">1</span>] <span class="keyword">as</span> <span class="title class_">PerformanceEntry</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">metrics</span>.<span class="property">lcp</span> = lastEntry.<span class="property">startTime</span></span><br><span class="line">    &#125;)</span><br><span class="line">    lcpObserver.<span class="title function_">observe</span>(&#123; <span class="attr">entryTypes</span>: [<span class="string">&#x27;largest-contentful-paint&#x27;</span>] &#125;)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">observers</span>.<span class="title function_">push</span>(lcpObserver)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// FID 监控</span></span><br><span class="line">    <span class="keyword">const</span> fidObserver = <span class="keyword">new</span> <span class="title class_">PerformanceObserver</span>(<span class="function">(<span class="params">list</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> entries = list.<span class="title function_">getEntries</span>()</span><br><span class="line">      entries.<span class="title function_">forEach</span>(<span class="function">(<span class="params"><span class="attr">entry</span>: <span class="built_in">any</span></span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">metrics</span>.<span class="property">fid</span> = entry.<span class="property">processingStart</span> - entry.<span class="property">startTime</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">    fidObserver.<span class="title function_">observe</span>(&#123; <span class="attr">entryTypes</span>: [<span class="string">&#x27;first-input&#x27;</span>] &#125;)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">observers</span>.<span class="title function_">push</span>(fidObserver)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// CLS 监控</span></span><br><span class="line">    <span class="keyword">let</span> clsValue = <span class="number">0</span></span><br><span class="line">    <span class="keyword">const</span> clsObserver = <span class="keyword">new</span> <span class="title class_">PerformanceObserver</span>(<span class="function">(<span class="params">list</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> entries = list.<span class="title function_">getEntries</span>()</span><br><span class="line">      entries.<span class="title function_">forEach</span>(<span class="function">(<span class="params"><span class="attr">entry</span>: <span class="built_in">any</span></span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!entry.<span class="property">hadRecentInput</span>) &#123;</span><br><span class="line">          clsValue += entry.<span class="property">value</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">metrics</span>.<span class="property">cls</span> = clsValue</span><br><span class="line">    &#125;)</span><br><span class="line">    clsObserver.<span class="title function_">observe</span>(&#123; <span class="attr">entryTypes</span>: [<span class="string">&#x27;layout-shift&#x27;</span>] &#125;)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">observers</span>.<span class="title function_">push</span>(clsObserver)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 监控导航性能</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">private</span> <span class="title function_">observeNavigation</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> navigationObserver = <span class="keyword">new</span> <span class="title class_">PerformanceObserver</span>(<span class="function">(<span class="params">list</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> entries = list.<span class="title function_">getEntries</span>()</span><br><span class="line">      entries.<span class="title function_">forEach</span>(<span class="function">(<span class="params"><span class="attr">entry</span>: <span class="built_in">any</span></span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">metrics</span>.<span class="property">ttfb</span> = entry.<span class="property">responseStart</span> - entry.<span class="property">requestStart</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">metrics</span>.<span class="property">domContentLoaded</span> = entry.<span class="property">domContentLoadedEventEnd</span> - entry.<span class="property">navigationStart</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">metrics</span>.<span class="property">loadComplete</span> = entry.<span class="property">loadEventEnd</span> - entry.<span class="property">navigationStart</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">    navigationObserver.<span class="title function_">observe</span>(&#123; <span class="attr">entryTypes</span>: [<span class="string">&#x27;navigation&#x27;</span>] &#125;)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">observers</span>.<span class="title function_">push</span>(navigationObserver)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 监控资源加载</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">private</span> <span class="title function_">observeResources</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> resourceObserver = <span class="keyword">new</span> <span class="title class_">PerformanceObserver</span>(<span class="function">(<span class="params">list</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> entries = list.<span class="title function_">getEntries</span>()</span><br><span class="line">      </span><br><span class="line">      <span class="keyword">let</span> totalSize = <span class="number">0</span></span><br><span class="line">      <span class="keyword">let</span> cacheHits = <span class="number">0</span></span><br><span class="line">      </span><br><span class="line">      entries.<span class="title function_">forEach</span>(<span class="function">(<span class="params"><span class="attr">entry</span>: <span class="built_in">any</span></span>) =&gt;</span> &#123;</span><br><span class="line">        totalSize += entry.<span class="property">transferSize</span> || <span class="number">0</span></span><br><span class="line">        <span class="keyword">if</span> (entry.<span class="property">transferSize</span> === <span class="number">0</span> &amp;&amp; entry.<span class="property">decodedBodySize</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">          cacheHits++</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">      </span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">metrics</span>.<span class="property">resourceCount</span> = entries.<span class="property">length</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">metrics</span>.<span class="property">resourceSize</span> = totalSize</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">metrics</span>.<span class="property">cacheHitRate</span> = cacheHits / entries.<span class="property">length</span></span><br><span class="line">    &#125;)</span><br><span class="line">    resourceObserver.<span class="title function_">observe</span>(&#123; <span class="attr">entryTypes</span>: [<span class="string">&#x27;resource&#x27;</span>] &#125;)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">observers</span>.<span class="title function_">push</span>(resourceObserver)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 获取性能指标</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="title function_">getMetrics</span>(): <span class="title class_">Partial</span>&lt;<span class="title class_">PerformanceMetrics</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; ...<span class="variable language_">this</span>.<span class="property">metrics</span> &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 发送性能数据</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">sendMetrics</span>(<span class="attr">endpoint</span>: <span class="built_in">string</span>): <span class="title class_">Promise</span>&lt;<span class="built_in">void</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">await</span> <span class="title function_">fetch</span>(endpoint, &#123;</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">        <span class="attr">headers</span>: &#123;</span><br><span class="line">          <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">body</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123;</span><br><span class="line">          <span class="attr">metrics</span>: <span class="variable language_">this</span>.<span class="property">metrics</span>,</span><br><span class="line">          <span class="attr">timestamp</span>: <span class="title class_">Date</span>.<span class="title function_">now</span>(),</span><br><span class="line">          <span class="attr">userAgent</span>: navigator.<span class="property">userAgent</span>,</span><br><span class="line">          <span class="attr">url</span>: <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span></span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Failed to send performance metrics:&#x27;</span>, error)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 清理监控器</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="title function_">destroy</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">observers</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">observer</span> =&gt;</span> observer.<span class="title function_">disconnect</span>())</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">observers</span> = []</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 导出单例</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> performanceMonitor = <span class="keyword">new</span> <span class="title class_">PerformanceMonitor</span>()</span><br></pre></td></tr></table></figure>

<h2 id="Nuxt-3-核心特性与配置"><a href="#Nuxt-3-核心特性与配置" class="headerlink" title="Nuxt 3 核心特性与配置"></a>Nuxt 3 核心特性与配置</h2><h3 id="1-项目初始化与配置"><a href="#1-项目初始化与配置" class="headerlink" title="1. 项目初始化与配置"></a>1. 项目初始化与配置</h3><p><strong>Nuxt 3 项目配置</strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// nuxt.config.ts</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineNuxtConfig</span>(&#123;</span><br><span class="line">  <span class="comment">// 基础配置</span></span><br><span class="line">  <span class="attr">app</span>: &#123;</span><br><span class="line">    <span class="attr">head</span>: &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;Vue 3 SSR/SSG 实战项目&#x27;</span>,</span><br><span class="line">      <span class="attr">meta</span>: [</span><br><span class="line">        &#123; <span class="attr">charset</span>: <span class="string">&#x27;utf-8&#x27;</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">name</span>: <span class="string">&#x27;viewport&#x27;</span>, <span class="attr">content</span>: <span class="string">&#x27;width=device-width, initial-scale=1&#x27;</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">name</span>: <span class="string">&#x27;description&#x27;</span>, <span class="attr">content</span>: <span class="string">&#x27;Vue 3 服务端渲染与静态站点生成实战项目&#x27;</span> &#125;</span><br><span class="line">      ],</span><br><span class="line">      <span class="attr">link</span>: [</span><br><span class="line">        &#123; <span class="attr">rel</span>: <span class="string">&#x27;icon&#x27;</span>, <span class="attr">type</span>: <span class="string">&#x27;image/x-icon&#x27;</span>, <span class="attr">href</span>: <span class="string">&#x27;/favicon.ico&#x27;</span> &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 渲染模式配置</span></span><br><span class="line">  <span class="attr">ssr</span>: <span class="literal">true</span>,</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 路由配置</span></span><br><span class="line">  <span class="attr">router</span>: &#123;</span><br><span class="line">    <span class="attr">options</span>: &#123;</span><br><span class="line">      <span class="attr">scrollBehaviorType</span>: <span class="string">&#x27;smooth&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 构建配置</span></span><br><span class="line">  <span class="attr">build</span>: &#123;</span><br><span class="line">    <span class="attr">transpile</span>: [<span class="string">&#x27;@headlessui/vue&#x27;</span>]</span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// Vite 配置</span></span><br><span class="line">  <span class="attr">vite</span>: &#123;</span><br><span class="line">    <span class="attr">css</span>: &#123;</span><br><span class="line">      <span class="attr">preprocessorOptions</span>: &#123;</span><br><span class="line">        <span class="attr">scss</span>: &#123;</span><br><span class="line">          <span class="attr">additionalData</span>: <span class="string">&#x27;@use &quot;~/assets/scss/variables.scss&quot; as *;&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">optimizeDeps</span>: &#123;</span><br><span class="line">      <span class="attr">include</span>: [<span class="string">&#x27;lodash-es&#x27;</span>, <span class="string">&#x27;dayjs&#x27;</span>]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// CSS 框架</span></span><br><span class="line">  <span class="attr">css</span>: [</span><br><span class="line">    <span class="string">&#x27;~/assets/scss/main.scss&#x27;</span></span><br><span class="line">  ],</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 模块配置</span></span><br><span class="line">  <span class="attr">modules</span>: [</span><br><span class="line">    <span class="string">&#x27;@nuxtjs/tailwindcss&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;@pinia/nuxt&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;@nuxtjs/color-mode&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;@vueuse/nuxt&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;@nuxt/content&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;@nuxt/image&#x27;</span></span><br><span class="line">  ],</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// Pinia 配置</span></span><br><span class="line">  <span class="attr">pinia</span>: &#123;</span><br><span class="line">    <span class="attr">autoImports</span>: [<span class="string">&#x27;defineStore&#x27;</span>, <span class="string">&#x27;storeToRefs&#x27;</span>]</span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 颜色模式配置</span></span><br><span class="line">  <span class="attr">colorMode</span>: &#123;</span><br><span class="line">    <span class="attr">preference</span>: <span class="string">&#x27;system&#x27;</span>,</span><br><span class="line">    <span class="attr">fallback</span>: <span class="string">&#x27;light&#x27;</span>,</span><br><span class="line">    <span class="attr">hid</span>: <span class="string">&#x27;nuxt-color-mode-script&#x27;</span>,</span><br><span class="line">    <span class="attr">globalName</span>: <span class="string">&#x27;__NUXT_COLOR_MODE__&#x27;</span>,</span><br><span class="line">    <span class="attr">componentName</span>: <span class="string">&#x27;ColorScheme&#x27;</span>,</span><br><span class="line">    <span class="attr">classPrefix</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">classSuffix</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">storageKey</span>: <span class="string">&#x27;nuxt-color-mode&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 内容模块配置</span></span><br><span class="line">  <span class="attr">content</span>: &#123;</span><br><span class="line">    <span class="attr">highlight</span>: &#123;</span><br><span class="line">      <span class="attr">theme</span>: &#123;</span><br><span class="line">        <span class="attr">default</span>: <span class="string">&#x27;github-light&#x27;</span>,</span><br><span class="line">        <span class="attr">dark</span>: <span class="string">&#x27;github-dark&#x27;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">preload</span>: [<span class="string">&#x27;json&#x27;</span>, <span class="string">&#x27;js&#x27;</span>, <span class="string">&#x27;ts&#x27;</span>, <span class="string">&#x27;html&#x27;</span>, <span class="string">&#x27;css&#x27;</span>, <span class="string">&#x27;vue&#x27;</span>, <span class="string">&#x27;diff&#x27;</span>, <span class="string">&#x27;shell&#x27;</span>, <span class="string">&#x27;markdown&#x27;</span>, <span class="string">&#x27;yaml&#x27;</span>, <span class="string">&#x27;bash&#x27;</span>, <span class="string">&#x27;ini&#x27;</span>]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">markdown</span>: &#123;</span><br><span class="line">      <span class="attr">toc</span>: &#123;</span><br><span class="line">        <span class="attr">depth</span>: <span class="number">3</span>,</span><br><span class="line">        <span class="attr">searchDepth</span>: <span class="number">3</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 图片优化配置</span></span><br><span class="line">  <span class="attr">image</span>: &#123;</span><br><span class="line">    <span class="attr">format</span>: [<span class="string">&#x27;webp&#x27;</span>, <span class="string">&#x27;avif&#x27;</span>],</span><br><span class="line">    <span class="attr">quality</span>: <span class="number">80</span>,</span><br><span class="line">    <span class="attr">densities</span>: [<span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">    <span class="attr">sizes</span>: <span class="string">&#x27;sm:100vw md:50vw lg:400px&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 运行时配置</span></span><br><span class="line">  <span class="attr">runtimeConfig</span>: &#123;</span><br><span class="line">    <span class="comment">// 服务端环境变量</span></span><br><span class="line">    <span class="attr">apiSecret</span>: process.<span class="property">env</span>.<span class="property">API_SECRET</span>,</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 公共环境变量</span></span><br><span class="line">    <span class="attr">public</span>: &#123;</span><br><span class="line">      <span class="attr">apiBase</span>: process.<span class="property">env</span>.<span class="property">API_BASE</span> || <span class="string">&#x27;https://api.example.com&#x27;</span>,</span><br><span class="line">      <span class="attr">gtmId</span>: process.<span class="property">env</span>.<span class="property">GTM_ID</span>,</span><br><span class="line">      <span class="attr">siteUrl</span>: process.<span class="property">env</span>.<span class="property">SITE_URL</span> || <span class="string">&#x27;https://example.com&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 实验性功能</span></span><br><span class="line">  <span class="attr">experimental</span>: &#123;</span><br><span class="line">    <span class="attr">payloadExtraction</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">inlineSSRStyles</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">renderJsonPayloads</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 性能优化</span></span><br><span class="line">  <span class="attr">optimization</span>: &#123;</span><br><span class="line">    <span class="attr">keyedComposables</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;useState&#x27;</span>,</span><br><span class="line">        <span class="attr">argumentLength</span>: <span class="number">2</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 开发工具</span></span><br><span class="line">  <span class="attr">devtools</span>: &#123;</span><br><span class="line">    <span class="attr">enabled</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// TypeScript 配置</span></span><br><span class="line">  <span class="attr">typescript</span>: &#123;</span><br><span class="line">    <span class="attr">strict</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">typeCheck</span>: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="2-页面和布局系统"><a href="#2-页面和布局系统" class="headerlink" title="2. 页面和布局系统"></a>2. 页面和布局系统</h3><p><strong>布局组件</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- layouts/default.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;min-h-screen bg-white dark:bg-gray-900 transition-colors&quot;&gt;</span><br><span class="line">    &lt;!-- 导航栏 --&gt;</span><br><span class="line">    &lt;AppHeader /&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;!-- 主要内容 --&gt;</span><br><span class="line">    &lt;main class=&quot;container mx-auto px-4 py-8&quot;&gt;</span><br><span class="line">      &lt;slot /&gt;</span><br><span class="line">    &lt;/main&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;!-- 页脚 --&gt;</span><br><span class="line">    &lt;AppFooter /&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;!-- 全局组件 --&gt;</span><br><span class="line">    &lt;AppNotification /&gt;</span><br><span class="line">    &lt;AppLoading v-if=&quot;pending&quot; /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">// 页面元数据</span><br><span class="line">useHead(&#123;</span><br><span class="line">  htmlAttrs: &#123;</span><br><span class="line">    lang: &#x27;zh-CN&#x27;</span><br><span class="line">  &#125;,</span><br><span class="line">  bodyAttrs: &#123;</span><br><span class="line">    class: &#x27;font-sans antialiased&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// 全局状态</span><br><span class="line">const &#123; pending &#125; = useLazyAsyncData(&#x27;app-init&#x27;, async () =&gt; &#123;</span><br><span class="line">  // 初始化应用数据</span><br><span class="line">  await initializeApp()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 初始化应用</span><br><span class="line"> */</span><br><span class="line">async function initializeApp() &#123;</span><br><span class="line">  // 加载用户信息</span><br><span class="line">  const userStore = useUserStore()</span><br><span class="line">  await userStore.fetchCurrentUser()</span><br><span class="line">  </span><br><span class="line">  // 加载应用配置</span><br><span class="line">  const appStore = useAppStore()</span><br><span class="line">  await appStore.loadConfig()</span><br><span class="line">  </span><br><span class="line">  // 初始化主题</span><br><span class="line">  const colorMode = useColorMode()</span><br><span class="line">  colorMode.preference = &#x27;system&#x27;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><strong>页面组件</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- pages/blog/[slug].vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;max-w-4xl mx-auto&quot;&gt;</span><br><span class="line">    &lt;!-- 文章头部 --&gt;</span><br><span class="line">    &lt;article-header</span><br><span class="line">      :title=&quot;article.title&quot;</span><br><span class="line">      :description=&quot;article.description&quot;</span><br><span class="line">      :author=&quot;article.author&quot;</span><br><span class="line">      :published-at=&quot;article.publishedAt&quot;</span><br><span class="line">      :reading-time=&quot;article.readingTime&quot;</span><br><span class="line">      :tags=&quot;article.tags&quot;</span><br><span class="line">    /&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;!-- 文章内容 --&gt;</span><br><span class="line">    &lt;div class=&quot;prose prose-lg dark:prose-invert max-w-none&quot;&gt;</span><br><span class="line">      &lt;ContentRenderer :value=&quot;article&quot; /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;!-- 文章底部 --&gt;</span><br><span class="line">    &lt;article-footer</span><br><span class="line">      :prev=&quot;prev&quot;</span><br><span class="line">      :next=&quot;next&quot;</span><br><span class="line">      :share-url=&quot;shareUrl&quot;</span><br><span class="line">    /&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;!-- 评论系统 --&gt;</span><br><span class="line">    &lt;comment-system</span><br><span class="line">      v-if=&quot;article.enableComments&quot;</span><br><span class="line">      :article-id=&quot;article.id&quot;</span><br><span class="line">    /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">interface Article &#123;</span><br><span class="line">  id: string</span><br><span class="line">  title: string</span><br><span class="line">  description: string</span><br><span class="line">  content: string</span><br><span class="line">  author: &#123;</span><br><span class="line">    name: string</span><br><span class="line">    avatar: string</span><br><span class="line">  &#125;</span><br><span class="line">  publishedAt: string</span><br><span class="line">  readingTime: number</span><br><span class="line">  tags: string[]</span><br><span class="line">  enableComments: boolean</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 路由参数</span><br><span class="line">const route = useRoute()</span><br><span class="line">const slug = route.params.slug as string</span><br><span class="line"></span><br><span class="line">// 获取文章数据</span><br><span class="line">const &#123; data: article &#125; = await useAsyncData(`blog-$&#123;slug&#125;`, () =&gt; &#123;</span><br><span class="line">  return queryContent&lt;Article&gt;(&#x27;/blog&#x27;).where(&#123; slug &#125;).findOne()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// 获取相邻文章</span><br><span class="line">const &#123; data: surroundingArticles &#125; = await useAsyncData(`blog-surrounding-$&#123;slug&#125;`, () =&gt; &#123;</span><br><span class="line">  return queryContent(&#x27;/blog&#x27;)</span><br><span class="line">    .only([&#x27;title&#x27;, &#x27;slug&#x27;, &#x27;publishedAt&#x27;])</span><br><span class="line">    .sort(&#123; publishedAt: -1 &#125;)</span><br><span class="line">    .findSurround(slug)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">const [prev, next] = surroundingArticles.value || []</span><br><span class="line"></span><br><span class="line">// 分享链接</span><br><span class="line">const shareUrl = computed(() =&gt; &#123;</span><br><span class="line">  const config = useRuntimeConfig()</span><br><span class="line">  return `$&#123;config.public.siteUrl&#125;$&#123;route.path&#125;`</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// SEO 优化</span><br><span class="line">useHead(&#123;</span><br><span class="line">  title: article.value?.title,</span><br><span class="line">  meta: [</span><br><span class="line">    &#123;</span><br><span class="line">      name: &#x27;description&#x27;,</span><br><span class="line">      content: article.value?.description</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      property: &#x27;og:title&#x27;,</span><br><span class="line">      content: article.value?.title</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      property: &#x27;og:description&#x27;,</span><br><span class="line">      content: article.value?.description</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      property: &#x27;og:url&#x27;,</span><br><span class="line">      content: shareUrl.value</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      property: &#x27;og:type&#x27;,</span><br><span class="line">      content: &#x27;article&#x27;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      name: &#x27;twitter:card&#x27;,</span><br><span class="line">      content: &#x27;summary_large_image&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  link: [</span><br><span class="line">    &#123;</span><br><span class="line">      rel: &#x27;canonical&#x27;,</span><br><span class="line">      href: shareUrl.value</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// 结构化数据</span><br><span class="line">useJsonld(&#123;</span><br><span class="line">  &#x27;@context&#x27;: &#x27;https://schema.org&#x27;,</span><br><span class="line">  &#x27;@type&#x27;: &#x27;Article&#x27;,</span><br><span class="line">  headline: article.value?.title,</span><br><span class="line">  description: article.value?.description,</span><br><span class="line">  author: &#123;</span><br><span class="line">    &#x27;@type&#x27;: &#x27;Person&#x27;,</span><br><span class="line">    name: article.value?.author.name</span><br><span class="line">  &#125;,</span><br><span class="line">  datePublished: article.value?.publishedAt,</span><br><span class="line">  url: shareUrl.value</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// 404 处理</span><br><span class="line">if (!article.value) &#123;</span><br><span class="line">  throw createError(&#123;</span><br><span class="line">    statusCode: 404,</span><br><span class="line">    statusMessage: &#x27;文章不存在&#x27;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="3-数据获取策略"><a href="#3-数据获取策略" class="headerlink" title="3. 数据获取策略"></a>3. 数据获取策略</h3><p><strong>数据获取 Composables</strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// composables/useApi.ts</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * API 响应接口</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">ApiResponse</span>&lt;T = <span class="built_in">any</span>&gt; &#123;</span><br><span class="line">  <span class="attr">data</span>: T</span><br><span class="line">  <span class="attr">message</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">code</span>: <span class="built_in">number</span></span><br><span class="line">  <span class="attr">timestamp</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 分页响应接口</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">PaginatedResponse</span>&lt;T = <span class="built_in">any</span>&gt; &#123;</span><br><span class="line">  <span class="attr">data</span>: T[]</span><br><span class="line">  <span class="attr">pagination</span>: &#123;</span><br><span class="line">    <span class="attr">page</span>: <span class="built_in">number</span></span><br><span class="line">    <span class="attr">limit</span>: <span class="built_in">number</span></span><br><span class="line">    <span class="attr">total</span>: <span class="built_in">number</span></span><br><span class="line">    <span class="attr">totalPages</span>: <span class="built_in">number</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * API 请求选项</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">ApiOptions</span> &#123;</span><br><span class="line">  <span class="attr">method</span>?: <span class="string">&#x27;GET&#x27;</span> | <span class="string">&#x27;POST&#x27;</span> | <span class="string">&#x27;PUT&#x27;</span> | <span class="string">&#x27;DELETE&#x27;</span> | <span class="string">&#x27;PATCH&#x27;</span></span><br><span class="line">  <span class="attr">body</span>?: <span class="built_in">any</span></span><br><span class="line">  <span class="attr">headers</span>?: <span class="title class_">Record</span>&lt;<span class="built_in">string</span>, <span class="built_in">string</span>&gt;</span><br><span class="line">  <span class="attr">query</span>?: <span class="title class_">Record</span>&lt;<span class="built_in">string</span>, <span class="built_in">any</span>&gt;</span><br><span class="line">  <span class="attr">cache</span>?: <span class="built_in">boolean</span></span><br><span class="line">  <span class="attr">ssr</span>?: <span class="built_in">boolean</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * API 请求 Hook</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> useApi&lt;T = <span class="built_in">any</span>&gt;(</span><br><span class="line">  <span class="attr">url</span>: <span class="built_in">string</span>,</span><br><span class="line">  <span class="attr">options</span>: <span class="title class_">ApiOptions</span> = &#123;&#125;</span><br><span class="line">) &#123;</span><br><span class="line">  <span class="keyword">const</span> config = <span class="title function_">useRuntimeConfig</span>()</span><br><span class="line">  <span class="keyword">const</span> &#123; $fetch &#125; = <span class="title function_">useNuxtApp</span>()</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 构建完整 URL</span></span><br><span class="line">  <span class="keyword">const</span> fullUrl = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> baseUrl = config.<span class="property">public</span>.<span class="property">apiBase</span></span><br><span class="line">    <span class="keyword">const</span> path = url.<span class="title function_">startsWith</span>(<span class="string">&#x27;/&#x27;</span>) ? url : <span class="string">`/<span class="subst">$&#123;url&#125;</span>`</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;baseUrl&#125;</span><span class="subst">$&#123;path&#125;</span>`</span></span><br><span class="line">  &#125;)</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 请求选项</span></span><br><span class="line">  <span class="keyword">const</span> fetchOptions = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">method</span>: options.<span class="property">method</span> || <span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">    <span class="attr">body</span>: options.<span class="property">body</span>,</span><br><span class="line">    <span class="attr">headers</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span>,</span><br><span class="line">      ...options.<span class="property">headers</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">query</span>: options.<span class="property">query</span>,</span><br><span class="line">    <span class="attr">server</span>: options.<span class="property">ssr</span> !== <span class="literal">false</span></span><br><span class="line">  &#125;))</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 缓存键</span></span><br><span class="line">  <span class="keyword">const</span> cacheKey = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> key = <span class="string">`api:<span class="subst">$&#123;url&#125;</span>`</span></span><br><span class="line">    <span class="keyword">if</span> (options.<span class="property">query</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> queryString = <span class="keyword">new</span> <span class="title class_">URLSearchParams</span>(options.<span class="property">query</span>).<span class="title function_">toString</span>()</span><br><span class="line">      <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;key&#125;</span>?<span class="subst">$&#123;queryString&#125;</span>`</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> key</span><br><span class="line">  &#125;)</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 执行请求</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">execute</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> response = <span class="keyword">await</span> $fetch&lt;<span class="title class_">ApiResponse</span>&lt;T&gt;&gt;(fullUrl.<span class="property">value</span>, fetchOptions.<span class="property">value</span>)</span><br><span class="line">      </span><br><span class="line">      <span class="keyword">if</span> (response.<span class="property">code</span> !== <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(response.<span class="property">message</span> || <span class="string">&#x27;请求失败&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">      <span class="keyword">return</span> response.<span class="property">data</span></span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;API request failed:&#x27;</span>, error)</span><br><span class="line">      <span class="keyword">throw</span> error</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 使用 asyncData 进行数据获取</span></span><br><span class="line">  <span class="keyword">if</span> (options.<span class="property">cache</span> !== <span class="literal">false</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">useAsyncData</span>(cacheKey.<span class="property">value</span>, execute, &#123;</span><br><span class="line">      <span class="attr">server</span>: options.<span class="property">ssr</span> !== <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">default</span>: <span class="function">() =&gt;</span> <span class="literal">null</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">data</span>: <span class="title function_">ref</span>(<span class="literal">null</span>),</span><br><span class="line">    <span class="attr">pending</span>: <span class="title function_">ref</span>(<span class="literal">false</span>),</span><br><span class="line">    <span class="attr">error</span>: <span class="title function_">ref</span>(<span class="literal">null</span>),</span><br><span class="line">    <span class="attr">refresh</span>: execute</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 分页数据获取 Hook</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> usePaginatedApi&lt;T = <span class="built_in">any</span>&gt;(</span><br><span class="line">  <span class="attr">url</span>: <span class="built_in">string</span>,</span><br><span class="line">  <span class="attr">options</span>: <span class="title class_">ApiOptions</span> &amp; &#123;</span><br><span class="line">    <span class="attr">page</span>?: <span class="built_in">number</span></span><br><span class="line">    <span class="attr">limit</span>?: <span class="built_in">number</span></span><br><span class="line">  &#125; = &#123;&#125;</span><br><span class="line">) &#123;</span><br><span class="line">  <span class="keyword">const</span> page = <span class="title function_">ref</span>(options.<span class="property">page</span> || <span class="number">1</span>)</span><br><span class="line">  <span class="keyword">const</span> limit = <span class="title function_">ref</span>(options.<span class="property">limit</span> || <span class="number">10</span>)</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">const</span> query = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> (&#123;</span><br><span class="line">    ...options.<span class="property">query</span>,</span><br><span class="line">    <span class="attr">page</span>: page.<span class="property">value</span>,</span><br><span class="line">    <span class="attr">limit</span>: limit.<span class="property">value</span></span><br><span class="line">  &#125;))</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">const</span> &#123; data, pending, error, refresh &#125; = useApi&lt;<span class="title class_">PaginatedResponse</span>&lt;T&gt;&gt;(url, &#123;</span><br><span class="line">    ...options,</span><br><span class="line">    <span class="attr">query</span>: query.<span class="property">value</span></span><br><span class="line">  &#125;)</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">const</span> items = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> data.<span class="property">value</span>?.<span class="property">data</span> || [])</span><br><span class="line">  <span class="keyword">const</span> pagination = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> data.<span class="property">value</span>?.<span class="property">pagination</span>)</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 跳转到指定页</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">goToPage</span> = <span class="keyword">async</span> (<span class="params"><span class="attr">newPage</span>: <span class="built_in">number</span></span>) =&gt; &#123;</span><br><span class="line">    page.<span class="property">value</span> = newPage</span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">refresh</span>()</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 下一页</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">nextPage</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (pagination.<span class="property">value</span> &amp;&amp; page.<span class="property">value</span> &lt; pagination.<span class="property">value</span>.<span class="property">totalPages</span>) &#123;</span><br><span class="line">      <span class="keyword">await</span> <span class="title function_">goToPage</span>(page.<span class="property">value</span> + <span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 上一页</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">prevPage</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (page.<span class="property">value</span> &gt; <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="keyword">await</span> <span class="title function_">goToPage</span>(page.<span class="property">value</span> - <span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    items,</span><br><span class="line">    pagination,</span><br><span class="line">    pending,</span><br><span class="line">    error,</span><br><span class="line">    <span class="attr">page</span>: <span class="title function_">readonly</span>(page),</span><br><span class="line">    <span class="attr">limit</span>: <span class="title function_">readonly</span>(limit),</span><br><span class="line">    goToPage,</span><br><span class="line">    nextPage,</span><br><span class="line">    prevPage,</span><br><span class="line">    refresh</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 无限滚动数据获取 Hook</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> useInfiniteApi&lt;T = <span class="built_in">any</span>&gt;(</span><br><span class="line">  <span class="attr">url</span>: <span class="built_in">string</span>,</span><br><span class="line">  <span class="attr">options</span>: <span class="title class_">ApiOptions</span> &amp; &#123;</span><br><span class="line">    <span class="attr">limit</span>?: <span class="built_in">number</span></span><br><span class="line">  &#125; = &#123;&#125;</span><br><span class="line">) &#123;</span><br><span class="line">  <span class="keyword">const</span> page = <span class="title function_">ref</span>(<span class="number">1</span>)</span><br><span class="line">  <span class="keyword">const</span> limit = <span class="title function_">ref</span>(options.<span class="property">limit</span> || <span class="number">10</span>)</span><br><span class="line">  <span class="keyword">const</span> allItems = ref&lt;T[]&gt;([])</span><br><span class="line">  <span class="keyword">const</span> hasMore = <span class="title function_">ref</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">const</span> loading = <span class="title function_">ref</span>(<span class="literal">false</span>)</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 加载更多数据</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">loadMore</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (loading.<span class="property">value</span> || !hasMore.<span class="property">value</span>) <span class="keyword">return</span></span><br><span class="line">    </span><br><span class="line">    loading.<span class="property">value</span> = <span class="literal">true</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> query = &#123;</span><br><span class="line">        ...options.<span class="property">query</span>,</span><br><span class="line">        <span class="attr">page</span>: page.<span class="property">value</span>,</span><br><span class="line">        <span class="attr">limit</span>: limit.<span class="property">value</span></span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">      <span class="keyword">const</span> &#123; data &#125; = <span class="keyword">await</span> useApi&lt;<span class="title class_">PaginatedResponse</span>&lt;T&gt;&gt;(url, &#123;</span><br><span class="line">        ...options,</span><br><span class="line">        query,</span><br><span class="line">        <span class="attr">cache</span>: <span class="literal">false</span></span><br><span class="line">      &#125;)</span><br><span class="line">      </span><br><span class="line">      <span class="keyword">if</span> (data.<span class="property">value</span>) &#123;</span><br><span class="line">        allItems.<span class="property">value</span>.<span class="title function_">push</span>(...data.<span class="property">value</span>.<span class="property">data</span>)</span><br><span class="line">        hasMore.<span class="property">value</span> = page.<span class="property">value</span> &lt; data.<span class="property">value</span>.<span class="property">pagination</span>.<span class="property">totalPages</span></span><br><span class="line">        page.<span class="property">value</span>++</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Load more failed:&#x27;</span>, error)</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">      loading.<span class="property">value</span> = <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 重置数据</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">reset</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    page.<span class="property">value</span> = <span class="number">1</span></span><br><span class="line">    allItems.<span class="property">value</span> = []</span><br><span class="line">    hasMore.<span class="property">value</span> = <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 初始加载</span></span><br><span class="line">  <span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">loadMore</span>()</span><br><span class="line">  &#125;)</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">items</span>: <span class="title function_">readonly</span>(allItems),</span><br><span class="line">    <span class="attr">loading</span>: <span class="title function_">readonly</span>(loading),</span><br><span class="line">    <span class="attr">hasMore</span>: <span class="title function_">readonly</span>(hasMore),</span><br><span class="line">    loadMore,</span><br><span class="line">    reset</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-状态管理集成"><a href="#4-状态管理集成" class="headerlink" title="4. 状态管理集成"></a>4. 状态管理集成</h3><p><strong>Pinia Store 定义</strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// stores/user.ts</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 用户信息接口</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">User</span> &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="built_in">number</span></span><br><span class="line">  <span class="attr">username</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">email</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">avatar</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">role</span>: <span class="string">&#x27;admin&#x27;</span> | <span class="string">&#x27;user&#x27;</span> | <span class="string">&#x27;guest&#x27;</span></span><br><span class="line">  <span class="attr">preferences</span>: &#123;</span><br><span class="line">    <span class="attr">theme</span>: <span class="string">&#x27;light&#x27;</span> | <span class="string">&#x27;dark&#x27;</span> | <span class="string">&#x27;auto&#x27;</span></span><br><span class="line">    <span class="attr">language</span>: <span class="string">&#x27;zh-CN&#x27;</span> | <span class="string">&#x27;en-US&#x27;</span></span><br><span class="line">    <span class="attr">notifications</span>: <span class="built_in">boolean</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="attr">createdAt</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">lastLoginAt</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 用户 Store</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useUserStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;user&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 状态</span></span><br><span class="line">  <span class="keyword">const</span> user = ref&lt;<span class="title class_">User</span> | <span class="literal">null</span>&gt;(<span class="literal">null</span>)</span><br><span class="line">  <span class="keyword">const</span> isAuthenticated = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> !!user.<span class="property">value</span>)</span><br><span class="line">  <span class="keyword">const</span> isAdmin = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> user.<span class="property">value</span>?.<span class="property">role</span> === <span class="string">&#x27;admin&#x27;</span>)</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 认证令牌</span></span><br><span class="line">  <span class="keyword">const</span> token = <span class="title function_">useCookie</span>(<span class="string">&#x27;auth-token&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">default</span>: <span class="function">() =&gt;</span> <span class="literal">null</span>,</span><br><span class="line">    <span class="attr">httpOnly</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">secure</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">sameSite</span>: <span class="string">&#x27;strict&#x27;</span>,</span><br><span class="line">    <span class="attr">maxAge</span>: <span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span> * <span class="number">7</span> <span class="comment">// 7 天</span></span><br><span class="line">  &#125;)</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 获取当前用户信息</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">const</span> fetchCurrentUser = <span class="title function_">async</span> (): <span class="title class_">Promise</span>&lt;<span class="built_in">void</span>&gt; =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (!token.<span class="property">value</span>) <span class="keyword">return</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; data &#125; = <span class="keyword">await</span> useApi&lt;<span class="title class_">User</span>&gt;(<span class="string">&#x27;/auth/me&#x27;</span>, &#123;</span><br><span class="line">        <span class="attr">headers</span>: &#123;</span><br><span class="line">          <span class="title class_">Authorization</span>: <span class="string">`Bearer <span class="subst">$&#123;token.value&#125;</span>`</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">      </span><br><span class="line">      <span class="keyword">if</span> (data.<span class="property">value</span>) &#123;</span><br><span class="line">        user.<span class="property">value</span> = data.<span class="property">value</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Failed to fetch current user:&#x27;</span>, error)</span><br><span class="line">      <span class="keyword">await</span> <span class="title function_">logout</span>()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 用户登录</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">const</span> login = <span class="title function_">async</span> (<span class="attr">credentials</span>: &#123;</span><br><span class="line">    <span class="attr">email</span>: <span class="built_in">string</span></span><br><span class="line">    <span class="attr">password</span>: <span class="built_in">string</span></span><br><span class="line">  &#125;): <span class="title class_">Promise</span>&lt;<span class="built_in">void</span>&gt; =&gt; &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; data &#125; = <span class="keyword">await</span> useApi&lt;&#123;</span><br><span class="line">        <span class="attr">user</span>: <span class="title class_">User</span></span><br><span class="line">        <span class="attr">token</span>: <span class="built_in">string</span></span><br><span class="line">      &#125;&gt;(<span class="string">&#x27;/auth/login&#x27;</span>, &#123;</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">        <span class="attr">body</span>: credentials</span><br><span class="line">      &#125;)</span><br><span class="line">      </span><br><span class="line">      <span class="keyword">if</span> (data.<span class="property">value</span>) &#123;</span><br><span class="line">        user.<span class="property">value</span> = data.<span class="property">value</span>.<span class="property">user</span></span><br><span class="line">        token.<span class="property">value</span> = data.<span class="property">value</span>.<span class="property">token</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 跳转到首页</span></span><br><span class="line">        <span class="keyword">await</span> <span class="title function_">navigateTo</span>(<span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;登录失败，请检查邮箱和密码&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 用户注册</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">const</span> register = <span class="title function_">async</span> (<span class="attr">userData</span>: &#123;</span><br><span class="line">    <span class="attr">username</span>: <span class="built_in">string</span></span><br><span class="line">    <span class="attr">email</span>: <span class="built_in">string</span></span><br><span class="line">    <span class="attr">password</span>: <span class="built_in">string</span></span><br><span class="line">  &#125;): <span class="title class_">Promise</span>&lt;<span class="built_in">void</span>&gt; =&gt; &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; data &#125; = <span class="keyword">await</span> useApi&lt;&#123;</span><br><span class="line">        <span class="attr">user</span>: <span class="title class_">User</span></span><br><span class="line">        <span class="attr">token</span>: <span class="built_in">string</span></span><br><span class="line">      &#125;&gt;(<span class="string">&#x27;/auth/register&#x27;</span>, &#123;</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">        <span class="attr">body</span>: userData</span><br><span class="line">      &#125;)</span><br><span class="line">      </span><br><span class="line">      <span class="keyword">if</span> (data.<span class="property">value</span>) &#123;</span><br><span class="line">        user.<span class="property">value</span> = data.<span class="property">value</span>.<span class="property">user</span></span><br><span class="line">        token.<span class="property">value</span> = data.<span class="property">value</span>.<span class="property">token</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 跳转到首页</span></span><br><span class="line">        <span class="keyword">await</span> <span class="title function_">navigateTo</span>(<span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;注册失败，请稍后重试&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 用户登出</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">const</span> logout = <span class="title function_">async</span> (): <span class="title class_">Promise</span>&lt;<span class="built_in">void</span>&gt; =&gt; &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (token.<span class="property">value</span>) &#123;</span><br><span class="line">        <span class="keyword">await</span> <span class="title function_">useApi</span>(<span class="string">&#x27;/auth/logout&#x27;</span>, &#123;</span><br><span class="line">          <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">          <span class="attr">headers</span>: &#123;</span><br><span class="line">            <span class="title class_">Authorization</span>: <span class="string">`Bearer <span class="subst">$&#123;token.value&#125;</span>`</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Logout request failed:&#x27;</span>, error)</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">      user.<span class="property">value</span> = <span class="literal">null</span></span><br><span class="line">      token.<span class="property">value</span> = <span class="literal">null</span></span><br><span class="line">      </span><br><span class="line">      <span class="comment">// 跳转到登录页</span></span><br><span class="line">      <span class="keyword">await</span> <span class="title function_">navigateTo</span>(<span class="string">&#x27;/login&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 更新用户信息</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">const</span> updateProfile = <span class="title function_">async</span> (<span class="attr">updates</span>: <span class="title class_">Partial</span>&lt;<span class="title class_">User</span>&gt;): <span class="title class_">Promise</span>&lt;<span class="built_in">void</span>&gt; =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (!user.<span class="property">value</span>) <span class="keyword">return</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; data &#125; = <span class="keyword">await</span> useApi&lt;<span class="title class_">User</span>&gt;(<span class="string">&#x27;/user/profile&#x27;</span>, &#123;</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&#x27;PUT&#x27;</span>,</span><br><span class="line">        <span class="attr">body</span>: updates,</span><br><span class="line">        <span class="attr">headers</span>: &#123;</span><br><span class="line">          <span class="title class_">Authorization</span>: <span class="string">`Bearer <span class="subst">$&#123;token.value&#125;</span>`</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">      </span><br><span class="line">      <span class="keyword">if</span> (data.<span class="property">value</span>) &#123;</span><br><span class="line">        user.<span class="property">value</span> = data.<span class="property">value</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;更新用户信息失败&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 更新用户偏好设置</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">const</span> updatePreferences = <span class="title function_">async</span> (<span class="attr">preferences</span>: <span class="title class_">Partial</span>&lt;<span class="title class_">User</span>[<span class="string">&#x27;preferences&#x27;</span>]&gt;): <span class="title class_">Promise</span>&lt;<span class="built_in">void</span>&gt; =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (!user.<span class="property">value</span>) <span class="keyword">return</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">const</span> updatedUser = &#123;</span><br><span class="line">      ...user.<span class="property">value</span>,</span><br><span class="line">      <span class="attr">preferences</span>: &#123;</span><br><span class="line">        ...user.<span class="property">value</span>.<span class="property">preferences</span>,</span><br><span class="line">        ...preferences</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">updateProfile</span>(updatedUser)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="comment">// 状态</span></span><br><span class="line">    <span class="attr">user</span>: <span class="title function_">readonly</span>(user),</span><br><span class="line">    isAuthenticated,</span><br><span class="line">    isAdmin,</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 方法</span></span><br><span class="line">    fetchCurrentUser,</span><br><span class="line">    login,</span><br><span class="line">    register,</span><br><span class="line">    logout,</span><br><span class="line">    updateProfile,</span><br><span class="line">    updatePreferences</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 服务端状态同步</span></span><br><span class="line"><span class="keyword">if</span> (process.<span class="property">server</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> userStore = <span class="title function_">useUserStore</span>()</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 在服务端初始化时获取用户信息</span></span><br><span class="line">  userStore.<span class="title function_">fetchCurrentUser</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="静态站点生成-SSG-实战"><a href="#静态站点生成-SSG-实战" class="headerlink" title="静态站点生成(SSG)实战"></a>静态站点生成(SSG)实战</h2><h3 id="1-内容管理系统"><a href="#1-内容管理系统" class="headerlink" title="1. 内容管理系统"></a>1. 内容管理系统</h3><p><strong>Nuxt Content 配置</strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// content/blog/vue3-ssr-guide.md</span></span><br><span class="line">---</span><br><span class="line"><span class="attr">title</span>: <span class="title class_">Vue</span> <span class="number">3</span> <span class="variable constant_">SSR</span> 完整指南</span><br><span class="line"><span class="attr">description</span>: 深入了解 <span class="title class_">Vue</span> <span class="number">3</span> 服务端渲染的实现原理和最佳实践</span><br><span class="line"><span class="attr">author</span>:</span><br><span class="line">  <span class="attr">name</span>: 张三</span><br><span class="line">  <span class="attr">avatar</span>: <span class="regexp">/images/</span>authors/zhangsan.<span class="property">jpg</span></span><br><span class="line"><span class="attr">publishedAt</span>: <span class="number">2023</span>-<span class="number">08</span>-<span class="number">15</span></span><br><span class="line"><span class="attr">tags</span>: [<span class="title class_">Vue3</span>, <span class="variable constant_">SSR</span>, <span class="title class_">Nuxt3</span>]</span><br><span class="line"><span class="attr">category</span>: 前端开发</span><br><span class="line"><span class="attr">featuredImage</span>: <span class="regexp">/images/</span>blog/vue3-ssr-guide.<span class="property">jpg</span></span><br><span class="line"><span class="attr">readingTime</span>: <span class="number">15</span></span><br><span class="line"><span class="attr">enableComments</span>: <span class="literal">true</span></span><br><span class="line"><span class="attr">seo</span>:</span><br><span class="line">  <span class="attr">keywords</span>: [<span class="title class_">Vue3</span>, <span class="variable constant_">SSR</span>, 服务端渲染, <span class="title class_">Nuxt3</span>]</span><br><span class="line">  <span class="attr">ogImage</span>: <span class="regexp">/images/</span>blog/vue3-ssr-guide-og.<span class="property">jpg</span></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line"># <span class="title class_">Vue</span> <span class="number">3</span> <span class="variable constant_">SSR</span> 完整指南</span><br><span class="line"></span><br><span class="line">服务端渲染(<span class="variable constant_">SSR</span>)是现代 <span class="title class_">Web</span> 开发中的重要技术...</span><br><span class="line"></span><br><span class="line">## 什么是 <span class="variable constant_">SSR</span></span><br><span class="line"></span><br><span class="line"><span class="variable constant_">SSR</span> 是指在服务器端执行 <span class="title class_">JavaScript</span> 代码，生成完整的 <span class="variable constant_">HTML</span> 页面后发送给客户端的技术。</span><br><span class="line"></span><br><span class="line">### <span class="variable constant_">SSR</span> 的优势</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span> **<span class="variable constant_">SEO</span> 友好**：搜索引擎可以直接抓取到完整的 <span class="variable constant_">HTML</span> 内容</span><br><span class="line"><span class="number">2.</span> **首屏性能**：用户可以更快看到页面内容</span><br><span class="line"><span class="number">3.</span> **社交分享**：社交平台可以正确解析页面元信息</span><br><span class="line"></span><br><span class="line"><span class="string">``</span><span class="string">`vue</span></span><br><span class="line"><span class="string">&lt;!-- 示例组件 --&gt;</span></span><br><span class="line"><span class="string">&lt;template&gt;</span></span><br><span class="line"><span class="string">  &lt;div class=&quot;ssr-example&quot;&gt;</span></span><br><span class="line"><span class="string">    &lt;h1&gt;&#123;&#123; title &#125;&#125;&lt;/h1&gt;</span></span><br><span class="line"><span class="string">    &lt;p&gt;&#123;&#123; content &#125;&#125;&lt;/p&gt;</span></span><br><span class="line"><span class="string">  &lt;/div&gt;</span></span><br><span class="line"><span class="string">&lt;/template&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;script setup&gt;</span></span><br><span class="line"><span class="string">const title = &#x27;SSR 示例&#x27;</span></span><br><span class="line"><span class="string">const content = &#x27;这是在服务端渲染的内容&#x27;</span></span><br><span class="line"><span class="string">&lt;/script&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="实现原理"><a href="#实现原理" class="headerlink" title="实现原理"></a>实现原理</h2><p>Vue 3 的 SSR 实现基于以下核心概念：</p>
<ul>
<li><strong>同构应用</strong>：同一套代码在服务端和客户端运行</li>
<li><strong>水合(Hydration)</strong>：客户端接管服务端渲染的静态 HTML</li>
<li><strong>状态同步</strong>：服务端状态传递给客户端</li>
</ul>
<p>更多内容请参考官方文档…</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**内容查询 API**</span><br><span class="line"></span><br><span class="line">```typescript</span><br><span class="line">// composables/useContent.ts</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 文章接口</span><br><span class="line"> */</span><br><span class="line">export interface Article &#123;</span><br><span class="line">  _path: string</span><br><span class="line">  title: string</span><br><span class="line">  description: string</span><br><span class="line">  author: &#123;</span><br><span class="line">    name: string</span><br><span class="line">    avatar: string</span><br><span class="line">  &#125;</span><br><span class="line">  publishedAt: string</span><br><span class="line">  tags: string[]</span><br><span class="line">  category: string</span><br><span class="line">  featuredImage?: string</span><br><span class="line">  readingTime: number</span><br><span class="line">  enableComments: boolean</span><br><span class="line">  seo: &#123;</span><br><span class="line">    keywords: string[]</span><br><span class="line">    ogImage?: string</span><br><span class="line">  &#125;</span><br><span class="line">  body: any</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 内容查询 Hook</span><br><span class="line"> */</span><br><span class="line">export function useContentQuery() &#123;</span><br><span class="line">  /**</span><br><span class="line">   * 获取所有文章</span><br><span class="line">   */</span><br><span class="line">  const getAllArticles = async (options: &#123;</span><br><span class="line">    limit?: number</span><br><span class="line">    skip?: number</span><br><span class="line">    category?: string</span><br><span class="line">    tag?: string</span><br><span class="line">    sortBy?: &#x27;publishedAt&#x27; | &#x27;title&#x27;</span><br><span class="line">    sortOrder?: &#x27;asc&#x27; | &#x27;desc&#x27;</span><br><span class="line">  &#125; = &#123;&#125;) =&gt; &#123;</span><br><span class="line">    const &#123;</span><br><span class="line">      limit = 10,</span><br><span class="line">      skip = 0,</span><br><span class="line">      category,</span><br><span class="line">      tag,</span><br><span class="line">      sortBy = &#x27;publishedAt&#x27;,</span><br><span class="line">      sortOrder = &#x27;desc&#x27;</span><br><span class="line">    &#125; = options</span><br><span class="line">    </span><br><span class="line">    let query = queryContent&lt;Article&gt;(&#x27;/blog&#x27;)</span><br><span class="line">    </span><br><span class="line">    // 分类筛选</span><br><span class="line">    if (category) &#123;</span><br><span class="line">      query = query.where(&#123; category &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // 标签筛选</span><br><span class="line">    if (tag) &#123;</span><br><span class="line">      query = query.where(&#123; tags: &#123; $contains: tag &#125; &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // 排序</span><br><span class="line">    const sortOptions = &#123; [sortBy]: sortOrder === &#x27;desc&#x27; ? -1 : 1 &#125;</span><br><span class="line">    query = query.sort(sortOptions)</span><br><span class="line">    </span><br><span class="line">    // 分页</span><br><span class="line">    query = query.skip(skip).limit(limit)</span><br><span class="line">    </span><br><span class="line">    return await query.find()</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  /**</span><br><span class="line">   * 获取文章详情</span><br><span class="line">   */</span><br><span class="line">  const getArticleBySlug = async (slug: string) =&gt; &#123;</span><br><span class="line">    return await queryContent&lt;Article&gt;(&#x27;/blog&#x27;)</span><br><span class="line">      .where(&#123; slug &#125;)</span><br><span class="line">      .findOne()</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  /**</span><br><span class="line">   * 获取相关文章</span><br><span class="line">   */</span><br><span class="line">  const getRelatedArticles = async (article: Article, limit = 3) =&gt; &#123;</span><br><span class="line">    return await queryContent&lt;Article&gt;(&#x27;/blog&#x27;)</span><br><span class="line">      .where(&#123;</span><br><span class="line">        _path: &#123; $ne: article._path &#125;,</span><br><span class="line">        $or: [</span><br><span class="line">          &#123; category: article.category &#125;,</span><br><span class="line">          &#123; tags: &#123; $in: article.tags &#125; &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;)</span><br><span class="line">      .limit(limit)</span><br><span class="line">      .find()</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  /**</span><br><span class="line">   * 获取文章归档</span><br><span class="line">   */</span><br><span class="line">  const getArticleArchive = async () =&gt; &#123;</span><br><span class="line">    const articles = await queryContent&lt;Article&gt;(&#x27;/blog&#x27;)</span><br><span class="line">      .only([&#x27;title&#x27;, &#x27;_path&#x27;, &#x27;publishedAt&#x27;, &#x27;category&#x27;])</span><br><span class="line">      .sort(&#123; publishedAt: -1 &#125;)</span><br><span class="line">      .find()</span><br><span class="line">    </span><br><span class="line">    // 按年月分组</span><br><span class="line">    const archive = articles.reduce((acc, article) =&gt; &#123;</span><br><span class="line">      const date = new Date(article.publishedAt)</span><br><span class="line">      const year = date.getFullYear()</span><br><span class="line">      const month = date.getMonth() + 1</span><br><span class="line">      const key = `$&#123;year&#125;-$&#123;month.toString().padStart(2, &#x27;0&#x27;)&#125;`</span><br><span class="line">      </span><br><span class="line">      if (!acc[key]) &#123;</span><br><span class="line">        acc[key] = &#123;</span><br><span class="line">          year,</span><br><span class="line">          month,</span><br><span class="line">          articles: []</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">      acc[key].articles.push(article)</span><br><span class="line">      return acc</span><br><span class="line">    &#125;, &#123;&#125; as Record&lt;string, any&gt;)</span><br><span class="line">    </span><br><span class="line">    return Object.values(archive)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  /**</span><br><span class="line">   * 获取标签云</span><br><span class="line">   */</span><br><span class="line">  const getTagCloud = async () =&gt; &#123;</span><br><span class="line">    const articles = await queryContent&lt;Article&gt;(&#x27;/blog&#x27;)</span><br><span class="line">      .only([&#x27;tags&#x27;])</span><br><span class="line">      .find()</span><br><span class="line">    </span><br><span class="line">    const tagCount = articles.reduce((acc, article) =&gt; &#123;</span><br><span class="line">      article.tags.forEach(tag =&gt; &#123;</span><br><span class="line">        acc[tag] = (acc[tag] || 0) + 1</span><br><span class="line">      &#125;)</span><br><span class="line">      return acc</span><br><span class="line">    &#125;, &#123;&#125; as Record&lt;string, number&gt;)</span><br><span class="line">    </span><br><span class="line">    return Object.entries(tagCount)</span><br><span class="line">      .map(([tag, count]) =&gt; (&#123; tag, count &#125;))</span><br><span class="line">      .sort((a, b) =&gt; b.count - a.count)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  /**</span><br><span class="line">   * 搜索文章</span><br><span class="line">   */</span><br><span class="line">  const searchArticles = async (keyword: string, limit = 10) =&gt; &#123;</span><br><span class="line">    return await queryContent&lt;Article&gt;(&#x27;/blog&#x27;)</span><br><span class="line">      .where(&#123;</span><br><span class="line">        $or: [</span><br><span class="line">          &#123; title: &#123; $regex: keyword, $options: &#x27;i&#x27; &#125; &#125;,</span><br><span class="line">          &#123; description: &#123; $regex: keyword, $options: &#x27;i&#x27; &#125; &#125;,</span><br><span class="line">          &#123; tags: &#123; $contains: keyword &#125; &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;)</span><br><span class="line">      .limit(limit)</span><br><span class="line">      .find()</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  return &#123;</span><br><span class="line">    getAllArticles,</span><br><span class="line">    getArticleBySlug,</span><br><span class="line">    getRelatedArticles,</span><br><span class="line">    getArticleArchive,</span><br><span class="line">    getTagCloud,</span><br><span class="line">    searchArticles</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-静态生成配置"><a href="#2-静态生成配置" class="headerlink" title="2. 静态生成配置"></a>2. 静态生成配置</h3><p><strong>预渲染路由配置</strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// nuxt.config.ts (SSG 配置)</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineNuxtConfig</span>(&#123;</span><br><span class="line">  <span class="comment">// 启用静态生成</span></span><br><span class="line">  <span class="attr">nitro</span>: &#123;</span><br><span class="line">    <span class="attr">prerender</span>: &#123;</span><br><span class="line">      <span class="attr">routes</span>: [<span class="string">&#x27;/sitemap.xml&#x27;</span>, <span class="string">&#x27;/robots.txt&#x27;</span>]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 生成配置</span></span><br><span class="line">  <span class="attr">generate</span>: &#123;</span><br><span class="line">    <span class="comment">// 并发数</span></span><br><span class="line">    <span class="attr">concurrency</span>: <span class="number">10</span>,</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 生成间隔</span></span><br><span class="line">    <span class="attr">interval</span>: <span class="number">100</span>,</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 子目录</span></span><br><span class="line">    <span class="attr">subFolders</span>: <span class="literal">true</span>,</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 回退页面</span></span><br><span class="line">    <span class="attr">fallback</span>: <span class="string">&#x27;404.html&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 路由规则</span></span><br><span class="line">  <span class="attr">routeRules</span>: &#123;</span><br><span class="line">    <span class="comment">// 首页预渲染</span></span><br><span class="line">    <span class="string">&#x27;/&#x27;</span>: &#123; <span class="attr">prerender</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 博客列表页面预渲染</span></span><br><span class="line">    <span class="string">&#x27;/blog&#x27;</span>: &#123; <span class="attr">prerender</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 博客详情页面按需生成</span></span><br><span class="line">    <span class="string">&#x27;/blog/**&#x27;</span>: &#123; <span class="attr">isr</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// API 路由</span></span><br><span class="line">    <span class="string">&#x27;/api/**&#x27;</span>: &#123; <span class="attr">cors</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 管理后台 SPA 模式</span></span><br><span class="line">    <span class="string">&#x27;/admin/**&#x27;</span>: &#123; <span class="attr">ssr</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 静态资源</span></span><br><span class="line">    <span class="string">&#x27;/images/**&#x27;</span>: &#123; <span class="attr">headers</span>: &#123; <span class="string">&#x27;cache-control&#x27;</span>: <span class="string">&#x27;s-maxage=31536000&#x27;</span> &#125; &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><strong>动态路由生成</strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// plugins/generate-routes.ts</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineNuxtPlugin</span>(<span class="title function_">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="comment">// 仅在生成时执行</span></span><br><span class="line">  <span class="keyword">if</span> (process.<span class="property">env</span>.<span class="property">NODE_ENV</span> !== <span class="string">&#x27;production&#x27;</span> || !process.<span class="property">env</span>.<span class="property">NUXT_GENERATE</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">const</span> &#123; getAllArticles, getTagCloud &#125; = <span class="title function_">useContentQuery</span>()</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">// 获取所有文章</span></span><br><span class="line">    <span class="keyword">const</span> articles = <span class="keyword">await</span> <span class="title function_">getAllArticles</span>(&#123; <span class="attr">limit</span>: <span class="number">1000</span> &#125;)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 生成文章详情页路由</span></span><br><span class="line">    <span class="keyword">const</span> articleRoutes = articles.<span class="title function_">map</span>(<span class="function"><span class="params">article</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> slug = article.<span class="property">_path</span>.<span class="title function_">split</span>(<span class="string">&#x27;/&#x27;</span>).<span class="title function_">pop</span>()</span><br><span class="line">      <span class="keyword">return</span> <span class="string">`/blog/<span class="subst">$&#123;slug&#125;</span>`</span></span><br><span class="line">    &#125;)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 获取所有标签</span></span><br><span class="line">    <span class="keyword">const</span> tags = <span class="keyword">await</span> <span class="title function_">getTagCloud</span>()</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 生成标签页路由</span></span><br><span class="line">    <span class="keyword">const</span> tagRoutes = tags.<span class="title function_">map</span>(<span class="function">(<span class="params">&#123; tag &#125;</span>) =&gt;</span> <span class="string">`/blog/tag/<span class="subst">$&#123;tag&#125;</span>`</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 生成分页路由</span></span><br><span class="line">    <span class="keyword">const</span> pageSize = <span class="number">10</span></span><br><span class="line">    <span class="keyword">const</span> totalPages = <span class="title class_">Math</span>.<span class="title function_">ceil</span>(articles.<span class="property">length</span> / pageSize)</span><br><span class="line">    <span class="keyword">const</span> paginationRoutes = <span class="title class_">Array</span>.<span class="title function_">from</span>(&#123; <span class="attr">length</span>: totalPages &#125;, <span class="function">(<span class="params">_, i</span>) =&gt;</span> </span><br><span class="line">      i === <span class="number">0</span> ? <span class="string">&#x27;/blog&#x27;</span> : <span class="string">`/blog/page/<span class="subst">$&#123;i + <span class="number">1</span>&#125;</span>`</span></span><br><span class="line">    )</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 注册所有路由</span></span><br><span class="line">    <span class="keyword">const</span> allRoutes = [</span><br><span class="line">      ...articleRoutes,</span><br><span class="line">      ...tagRoutes,</span><br><span class="line">      ...paginationRoutes</span><br><span class="line">    ]</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 这里可以将路由信息传递给生成器</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Generated <span class="subst">$&#123;allRoutes.length&#125;</span> routes for static generation`</span>)</span><br><span class="line">    </span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Failed to generate routes:&#x27;</span>, error)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="3-SEO-优化"><a href="#3-SEO-优化" class="headerlink" title="3. SEO 优化"></a>3. SEO 优化</h3><p><strong>SEO 组合式函数</strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// composables/useSEO.ts</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * SEO 配置接口</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">SEOConfig</span> &#123;</span><br><span class="line">  <span class="attr">title</span>?: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">description</span>?: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">keywords</span>?: <span class="built_in">string</span>[]</span><br><span class="line">  <span class="attr">author</span>?: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">ogTitle</span>?: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">ogDescription</span>?: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">ogImage</span>?: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">ogUrl</span>?: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">twitterCard</span>?: <span class="string">&#x27;summary&#x27;</span> | <span class="string">&#x27;summary_large_image&#x27;</span></span><br><span class="line">  <span class="attr">twitterSite</span>?: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">twitterCreator</span>?: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">canonical</span>?: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">robots</span>?: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">structuredData</span>?: <span class="built_in">any</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * SEO Hook</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">useSEO</span>(<span class="params"><span class="attr">config</span>: <span class="title class_">SEOConfig</span> = &#123;&#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> route = <span class="title function_">useRoute</span>()</span><br><span class="line">  <span class="keyword">const</span> runtimeConfig = <span class="title function_">useRuntimeConfig</span>()</span><br><span class="line">  <span class="keyword">const</span> siteUrl = runtimeConfig.<span class="property">public</span>.<span class="property">siteUrl</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 默认配置</span></span><br><span class="line">  <span class="keyword">const</span> defaultConfig = &#123;</span><br><span class="line">    <span class="attr">title</span>: <span class="string">&#x27;Vue 3 SSR/SSG 实战项目&#x27;</span>,</span><br><span class="line">    <span class="attr">description</span>: <span class="string">&#x27;Vue 3 服务端渲染与静态站点生成实战项目&#x27;</span>,</span><br><span class="line">    <span class="attr">author</span>: <span class="string">&#x27;Vue 3 Team&#x27;</span>,</span><br><span class="line">    <span class="attr">ogImage</span>: <span class="string">`<span class="subst">$&#123;siteUrl&#125;</span>/images/og-default.jpg`</span>,</span><br><span class="line">    <span class="attr">twitterCard</span>: <span class="string">&#x27;summary_large_image&#x27;</span> <span class="keyword">as</span> <span class="keyword">const</span>,</span><br><span class="line">    <span class="attr">robots</span>: <span class="string">&#x27;index,follow&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 合并配置</span></span><br><span class="line">  <span class="keyword">const</span> seoConfig = &#123; ...defaultConfig, ...config &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 当前页面 URL</span></span><br><span class="line">  <span class="keyword">const</span> currentUrl = <span class="string">`<span class="subst">$&#123;siteUrl&#125;</span><span class="subst">$&#123;route.path&#125;</span>`</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 设置页面头部信息</span></span><br><span class="line">  <span class="title function_">useHead</span>(&#123;</span><br><span class="line">    <span class="attr">title</span>: seoConfig.<span class="property">title</span>,</span><br><span class="line">    <span class="attr">meta</span>: [</span><br><span class="line">      <span class="comment">// 基础 meta</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;description&#x27;</span>,</span><br><span class="line">        <span class="attr">content</span>: seoConfig.<span class="property">description</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;keywords&#x27;</span>,</span><br><span class="line">        <span class="attr">content</span>: seoConfig.<span class="property">keywords</span>?.<span class="title function_">join</span>(<span class="string">&#x27;, &#x27;</span>)</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;author&#x27;</span>,</span><br><span class="line">        <span class="attr">content</span>: seoConfig.<span class="property">author</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;robots&#x27;</span>,</span><br><span class="line">        <span class="attr">content</span>: seoConfig.<span class="property">robots</span></span><br><span class="line">      &#125;,</span><br><span class="line">      </span><br><span class="line">      <span class="comment">// Open Graph</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">property</span>: <span class="string">&#x27;og:title&#x27;</span>,</span><br><span class="line">        <span class="attr">content</span>: seoConfig.<span class="property">ogTitle</span> || seoConfig.<span class="property">title</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">property</span>: <span class="string">&#x27;og:description&#x27;</span>,</span><br><span class="line">        <span class="attr">content</span>: seoConfig.<span class="property">ogDescription</span> || seoConfig.<span class="property">description</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">property</span>: <span class="string">&#x27;og:image&#x27;</span>,</span><br><span class="line">        <span class="attr">content</span>: seoConfig.<span class="property">ogImage</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">property</span>: <span class="string">&#x27;og:url&#x27;</span>,</span><br><span class="line">        <span class="attr">content</span>: seoConfig.<span class="property">ogUrl</span> || currentUrl</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">property</span>: <span class="string">&#x27;og:type&#x27;</span>,</span><br><span class="line">        <span class="attr">content</span>: <span class="string">&#x27;website&#x27;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">property</span>: <span class="string">&#x27;og:site_name&#x27;</span>,</span><br><span class="line">        <span class="attr">content</span>: <span class="string">&#x27;Vue 3 SSR/SSG 实战&#x27;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      </span><br><span class="line">      <span class="comment">// Twitter Card</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;twitter:card&#x27;</span>,</span><br><span class="line">        <span class="attr">content</span>: seoConfig.<span class="property">twitterCard</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;twitter:site&#x27;</span>,</span><br><span class="line">        <span class="attr">content</span>: seoConfig.<span class="property">twitterSite</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;twitter:creator&#x27;</span>,</span><br><span class="line">        <span class="attr">content</span>: seoConfig.<span class="property">twitterCreator</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;twitter:title&#x27;</span>,</span><br><span class="line">        <span class="attr">content</span>: seoConfig.<span class="property">ogTitle</span> || seoConfig.<span class="property">title</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;twitter:description&#x27;</span>,</span><br><span class="line">        <span class="attr">content</span>: seoConfig.<span class="property">ogDescription</span> || seoConfig.<span class="property">description</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;twitter:image&#x27;</span>,</span><br><span class="line">        <span class="attr">content</span>: seoConfig.<span class="property">ogImage</span></span><br><span class="line">      &#125;</span><br><span class="line">    ].<span class="title function_">filter</span>(<span class="function"><span class="params">meta</span> =&gt;</span> meta.<span class="property">content</span>), <span class="comment">// 过滤空值</span></span><br><span class="line">    </span><br><span class="line">    <span class="attr">link</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">rel</span>: <span class="string">&#x27;canonical&#x27;</span>,</span><br><span class="line">        <span class="attr">href</span>: seoConfig.<span class="property">canonical</span> || currentUrl</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;)</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 结构化数据</span></span><br><span class="line">  <span class="keyword">if</span> (seoConfig.<span class="property">structuredData</span>) &#123;</span><br><span class="line">    <span class="title function_">useJsonld</span>(seoConfig.<span class="property">structuredData</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生成面包屑结构化数据</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">generateBreadcrumbSchema</span> = (<span class="params"><span class="attr">breadcrumbs</span>: <span class="title class_">Array</span>&lt;&#123; name: <span class="built_in">string</span>; url: <span class="built_in">string</span> &#125;&gt;</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="string">&#x27;@context&#x27;</span>: <span class="string">&#x27;https://schema.org&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;@type&#x27;</span>: <span class="string">&#x27;BreadcrumbList&#x27;</span>,</span><br><span class="line">      <span class="attr">itemListElement</span>: breadcrumbs.<span class="title function_">map</span>(<span class="function">(<span class="params">item, index</span>) =&gt;</span> (&#123;</span><br><span class="line">        <span class="string">&#x27;@type&#x27;</span>: <span class="string">&#x27;ListItem&#x27;</span>,</span><br><span class="line">        <span class="attr">position</span>: index + <span class="number">1</span>,</span><br><span class="line">        <span class="attr">name</span>: item.<span class="property">name</span>,</span><br><span class="line">        <span class="attr">item</span>: <span class="string">`<span class="subst">$&#123;siteUrl&#125;</span><span class="subst">$&#123;item.url&#125;</span>`</span></span><br><span class="line">      &#125;))</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生成文章结构化数据</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">generateArticleSchema</span> = (<span class="params"><span class="attr">article</span>: &#123;</span></span><br><span class="line"><span class="params">    title: <span class="built_in">string</span></span></span><br><span class="line"><span class="params">    description: <span class="built_in">string</span></span></span><br><span class="line"><span class="params">    author: <span class="built_in">string</span></span></span><br><span class="line"><span class="params">    publishedAt: <span class="built_in">string</span></span></span><br><span class="line"><span class="params">    modifiedAt?: <span class="built_in">string</span></span></span><br><span class="line"><span class="params">    image?: <span class="built_in">string</span></span></span><br><span class="line"><span class="params">  &#125;</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="string">&#x27;@context&#x27;</span>: <span class="string">&#x27;https://schema.org&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;@type&#x27;</span>: <span class="string">&#x27;Article&#x27;</span>,</span><br><span class="line">      <span class="attr">headline</span>: article.<span class="property">title</span>,</span><br><span class="line">      <span class="attr">description</span>: article.<span class="property">description</span>,</span><br><span class="line">      <span class="attr">author</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;@type&#x27;</span>: <span class="string">&#x27;Person&#x27;</span>,</span><br><span class="line">        <span class="attr">name</span>: article.<span class="property">author</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">datePublished</span>: article.<span class="property">publishedAt</span>,</span><br><span class="line">      <span class="attr">dateModified</span>: article.<span class="property">modifiedAt</span> || article.<span class="property">publishedAt</span>,</span><br><span class="line">      <span class="attr">image</span>: article.<span class="property">image</span> ? <span class="string">`<span class="subst">$&#123;siteUrl&#125;</span><span class="subst">$&#123;article.image&#125;</span>`</span> : seoConfig.<span class="property">ogImage</span>,</span><br><span class="line">      <span class="attr">url</span>: currentUrl,</span><br><span class="line">      <span class="attr">publisher</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;@type&#x27;</span>: <span class="string">&#x27;Organization&#x27;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;Vue 3 SSR/SSG 实战&#x27;</span>,</span><br><span class="line">        <span class="attr">logo</span>: &#123;</span><br><span class="line">          <span class="string">&#x27;@type&#x27;</span>: <span class="string">&#x27;ImageObject&#x27;</span>,</span><br><span class="line">          <span class="attr">url</span>: <span class="string">`<span class="subst">$&#123;siteUrl&#125;</span>/images/logo.png`</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生成网站结构化数据</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">generateWebsiteSchema</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="string">&#x27;@context&#x27;</span>: <span class="string">&#x27;https://schema.org&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;@type&#x27;</span>: <span class="string">&#x27;WebSite&#x27;</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;Vue 3 SSR/SSG 实战&#x27;</span>,</span><br><span class="line">      <span class="attr">url</span>: siteUrl,</span><br><span class="line">      <span class="attr">description</span>: <span class="string">&#x27;Vue 3 服务端渲染与静态站点生成实战项目&#x27;</span>,</span><br><span class="line">      <span class="attr">potentialAction</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;@type&#x27;</span>: <span class="string">&#x27;SearchAction&#x27;</span>,</span><br><span class="line">        <span class="attr">target</span>: <span class="string">`<span class="subst">$&#123;siteUrl&#125;</span>/search?q=&#123;search_term_string&#125;`</span>,</span><br><span class="line">        <span class="string">&#x27;query-input&#x27;</span>: <span class="string">&#x27;required name=search_term_string&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    generateBreadcrumbSchema,</span><br><span class="line">    generateArticleSchema,</span><br><span class="line">    generateWebsiteSchema</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="性能优化与部署"><a href="#性能优化与部署" class="headerlink" title="性能优化与部署"></a>性能优化与部署</h2><h3 id="1-缓存策略"><a href="#1-缓存策略" class="headerlink" title="1. 缓存策略"></a>1. 缓存策略</h3><p><strong>多层缓存配置</strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// server/api/cache.ts</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 缓存配置</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> cacheConfig = &#123;</span><br><span class="line">  <span class="comment">// 静态资源缓存</span></span><br><span class="line">  <span class="attr">static</span>: &#123;</span><br><span class="line">    <span class="attr">maxAge</span>: <span class="number">31536000</span>, <span class="comment">// 1年</span></span><br><span class="line">    <span class="attr">immutable</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 页面缓存</span></span><br><span class="line">  <span class="attr">page</span>: &#123;</span><br><span class="line">    <span class="attr">maxAge</span>: <span class="number">3600</span>, <span class="comment">// 1小时</span></span><br><span class="line">    <span class="attr">staleWhileRevalidate</span>: <span class="number">86400</span> <span class="comment">// 24小时</span></span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// API 缓存</span></span><br><span class="line">  <span class="attr">api</span>: &#123;</span><br><span class="line">    <span class="attr">maxAge</span>: <span class="number">300</span>, <span class="comment">// 5分钟</span></span><br><span class="line">    <span class="attr">staleWhileRevalidate</span>: <span class="number">3600</span> <span class="comment">// 1小时</span></span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 内容缓存</span></span><br><span class="line">  <span class="attr">content</span>: &#123;</span><br><span class="line">    <span class="attr">maxAge</span>: <span class="number">1800</span>, <span class="comment">// 30分钟</span></span><br><span class="line">    <span class="attr">staleWhileRevalidate</span>: <span class="number">7200</span> <span class="comment">// 2小时</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 缓存中间件</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineEventHandler</span>(<span class="title function_">async</span> (event) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> url = <span class="title function_">getRouterParam</span>(event, <span class="string">&#x27;url&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> method = <span class="title function_">getMethod</span>(event)</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 只缓存 GET 请求</span></span><br><span class="line">  <span class="keyword">if</span> (method !== <span class="string">&#x27;GET&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 确定缓存策略</span></span><br><span class="line">  <span class="keyword">let</span> cacheOptions = cacheConfig.<span class="property">page</span></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">if</span> (url?.<span class="title function_">startsWith</span>(<span class="string">&#x27;/api/&#x27;</span>)) &#123;</span><br><span class="line">    cacheOptions = cacheConfig.<span class="property">api</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (url?.<span class="title function_">startsWith</span>(<span class="string">&#x27;/content/&#x27;</span>)) &#123;</span><br><span class="line">    cacheOptions = cacheConfig.<span class="property">content</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (url?.<span class="title function_">match</span>(<span class="regexp">/\.(js|css|png|jpg|jpeg|gif|svg|woff|woff2)$/</span>)) &#123;</span><br><span class="line">    cacheOptions = cacheConfig.<span class="property">static</span></span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 设置缓存头</span></span><br><span class="line">  <span class="title function_">setHeader</span>(event, <span class="string">&#x27;Cache-Control&#x27;</span>, </span><br><span class="line">    <span class="string">`public, max-age=<span class="subst">$&#123;cacheOptions.maxAge&#125;</span>, stale-while-revalidate=<span class="subst">$&#123;cacheOptions.staleWhileRevalidate&#125;</span>`</span></span><br><span class="line">  )</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 设置 ETag</span></span><br><span class="line">  <span class="keyword">const</span> etag = <span class="keyword">await</span> <span class="title function_">generateETag</span>(url)</span><br><span class="line">  <span class="title function_">setHeader</span>(event, <span class="string">&#x27;ETag&#x27;</span>, etag)</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 检查 If-None-Match</span></span><br><span class="line">  <span class="keyword">const</span> ifNoneMatch = <span class="title function_">getHeader</span>(event, <span class="string">&#x27;if-none-match&#x27;</span>)</span><br><span class="line">  <span class="keyword">if</span> (ifNoneMatch === etag) &#123;</span><br><span class="line">    <span class="title function_">setResponseStatus</span>(event, <span class="number">304</span>)</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 生成 ETag</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">generateETag</span>(<span class="params"><span class="attr">url</span>: <span class="built_in">string</span></span>): <span class="title class_">Promise</span>&lt;<span class="built_in">string</span>&gt; &#123;</span><br><span class="line">  <span class="comment">// 这里可以基于内容或修改时间生成 ETag</span></span><br><span class="line">  <span class="keyword">const</span> content = url + <span class="title class_">Date</span>.<span class="title function_">now</span>().<span class="title function_">toString</span>()</span><br><span class="line">  <span class="keyword">const</span> encoder = <span class="keyword">new</span> <span class="title class_">TextEncoder</span>()</span><br><span class="line">  <span class="keyword">const</span> data = encoder.<span class="title function_">encode</span>(content)</span><br><span class="line">  <span class="keyword">const</span> hashBuffer = <span class="keyword">await</span> crypto.<span class="property">subtle</span>.<span class="title function_">digest</span>(<span class="string">&#x27;SHA-256&#x27;</span>, data)</span><br><span class="line">  <span class="keyword">const</span> hashArray = <span class="title class_">Array</span>.<span class="title function_">from</span>(<span class="keyword">new</span> <span class="title class_">Uint8Array</span>(hashBuffer))</span><br><span class="line">  <span class="keyword">return</span> hashArray.<span class="title function_">map</span>(<span class="function"><span class="params">b</span> =&gt;</span> b.<span class="title function_">toString</span>(<span class="number">16</span>).<span class="title function_">padStart</span>(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>)).<span class="title function_">join</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-部署配置"><a href="#2-部署配置" class="headerlink" title="2. 部署配置"></a>2. 部署配置</h3><p><strong>Docker 部署</strong></p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Dockerfile</span></span><br><span class="line"><span class="keyword">FROM</span> node:<span class="number">18</span>-alpine AS builder</span><br><span class="line"></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /app</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 复制依赖文件</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> package*.json ./</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> npm ci --only=production</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 复制源代码</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> . .</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 构建应用</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> npm run build</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 生产环境镜像</span></span><br><span class="line"><span class="keyword">FROM</span> node:<span class="number">18</span>-alpine AS runner</span><br><span class="line"></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /app</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建非 root 用户</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> addgroup --system --gid 1001 nodejs</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> adduser --system --uid 1001 nuxtjs</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 复制构建产物</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> --from=builder --<span class="built_in">chown</span>=nuxtjs:nodejs /app/.output ./</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 切换用户</span></span><br><span class="line"><span class="keyword">USER</span> nuxtjs</span><br><span class="line"></span><br><span class="line"><span class="comment"># 暴露端口</span></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">3000</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动应用</span></span><br><span class="line"><span class="keyword">CMD</span><span class="language-bash"> [<span class="string">&quot;node&quot;</span>, <span class="string">&quot;server/index.mjs&quot;</span>]</span></span><br></pre></td></tr></table></figure>

<p><strong>CI&#x2F;CD 配置</strong></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># .github/workflows/deploy.yml</span></span><br><span class="line"><span class="attr">name:</span> <span class="string">Deploy</span> <span class="string">to</span> <span class="string">Production</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span> [<span class="string">main</span>]</span><br><span class="line">  <span class="attr">pull_request:</span></span><br><span class="line">    <span class="attr">branches:</span> [<span class="string">main</span>]</span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">test:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v3</span></span><br><span class="line">      </span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Setup</span> <span class="string">Node.js</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/setup-node@v3</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">node-version:</span> <span class="string">&#x27;18&#x27;</span></span><br><span class="line">          <span class="attr">cache:</span> <span class="string">&#x27;npm&#x27;</span></span><br><span class="line">      </span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Install</span> <span class="string">dependencies</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">npm</span> <span class="string">ci</span></span><br><span class="line">      </span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Run</span> <span class="string">tests</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">npm</span> <span class="string">run</span> <span class="string">test</span></span><br><span class="line">      </span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Run</span> <span class="string">linting</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">npm</span> <span class="string">run</span> <span class="string">lint</span></span><br><span class="line">      </span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Type</span> <span class="string">check</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">npm</span> <span class="string">run</span> <span class="string">type-check</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">build:</span></span><br><span class="line">    <span class="attr">needs:</span> <span class="string">test</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">if:</span> <span class="string">github.ref</span> <span class="string">==</span> <span class="string">&#x27;refs/heads/main&#x27;</span></span><br><span class="line">    </span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v3</span></span><br><span class="line">      </span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Setup</span> <span class="string">Node.js</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/setup-node@v3</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">node-version:</span> <span class="string">&#x27;18&#x27;</span></span><br><span class="line">          <span class="attr">cache:</span> <span class="string">&#x27;npm&#x27;</span></span><br><span class="line">      </span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Install</span> <span class="string">dependencies</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">npm</span> <span class="string">ci</span></span><br><span class="line">      </span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Build</span> <span class="string">application</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">npm</span> <span class="string">run</span> <span class="string">build</span></span><br><span class="line">        <span class="attr">env:</span></span><br><span class="line">          <span class="attr">NUXT_PUBLIC_API_BASE:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.API_BASE</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">NUXT_PUBLIC_SITE_URL:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.SITE_URL</span> <span class="string">&#125;&#125;</span></span><br><span class="line">      </span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Build</span> <span class="string">Docker</span> <span class="string">image</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          docker build -t vue3-ssr-app:$&#123;&#123; github.sha &#125;&#125; .</span></span><br><span class="line"><span class="string">          docker tag vue3-ssr-app:$&#123;&#123; github.sha &#125;&#125; vue3-ssr-app:latest</span></span><br><span class="line"><span class="string"></span>      </span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Deploy</span> <span class="string">to</span> <span class="string">production</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          # 这里添加部署脚本</span></span><br><span class="line"><span class="string">          echo &quot;Deploying to production...&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>Vue 3 的 SSR&#x2F;SSG 生态为现代 Web 应用提供了完整的解决方案：</p>
<ol>
<li><strong>渲染模式选择</strong>：根据项目需求选择合适的渲染策略</li>
<li><strong>Nuxt 3 框架</strong>：提供了开箱即用的 SSR&#x2F;SSG 解决方案</li>
<li><strong>性能优化</strong>：通过缓存、预渲染等手段提升应用性能</li>
<li><strong>SEO 优化</strong>：完善的 SEO 支持和结构化数据</li>
<li><strong>部署策略</strong>：灵活的部署选项和 CI&#x2F;CD 集成</li>
</ol>
<p>选择合适的技术方案需要综合考虑 SEO 需求、性能要求、开发复杂度等因素，在实践中不断优化和完善。</p>

                    
                </div>

                

                <div class="post-bottom-tags-and-share border-box">
                    <div>
                        
                            <ul class="post-tags-box border-box">
                                
                                    <li class="tag-item border-box">
                                        <i class="icon fas fa-hashtag"></i>&nbsp;<a href="/tags/Vue3/">Vue3</a>
                                    </li>
                                
                                    <li class="tag-item border-box">
                                        <i class="icon fas fa-hashtag"></i>&nbsp;<a href="/tags/SSR/">SSR</a>
                                    </li>
                                
                                    <li class="tag-item border-box">
                                        <i class="icon fas fa-hashtag"></i>&nbsp;<a href="/tags/SSG/">SSG</a>
                                    </li>
                                
                                    <li class="tag-item border-box">
                                        <i class="icon fas fa-hashtag"></i>&nbsp;<a href="/tags/Nuxt3/">Nuxt3</a>
                                    </li>
                                
                                    <li class="tag-item border-box">
                                        <i class="icon fas fa-hashtag"></i>&nbsp;<a href="/tags/%E5%85%A8%E6%A0%88%E5%BC%80%E5%8F%91/">全栈开发</a>
                                    </li>
                                
                            </ul>
                        
                    </div>
                    <div>
                        
                    </div>
                </div>

                

                
                    <div class="post-nav border-box">
                        
                            <div class="prev-post">
                                <a class="prev"
                                   rel="prev"
                                   href="/2023/vue/vue3-build-optimization-deployment/"
                                   title="Vue 3 构建优化与部署策略：从开发到生产的完整指南"
                                >
                                    <span class="left arrow-icon flex-center">
                                        <i class="fas fa-chevron-left"></i>
                                    </span>
                                    <span class="title flex-center">
                                        <span class="post-nav-title-item text-ellipsis">Vue 3 构建优化与部署策略：从开发到生产的完整指南</span>
                                        <span class="post-nav-item">上一篇</span>
                                    </span>
                                </a>
                            </div>
                        
                        
                            <div class="next-post">
                                <a class="next"
                                   rel="next"
                                   href="/2023/vue/vue3-internationalization-i18n-guide/"
                                   title="Vue 3 国际化实战：Vue I18n 多语言支持完整解决方案"
                                >
                                    <span class="title flex-center">
                                        <span class="post-nav-title-item text-ellipsis">Vue 3 国际化实战：Vue I18n 多语言支持完整解决方案</span>
                                        <span class="post-nav-item">下一篇</span>
                                    </span>
                                    <span class="right arrow-icon flex-center">
                                        <i class="fas fa-chevron-right"></i>
                                    </span>
                                </a>
                            </div>
                        
                    </div>
                

                
                    






                
            </div>
        </div>

        
            <div class="pc-post-toc right-toc">
                <div class="post-toc-wrap border-box">
    <div class="post-toc border-box">
        <ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#SSR-vs-SSG-vs-SPA-%E5%AF%B9%E6%AF%94%E5%88%86%E6%9E%90"><span class="nav-text">SSR vs SSG vs SPA 对比分析</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E6%B8%B2%E6%9F%93%E6%A8%A1%E5%BC%8F%E5%AF%B9%E6%AF%94"><span class="nav-text">1. 渲染模式对比</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87%E5%AF%B9%E6%AF%94"><span class="nav-text">2. 性能指标对比</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Nuxt-3-%E6%A0%B8%E5%BF%83%E7%89%B9%E6%80%A7%E4%B8%8E%E9%85%8D%E7%BD%AE"><span class="nav-text">Nuxt 3 核心特性与配置</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E9%A1%B9%E7%9B%AE%E5%88%9D%E5%A7%8B%E5%8C%96%E4%B8%8E%E9%85%8D%E7%BD%AE"><span class="nav-text">1. 项目初始化与配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E9%A1%B5%E9%9D%A2%E5%92%8C%E5%B8%83%E5%B1%80%E7%B3%BB%E7%BB%9F"><span class="nav-text">2. 页面和布局系统</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96%E7%AD%96%E7%95%A5"><span class="nav-text">3. 数据获取策略</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E9%9B%86%E6%88%90"><span class="nav-text">4. 状态管理集成</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%9D%99%E6%80%81%E7%AB%99%E7%82%B9%E7%94%9F%E6%88%90-SSG-%E5%AE%9E%E6%88%98"><span class="nav-text">静态站点生成(SSG)实战</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E5%86%85%E5%AE%B9%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F"><span class="nav-text">1. 内容管理系统</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86"><span class="nav-text">实现原理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E9%9D%99%E6%80%81%E7%94%9F%E6%88%90%E9%85%8D%E7%BD%AE"><span class="nav-text">2. 静态生成配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-SEO-%E4%BC%98%E5%8C%96"><span class="nav-text">3. SEO 优化</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%8E%E9%83%A8%E7%BD%B2"><span class="nav-text">性能优化与部署</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E7%BC%93%E5%AD%98%E7%AD%96%E7%95%A5"><span class="nav-text">1. 缓存策略</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E9%83%A8%E7%BD%B2%E9%85%8D%E7%BD%AE"><span class="nav-text">2. 部署配置</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%BB%E7%BB%93"><span class="nav-text">总结</span></a></li></ol>
    </div>
</div>

            </div>
        
    </div>
</div>


                
            </div>
        </div>

        <div class="page-main-content-bottom border-box">
            
<footer class="footer border-box">
    <div class="copyright-info info-item">
    &copy;&nbsp;2025
    
            &nbsp;<i class="fas fa-heart icon-animate"></i>&nbsp;&nbsp;<a href="/">Orion K</a>
        
    </div>


    
        
        <div class="deploy-info info-item">
            
            本站由 <span class="tooltip" data-tooltip-content="GitHub Pages"><img src="/images/brands/github.png"></span> 提供部署服务
            
        </div>
    

    

    
</footer>

        </div>
    </div>

    <!-- post tools -->
    
        <div class="post-tools right-toc">
            <div class="post-tools-container border-box">
    <ul class="post-tools-list border-box">
        <!-- PC encrypt again -->
        

        <!-- PC TOC show toggle -->
        
            <li class="tools-item flex-center toggle-show-toc">
                <i class="fas fa-list"></i>
            </li>
        

        <!-- PC go comment -->
        

        <!-- PC full screen -->
        <li class="tools-item flex-center full-screen">
            <i class="fa-solid fa-expand"></i>
        </li>
    </ul>
</div>

        </div>
    

    <!-- side tools -->
    <div class="side-tools">
        <div class="side-tools-container border-box ">
    <ul class="side-tools-list side-tools-show-handle border-box">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <!-- toggle mode -->
        
            <li class="tools-item tool-toggle-theme-mode flex-center">
                <i class="fas fa-moon"></i>
            </li>
        

        <!-- rss -->
        

        <!-- to bottom -->
        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list border-box">
        
            <li class="tools-item toggle-show-toc-tablet flex-center">
                <i class="fas fa-list"></i>
            </li>
        

        

        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>

        <li class="tools-item tool-scroll-to-top flex-center show-arrow">
            <i class="arrow fas fa-arrow-up"></i>
            <span class="percent"></span>
        </li>
    </ul>
</div>

    </div>

    <!-- image mask -->
    <div class="zoom-in-image-mask">
    <img class="zoom-in-image">
</div>


    <!-- local search -->
    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fas fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="搜索..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="close-popup-btn">
                <i class="fas fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    

    <!-- tablet toc -->
    
        <div class="tablet-post-toc-mask">
            <div class="tablet-post-toc">
                <div class="post-toc-wrap border-box">
    <div class="post-toc border-box">
        <ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#SSR-vs-SSG-vs-SPA-%E5%AF%B9%E6%AF%94%E5%88%86%E6%9E%90"><span class="nav-text">SSR vs SSG vs SPA 对比分析</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E6%B8%B2%E6%9F%93%E6%A8%A1%E5%BC%8F%E5%AF%B9%E6%AF%94"><span class="nav-text">1. 渲染模式对比</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87%E5%AF%B9%E6%AF%94"><span class="nav-text">2. 性能指标对比</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Nuxt-3-%E6%A0%B8%E5%BF%83%E7%89%B9%E6%80%A7%E4%B8%8E%E9%85%8D%E7%BD%AE"><span class="nav-text">Nuxt 3 核心特性与配置</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E9%A1%B9%E7%9B%AE%E5%88%9D%E5%A7%8B%E5%8C%96%E4%B8%8E%E9%85%8D%E7%BD%AE"><span class="nav-text">1. 项目初始化与配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E9%A1%B5%E9%9D%A2%E5%92%8C%E5%B8%83%E5%B1%80%E7%B3%BB%E7%BB%9F"><span class="nav-text">2. 页面和布局系统</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96%E7%AD%96%E7%95%A5"><span class="nav-text">3. 数据获取策略</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E9%9B%86%E6%88%90"><span class="nav-text">4. 状态管理集成</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%9D%99%E6%80%81%E7%AB%99%E7%82%B9%E7%94%9F%E6%88%90-SSG-%E5%AE%9E%E6%88%98"><span class="nav-text">静态站点生成(SSG)实战</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E5%86%85%E5%AE%B9%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F"><span class="nav-text">1. 内容管理系统</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86"><span class="nav-text">实现原理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E9%9D%99%E6%80%81%E7%94%9F%E6%88%90%E9%85%8D%E7%BD%AE"><span class="nav-text">2. 静态生成配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-SEO-%E4%BC%98%E5%8C%96"><span class="nav-text">3. SEO 优化</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%8E%E9%83%A8%E7%BD%B2"><span class="nav-text">性能优化与部署</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E7%BC%93%E5%AD%98%E7%AD%96%E7%95%A5"><span class="nav-text">1. 缓存策略</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E9%83%A8%E7%BD%B2%E9%85%8D%E7%BD%AE"><span class="nav-text">2. 部署配置</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%BB%E7%BB%93"><span class="nav-text">总结</span></a></li></ol>
    </div>
</div>

            </div>
        </div>
    
</main>





<!-- common js -->

<script src="/js/utils.js"></script>

<script src="/js/header-shrink.js"></script>

<script src="/js/back2top.js"></script>

<script src="/js/toggle-theme.js"></script>

<script src="/js/code-block.js"></script>

<script src="/js/main.js"></script>

<script src="/js/libs/anime.min.js"></script>


<!-- local search -->

    
<script src="/js/local-search.js"></script>



<!-- lazyload -->


<div class="">
    <!-- home page -->
    

    <!-- post page -->
    
        <!-- post-helper -->
        
<script src="/js/post/post-helper.js"></script>


        <!-- toc -->
        
            
<script src="/js/post/toc.js"></script>

        

        <!-- copyright-info -->
        

        <!-- share -->
        
    

    <!-- categories page -->
    

    <!-- links page -->
    

    <!-- photos page -->
    

    <!-- tools page -->
    
</div>

<!-- mermaid -->


<!-- pjax -->



</body>
</html>
