<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Hexo Theme Keep">
    <meta name="description" content="Hexo Theme Keep">
    <meta name="author" content="Orion K">
    
    <title>
        
            Vue 3 国际化实战：Vue I18n 多语言支持完整解决方案 |
        
        Orion K Blog
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    
        <link rel="shortcut icon" href="/images/logo.svg">
    
    
<link rel="stylesheet" href="/font/css/fontawesome.min.css">

    
<link rel="stylesheet" href="/font/css/regular.min.css">

    
<link rel="stylesheet" href="/font/css/solid.min.css">

    
<link rel="stylesheet" href="/font/css/brands.min.css">

    
    <script class="keep-theme-configurations">
    const KEEP = window.KEEP || {}
    KEEP.hexo_config = {"hostname":"example.com","root":"/","language":"zh-CN","path":"search.json"}
    KEEP.theme_config = {"base_info":{"primary_color":"#0066cc","title":"Orion K Blog","author":"Orion K","avatar":"/images/avatar.svg","logo":"/images/logo.svg","favicon":"/images/logo.svg"},"menu":{"home":"/                        || fa-solid fa-home","archives":"/archives            || fa-solid fa-box-archive","categories":"/categories        || fa-solid fa-layer-group"},"first_screen":{"enable":false,"background_img":"/images/bg.svg","background_img_dark":"/images/bg.svg","description":"Keep writing and Keep loving.","hitokoto":false},"social_contact":{"enable":false,"links":{"github":null,"weixin":null,"qq":null,"weibo":null,"zhihu":null,"twitter":null,"x":null,"facebook":null,"email":null}},"scroll":{"progress_bar":false,"percent":false,"hide_header":true},"home":{"announcement":"欢迎来到 Orion K 的博客，这是一个分享互联网技术的博客。联系：wxmm686800@gmail.com","category":true,"tag":true,"post_datetime":"created"},"post":{"author_badge":{"enable":true,"level_badge":true,"custom_badge":["One","Two","Three"]},"word_count":{"wordcount":false,"min2read":false},"datetime_format":"YYYY-MM-DD HH:mm:ss","copyright_info":false,"share":false,"reward":{"enable":false,"img_link":null,"text":null,"icon":null}},"code_block":{"tools":{"enable":false,"style":"default"},"highlight_theme":"default"},"toc":{"enable":true,"number":false,"expand_all":true,"init_open":true,"layout":"right"},"website_count":{"busuanzi_count":{"enable":false,"site_uv":false,"site_pv":false,"page_pv":false}},"local_search":{"enable":true,"preload":true},"comment":{"enable":false,"use":"valine","valine":{"appid":null,"appkey":null,"server_urls":null,"placeholder":null},"gitalk":{"github_id":null,"github_admins":null,"repository":null,"client_id":null,"client_secret":null,"proxy":null},"twikoo":{"env_id":null,"region":null,"version":"1.6.39"},"waline":{"server_url":null,"reaction":false,"version":"3.3.2"},"giscus":{"repo":null,"repo_id":null,"category":"Announcements","category_id":null,"reactions_enabled":false},"artalk":{"server":null},"disqus":{"shortname":null}},"rss":{"enable":false},"lazyload":{"enable":false},"cdn":{"enable":false,"provider":"cdnjs"},"pjax":{"enable":false},"footer":{"since":2025,"word_count":false,"site_deploy":{"enable":true,"provider":"github","url":null},"record":{"enable":false,"list":[{"code":null,"link":null}]}},"inject":{"enable":false,"css":[null],"js":[null]},"root":"","source_data":{},"version":"4.2.5"}
    KEEP.language_ago = {"second":"%s 秒前","minute":"%s 分钟前","hour":"%s 小时前","day":"%s 天前","week":"%s 周前","month":"%s 个月前","year":"%s 年前"}
    KEEP.language_code_block = {"copy":"复制代码","copied":"已复制","fold":"折叠代码块","folded":"已折叠"}
    KEEP.language_copy_copyright = {"copy":"复制版权信息","copied":"已复制","title":"原文标题","author":"原文作者","link":"原文链接"}
  </script>
<meta name="generator" content="Hexo 7.3.0"></head>


<body>
<div class="progress-bar-container">
    

    
</div>



<main class="page-container border-box">
    <!-- home first screen  -->
    

    <!-- page content -->
    <div class="page-main-content border-box">
        <div class="page-main-content-top">
            
<header class="header-wrapper">

    <div class="border-box header-content">
        <div class="left flex-start border-box">
            
                <a class="logo-image border-box" href="/">
                    <img src="/images/logo.svg">
                </a>
            
            <a class="site-name border-box" href="/">
               Orion K Blog
            </a>
        </div>

        <div class="right border-box">
            <div class="pc border-box">
                <ul class="menu-list border-box">
                    
                        
                        <li class="menu-item flex-start border-box">
                            <a class="menu-text-color border-box" href="/">
                                
                                    <i class="menu-text-color menu-icon fa-solid fa-home"></i>
                                
                                首页
                                
                            </a>
                            
                        </li>
                    
                        
                        <li class="menu-item flex-start border-box">
                            <a class="menu-text-color border-box" href="/archives">
                                
                                    <i class="menu-text-color menu-icon fa-solid fa-box-archive"></i>
                                
                                归档
                                
                            </a>
                            
                        </li>
                    
                        
                        <li class="menu-item flex-start border-box">
                            <a class="menu-text-color border-box" href="/categories">
                                
                                    <i class="menu-text-color menu-icon fa-solid fa-layer-group"></i>
                                
                                分类
                                
                            </a>
                            
                        </li>
                    
                    
                        <li class="menu-item search search-popup-trigger">
                            <i class="menu-text-color fas search fa-search"></i>
                        </li>
                    
                </ul>
            </div>
            <div class="mobile border-box flex-start">
                
                    <div class="icon-item search search-popup-trigger"><i class="fas fa-search"></i></div>
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list border-box">
            
                
                <li class="drawer-menu-item border-box not-sub-menu">
                    <label class="drawer-menu-label border-box">
                        <a class="drawer-menu-text-color left-side flex-start border-box" href="/">
                            
                                <span class="menu-icon-wrap border-box flex-center">
                                    <i class="drawer-menu-text-color menu-icon fa-solid fa-home"></i>
                                </span>
                            
                            首页
                        </a>
                        
                    </label>
                    
                </li>
            
                
                <li class="drawer-menu-item border-box not-sub-menu">
                    <label class="drawer-menu-label border-box">
                        <a class="drawer-menu-text-color left-side flex-start border-box" href="/archives">
                            
                                <span class="menu-icon-wrap border-box flex-center">
                                    <i class="drawer-menu-text-color menu-icon fa-solid fa-box-archive"></i>
                                </span>
                            
                            归档
                        </a>
                        
                    </label>
                    
                </li>
            
                
                <li class="drawer-menu-item border-box not-sub-menu">
                    <label class="drawer-menu-label border-box">
                        <a class="drawer-menu-text-color left-side flex-start border-box" href="/categories">
                            
                                <span class="menu-icon-wrap border-box flex-center">
                                    <i class="drawer-menu-text-color menu-icon fa-solid fa-layer-group"></i>
                                </span>
                            
                            分类
                        </a>
                        
                    </label>
                    
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="page-main-content-middle border-box">

            <div class="main-content border-box">
                

                    
<div class="fade-in-down-animation">
    <div class="post-page-container border-box">
        <div class="post-content-container border-box">
            

            <div class="post-content-bottom border-box">
                
                    <div class="post-title">
                        Vue 3 国际化实战：Vue I18n 多语言支持完整解决方案
                    </div>
                

                
                    <div class="post-header border-box">
                        
                            <div class="avatar-box border-box">
                                <img src="/images/avatar.svg">
                            </div>
                        
                        <div class="info-box">
                            <div class="author border-box">
                                <span class="name">Orion K</span>
                                
                                    <span class="author-badge">Lv6</span>
                                
                            </div>
                            <div class="meta-info border-box">
                                

<div class="post-meta-info-container border-box post">
    <div class="post-meta-info border-box">
        

        
            <span class="meta-info-item post-create-date">
                <i class="icon fa-solid fa-calendar-plus"></i>&nbsp;
                <span class="datetime">2023-08-15 14:30:00</span>
            </span>
        

        
            <span class="meta-info-item post-category border-box"><i class="icon fas fa-folder"></i>&nbsp;
                <ul class="post-category-ul">
                    
                            <li class="category-item"><a href="/categories/vue/">vue</a></li>
                        
                    
                </ul>
            </span>
        

        
            <span class="post-tag meta-info-item border-box">
                <ul class="post-tag-ul">
                    
                            <li class="tag-item"><span class="tag-separator"><i class="icon fas fa-hashtag"></i></span><a href="/tags/Vue3/">Vue3</a></li>
                        
                    
                            <li class="tag-item"><span class="tag-separator"><i class="icon fas fa-hashtag"></i></span><a href="/tags/%E5%9B%BD%E9%99%85%E5%8C%96/">国际化</a></li>
                        
                    
                            <li class="tag-item"><span class="tag-separator"><i class="icon fas fa-hashtag"></i></span><a href="/tags/Vue-I18n/">Vue I18n</a></li>
                        
                    
                            <li class="tag-item"><span class="tag-separator"><i class="icon fas fa-hashtag"></i></span><a href="/tags/%E5%A4%9A%E8%AF%AD%E8%A8%80/">多语言</a></li>
                        
                    
                            <li class="tag-item"><span class="tag-separator"><i class="icon fas fa-hashtag"></i></span><a href="/tags/%E6%9C%AC%E5%9C%B0%E5%8C%96/">本地化</a></li>
                        
                    
                </ul>
            </span>
        

        
        
        
        
    </div>

    
</div>

                            </div>
                        </div>
                    </div>
                

                <div class="post-content keep-markdown-body ">
                    

                    
                         <p>随着全球化的发展，多语言支持已成为现代 Web 应用的必备功能。Vue 3 结合 Vue I18n 提供了强大的国际化解决方案，本文将深入探讨如何在 Vue 3 项目中实现完整的多语言支持，包括文本翻译、日期格式化、数字格式化、复数处理等高级特性。</p>
<span id="more"></span>

<h2 id="Vue-I18n-基础配置"><a href="#Vue-I18n-基础配置" class="headerlink" title="Vue I18n 基础配置"></a>Vue I18n 基础配置</h2><h3 id="1-项目初始化"><a href="#1-项目初始化" class="headerlink" title="1. 项目初始化"></a>1. 项目初始化</h3><p><strong>安装依赖</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装 Vue I18n</span></span><br><span class="line">npm install vue-i18n@9</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装相关工具</span></span><br><span class="line">npm install @intlify/unplugin-vue-i18n</span><br><span class="line">npm install @intlify/vue-i18n-loader</span><br></pre></td></tr></table></figure>

<p><strong>Vite 配置</strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vite.config.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> vue <span class="keyword">from</span> <span class="string">&#x27;@vitejs/plugin-vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueI18</span>nPlugin <span class="keyword">from</span> <span class="string">&#x27;@intlify/unplugin-vue-i18n/vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; resolve, dirname &#125; <span class="keyword">from</span> <span class="string">&#x27;node:path&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; fileURLToPath &#125; <span class="keyword">from</span> <span class="string">&#x27;url&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="title function_">vue</span>(),</span><br><span class="line">    <span class="title class_">VueI18</span>nPlugin(&#123;</span><br><span class="line">      <span class="comment">// 语言文件路径</span></span><br><span class="line">      <span class="attr">include</span>: <span class="title function_">resolve</span>(<span class="title function_">dirname</span>(<span class="title function_">fileURLToPath</span>(<span class="keyword">import</span>.<span class="property">meta</span>.<span class="property">url</span>)), <span class="string">&#x27;./src/locales/**&#x27;</span>),</span><br><span class="line">      <span class="comment">// 启用组合式 API</span></span><br><span class="line">      <span class="attr">compositionOnly</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="comment">// 运行时编译</span></span><br><span class="line">      <span class="attr">runtimeOnly</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="comment">// 全局注入</span></span><br><span class="line">      <span class="attr">globalInjection</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="comment">// 严格模式</span></span><br><span class="line">      <span class="attr">strictMessage</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="comment">// 缺失键处理</span></span><br><span class="line">      <span class="attr">missingWarn</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">fallbackWarn</span>: <span class="literal">false</span></span><br><span class="line">    &#125;)</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">resolve</span>: &#123;</span><br><span class="line">    <span class="attr">alias</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;@&#x27;</span>: <span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;src&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="2-I18n-配置文件"><a href="#2-I18n-配置文件" class="headerlink" title="2. I18n 配置文件"></a>2. I18n 配置文件</h3><p><strong>主配置文件</strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/i18n/index.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; createI18n &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-i18n&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">type</span> &#123; I18nOptions &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-i18n&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 导入语言文件</span></span><br><span class="line"><span class="keyword">import</span> zhCN <span class="keyword">from</span> <span class="string">&#x27;./locales/zh-CN.json&#x27;</span></span><br><span class="line"><span class="keyword">import</span> enUS <span class="keyword">from</span> <span class="string">&#x27;./locales/en-US.json&#x27;</span></span><br><span class="line"><span class="keyword">import</span> jaJP <span class="keyword">from</span> <span class="string">&#x27;./locales/ja-JP.json&#x27;</span></span><br><span class="line"><span class="keyword">import</span> koKR <span class="keyword">from</span> <span class="string">&#x27;./locales/ko-KR.json&#x27;</span></span><br><span class="line"><span class="keyword">import</span> frFR <span class="keyword">from</span> <span class="string">&#x27;./locales/fr-FR.json&#x27;</span></span><br><span class="line"><span class="keyword">import</span> deDE <span class="keyword">from</span> <span class="string">&#x27;./locales/de-DE.json&#x27;</span></span><br><span class="line"><span class="keyword">import</span> esES <span class="keyword">from</span> <span class="string">&#x27;./locales/es-ES.json&#x27;</span></span><br><span class="line"><span class="keyword">import</span> ruRU <span class="keyword">from</span> <span class="string">&#x27;./locales/ru-RU.json&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 支持的语言列表</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="variable constant_">SUPPORT_LOCALES</span> = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">code</span>: <span class="string">&#x27;zh-CN&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;简体中文&#x27;</span>,</span><br><span class="line">    <span class="attr">flag</span>: <span class="string">&#x27;🇨🇳&#x27;</span>,</span><br><span class="line">    <span class="attr">dir</span>: <span class="string">&#x27;ltr&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">code</span>: <span class="string">&#x27;en-US&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;English&#x27;</span>,</span><br><span class="line">    <span class="attr">flag</span>: <span class="string">&#x27;🇺🇸&#x27;</span>,</span><br><span class="line">    <span class="attr">dir</span>: <span class="string">&#x27;ltr&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">code</span>: <span class="string">&#x27;ja-JP&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;日本語&#x27;</span>,</span><br><span class="line">    <span class="attr">flag</span>: <span class="string">&#x27;🇯🇵&#x27;</span>,</span><br><span class="line">    <span class="attr">dir</span>: <span class="string">&#x27;ltr&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">code</span>: <span class="string">&#x27;ko-KR&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;한국어&#x27;</span>,</span><br><span class="line">    <span class="attr">flag</span>: <span class="string">&#x27;🇰🇷&#x27;</span>,</span><br><span class="line">    <span class="attr">dir</span>: <span class="string">&#x27;ltr&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">code</span>: <span class="string">&#x27;fr-FR&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Français&#x27;</span>,</span><br><span class="line">    <span class="attr">flag</span>: <span class="string">&#x27;🇫🇷&#x27;</span>,</span><br><span class="line">    <span class="attr">dir</span>: <span class="string">&#x27;ltr&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">code</span>: <span class="string">&#x27;de-DE&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Deutsch&#x27;</span>,</span><br><span class="line">    <span class="attr">flag</span>: <span class="string">&#x27;🇩🇪&#x27;</span>,</span><br><span class="line">    <span class="attr">dir</span>: <span class="string">&#x27;ltr&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">code</span>: <span class="string">&#x27;es-ES&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Español&#x27;</span>,</span><br><span class="line">    <span class="attr">flag</span>: <span class="string">&#x27;🇪🇸&#x27;</span>,</span><br><span class="line">    <span class="attr">dir</span>: <span class="string">&#x27;ltr&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">code</span>: <span class="string">&#x27;ru-RU&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Русский&#x27;</span>,</span><br><span class="line">    <span class="attr">flag</span>: <span class="string">&#x27;🇷🇺&#x27;</span>,</span><br><span class="line">    <span class="attr">dir</span>: <span class="string">&#x27;ltr&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">] <span class="keyword">as</span> <span class="keyword">const</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 默认语言</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="variable constant_">DEFAULT_LOCALE</span> = <span class="string">&#x27;zh-CN&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 回退语言</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="variable constant_">FALLBACK_LOCALE</span> = <span class="string">&#x27;en-US&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 语言消息</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> messages = &#123;</span><br><span class="line">  <span class="string">&#x27;zh-CN&#x27;</span>: zhCN,</span><br><span class="line">  <span class="string">&#x27;en-US&#x27;</span>: enUS,</span><br><span class="line">  <span class="string">&#x27;ja-JP&#x27;</span>: jaJP,</span><br><span class="line">  <span class="string">&#x27;ko-KR&#x27;</span>: koKR,</span><br><span class="line">  <span class="string">&#x27;fr-FR&#x27;</span>: frFR,</span><br><span class="line">  <span class="string">&#x27;de-DE&#x27;</span>: deDE,</span><br><span class="line">  <span class="string">&#x27;es-ES&#x27;</span>: esES,</span><br><span class="line">  <span class="string">&#x27;ru-RU&#x27;</span>: ruRU</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取浏览器语言</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">getBrowserLocale</span>(<span class="params"></span>): <span class="built_in">string</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> navigatorLocale = navigator.<span class="property">language</span> || (navigator <span class="keyword">as</span> <span class="built_in">any</span>).<span class="property">userLanguage</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 精确匹配</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="variable constant_">SUPPORT_LOCALES</span>.<span class="title function_">some</span>(<span class="function"><span class="params">locale</span> =&gt;</span> locale.<span class="property">code</span> === navigatorLocale)) &#123;</span><br><span class="line">    <span class="keyword">return</span> navigatorLocale</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 语言代码匹配（如 zh 匹配 zh-CN）</span></span><br><span class="line">  <span class="keyword">const</span> languageCode = navigatorLocale.<span class="title function_">split</span>(<span class="string">&#x27;-&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">  <span class="keyword">const</span> matchedLocale = <span class="variable constant_">SUPPORT_LOCALES</span>.<span class="title function_">find</span>(<span class="function"><span class="params">locale</span> =&gt;</span> </span><br><span class="line">    locale.<span class="property">code</span>.<span class="title function_">startsWith</span>(languageCode)</span><br><span class="line">  )</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> matchedLocale?.<span class="property">code</span> || <span class="variable constant_">DEFAULT_LOCALE</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取存储的语言</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">getStoredLocale</span>(<span class="params"></span>): <span class="built_in">string</span> &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> stored = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;app-locale&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> (stored &amp;&amp; <span class="variable constant_">SUPPORT_LOCALES</span>.<span class="title function_">some</span>(<span class="function"><span class="params">locale</span> =&gt;</span> locale.<span class="property">code</span> === stored)) &#123;</span><br><span class="line">      <span class="keyword">return</span> stored</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">&#x27;Failed to get stored locale:&#x27;</span>, error)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">getBrowserLocale</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 存储语言设置</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">setStoredLocale</span>(<span class="params"><span class="attr">locale</span>: <span class="built_in">string</span></span>): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;app-locale&#x27;</span>, locale)</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">&#x27;Failed to store locale:&#x27;</span>, error)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * I18n 配置选项</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">i18nOptions</span>: I18nOptions = &#123;</span><br><span class="line">  <span class="attr">legacy</span>: <span class="literal">false</span>, <span class="comment">// 使用组合式 API</span></span><br><span class="line">  <span class="attr">locale</span>: <span class="title function_">getStoredLocale</span>(),</span><br><span class="line">  <span class="attr">fallbackLocale</span>: <span class="variable constant_">FALLBACK_LOCALE</span>,</span><br><span class="line">  messages,</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 数字格式化</span></span><br><span class="line">  <span class="attr">numberFormats</span>: &#123;</span><br><span class="line">    <span class="string">&#x27;zh-CN&#x27;</span>: &#123;</span><br><span class="line">      <span class="attr">currency</span>: &#123;</span><br><span class="line">        <span class="attr">style</span>: <span class="string">&#x27;currency&#x27;</span>,</span><br><span class="line">        <span class="attr">currency</span>: <span class="string">&#x27;CNY&#x27;</span>,</span><br><span class="line">        <span class="attr">notation</span>: <span class="string">&#x27;standard&#x27;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">decimal</span>: &#123;</span><br><span class="line">        <span class="attr">style</span>: <span class="string">&#x27;decimal&#x27;</span>,</span><br><span class="line">        <span class="attr">minimumFractionDigits</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="attr">maximumFractionDigits</span>: <span class="number">2</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">percent</span>: &#123;</span><br><span class="line">        <span class="attr">style</span>: <span class="string">&#x27;percent&#x27;</span>,</span><br><span class="line">        <span class="attr">useGrouping</span>: <span class="literal">false</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&#x27;en-US&#x27;</span>: &#123;</span><br><span class="line">      <span class="attr">currency</span>: &#123;</span><br><span class="line">        <span class="attr">style</span>: <span class="string">&#x27;currency&#x27;</span>,</span><br><span class="line">        <span class="attr">currency</span>: <span class="string">&#x27;USD&#x27;</span>,</span><br><span class="line">        <span class="attr">notation</span>: <span class="string">&#x27;standard&#x27;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">decimal</span>: &#123;</span><br><span class="line">        <span class="attr">style</span>: <span class="string">&#x27;decimal&#x27;</span>,</span><br><span class="line">        <span class="attr">minimumFractionDigits</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="attr">maximumFractionDigits</span>: <span class="number">2</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">percent</span>: &#123;</span><br><span class="line">        <span class="attr">style</span>: <span class="string">&#x27;percent&#x27;</span>,</span><br><span class="line">        <span class="attr">useGrouping</span>: <span class="literal">false</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&#x27;ja-JP&#x27;</span>: &#123;</span><br><span class="line">      <span class="attr">currency</span>: &#123;</span><br><span class="line">        <span class="attr">style</span>: <span class="string">&#x27;currency&#x27;</span>,</span><br><span class="line">        <span class="attr">currency</span>: <span class="string">&#x27;JPY&#x27;</span>,</span><br><span class="line">        <span class="attr">notation</span>: <span class="string">&#x27;standard&#x27;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">decimal</span>: &#123;</span><br><span class="line">        <span class="attr">style</span>: <span class="string">&#x27;decimal&#x27;</span>,</span><br><span class="line">        <span class="attr">minimumFractionDigits</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">maximumFractionDigits</span>: <span class="number">0</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">percent</span>: &#123;</span><br><span class="line">        <span class="attr">style</span>: <span class="string">&#x27;percent&#x27;</span>,</span><br><span class="line">        <span class="attr">useGrouping</span>: <span class="literal">false</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 日期时间格式化</span></span><br><span class="line">  <span class="attr">datetimeFormats</span>: &#123;</span><br><span class="line">    <span class="string">&#x27;zh-CN&#x27;</span>: &#123;</span><br><span class="line">      <span class="attr">short</span>: &#123;</span><br><span class="line">        <span class="attr">year</span>: <span class="string">&#x27;numeric&#x27;</span>,</span><br><span class="line">        <span class="attr">month</span>: <span class="string">&#x27;short&#x27;</span>,</span><br><span class="line">        <span class="attr">day</span>: <span class="string">&#x27;numeric&#x27;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">long</span>: &#123;</span><br><span class="line">        <span class="attr">year</span>: <span class="string">&#x27;numeric&#x27;</span>,</span><br><span class="line">        <span class="attr">month</span>: <span class="string">&#x27;short&#x27;</span>,</span><br><span class="line">        <span class="attr">day</span>: <span class="string">&#x27;numeric&#x27;</span>,</span><br><span class="line">        <span class="attr">weekday</span>: <span class="string">&#x27;short&#x27;</span>,</span><br><span class="line">        <span class="attr">hour</span>: <span class="string">&#x27;numeric&#x27;</span>,</span><br><span class="line">        <span class="attr">minute</span>: <span class="string">&#x27;numeric&#x27;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">time</span>: &#123;</span><br><span class="line">        <span class="attr">hour</span>: <span class="string">&#x27;numeric&#x27;</span>,</span><br><span class="line">        <span class="attr">minute</span>: <span class="string">&#x27;numeric&#x27;</span>,</span><br><span class="line">        <span class="attr">second</span>: <span class="string">&#x27;numeric&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&#x27;en-US&#x27;</span>: &#123;</span><br><span class="line">      <span class="attr">short</span>: &#123;</span><br><span class="line">        <span class="attr">year</span>: <span class="string">&#x27;numeric&#x27;</span>,</span><br><span class="line">        <span class="attr">month</span>: <span class="string">&#x27;short&#x27;</span>,</span><br><span class="line">        <span class="attr">day</span>: <span class="string">&#x27;numeric&#x27;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">long</span>: &#123;</span><br><span class="line">        <span class="attr">year</span>: <span class="string">&#x27;numeric&#x27;</span>,</span><br><span class="line">        <span class="attr">month</span>: <span class="string">&#x27;short&#x27;</span>,</span><br><span class="line">        <span class="attr">day</span>: <span class="string">&#x27;numeric&#x27;</span>,</span><br><span class="line">        <span class="attr">weekday</span>: <span class="string">&#x27;short&#x27;</span>,</span><br><span class="line">        <span class="attr">hour</span>: <span class="string">&#x27;numeric&#x27;</span>,</span><br><span class="line">        <span class="attr">minute</span>: <span class="string">&#x27;numeric&#x27;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">time</span>: &#123;</span><br><span class="line">        <span class="attr">hour</span>: <span class="string">&#x27;numeric&#x27;</span>,</span><br><span class="line">        <span class="attr">minute</span>: <span class="string">&#x27;numeric&#x27;</span>,</span><br><span class="line">        <span class="attr">second</span>: <span class="string">&#x27;numeric&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 缺失键处理</span></span><br><span class="line">  <span class="attr">missingWarn</span>: process.<span class="property">env</span>.<span class="property">NODE_ENV</span> !== <span class="string">&#x27;production&#x27;</span>,</span><br><span class="line">  <span class="attr">fallbackWarn</span>: process.<span class="property">env</span>.<span class="property">NODE_ENV</span> !== <span class="string">&#x27;production&#x27;</span>,</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 全局属性</span></span><br><span class="line">  <span class="attr">globalInjection</span>: <span class="literal">true</span>,</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 模式</span></span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;composition&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 创建 I18n 实例</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> i18n = <span class="title function_">createI18n</span>(i18nOptions)</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取当前语言信息</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">getCurrentLocaleInfo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> currentLocale = i18n.<span class="property">global</span>.<span class="property">locale</span>.<span class="property">value</span></span><br><span class="line">  <span class="keyword">return</span> <span class="variable constant_">SUPPORT_LOCALES</span>.<span class="title function_">find</span>(<span class="function"><span class="params">locale</span> =&gt;</span> locale.<span class="property">code</span> === currentLocale)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 切换语言</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">setLocale</span>(<span class="params"><span class="attr">locale</span>: <span class="built_in">string</span></span>): <span class="title class_">Promise</span>&lt;<span class="built_in">void</span>&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (!<span class="variable constant_">SUPPORT_LOCALES</span>.<span class="title function_">some</span>(<span class="function"><span class="params">l</span> =&gt;</span> l.<span class="property">code</span> === locale)) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">`Unsupported locale: <span class="subst">$&#123;locale&#125;</span>`</span>)</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 动态加载语言包（如果需要）</span></span><br><span class="line">  <span class="keyword">if</span> (!i18n.<span class="property">global</span>.<span class="property">availableLocales</span>.<span class="title function_">includes</span>(locale)) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> messages = <span class="keyword">await</span> <span class="keyword">import</span>(<span class="string">`./locales/<span class="subst">$&#123;locale&#125;</span>.json`</span>)</span><br><span class="line">      i18n.<span class="property">global</span>.<span class="title function_">setLocaleMessage</span>(locale, messages.<span class="property">default</span>)</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`Failed to load locale <span class="subst">$&#123;locale&#125;</span>:`</span>, error)</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 设置语言</span></span><br><span class="line">  i18n.<span class="property">global</span>.<span class="property">locale</span>.<span class="property">value</span> = locale</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 存储到本地</span></span><br><span class="line">  <span class="title function_">setStoredLocale</span>(locale)</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 设置 HTML lang 属性</span></span><br><span class="line">  <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">lang</span> = locale</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 设置文档方向</span></span><br><span class="line">  <span class="keyword">const</span> localeInfo = <span class="variable constant_">SUPPORT_LOCALES</span>.<span class="title function_">find</span>(<span class="function"><span class="params">l</span> =&gt;</span> l.<span class="property">code</span> === locale)</span><br><span class="line">  <span class="keyword">if</span> (localeInfo) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">dir</span> = localeInfo.<span class="property">dir</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> i18n</span><br></pre></td></tr></table></figure>

<h3 id="3-语言文件结构"><a href="#3-语言文件结构" class="headerlink" title="3. 语言文件结构"></a>3. 语言文件结构</h3><p><strong>中文语言文件</strong></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/i18n/locales/zh-CN.json</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;common&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;ok&quot;</span><span class="punctuation">:</span> <span class="string">&quot;确定&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;cancel&quot;</span><span class="punctuation">:</span> <span class="string">&quot;取消&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;confirm&quot;</span><span class="punctuation">:</span> <span class="string">&quot;确认&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;delete&quot;</span><span class="punctuation">:</span> <span class="string">&quot;删除&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;edit&quot;</span><span class="punctuation">:</span> <span class="string">&quot;编辑&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;save&quot;</span><span class="punctuation">:</span> <span class="string">&quot;保存&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;loading&quot;</span><span class="punctuation">:</span> <span class="string">&quot;加载中...&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;error&quot;</span><span class="punctuation">:</span> <span class="string">&quot;错误&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;success&quot;</span><span class="punctuation">:</span> <span class="string">&quot;成功&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;warning&quot;</span><span class="punctuation">:</span> <span class="string">&quot;警告&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;info&quot;</span><span class="punctuation">:</span> <span class="string">&quot;信息&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;search&quot;</span><span class="punctuation">:</span> <span class="string">&quot;搜索&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;reset&quot;</span><span class="punctuation">:</span> <span class="string">&quot;重置&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;submit&quot;</span><span class="punctuation">:</span> <span class="string">&quot;提交&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;back&quot;</span><span class="punctuation">:</span> <span class="string">&quot;返回&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;next&quot;</span><span class="punctuation">:</span> <span class="string">&quot;下一步&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;previous&quot;</span><span class="punctuation">:</span> <span class="string">&quot;上一步&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;close&quot;</span><span class="punctuation">:</span> <span class="string">&quot;关闭&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;refresh&quot;</span><span class="punctuation">:</span> <span class="string">&quot;刷新&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;navigation&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;home&quot;</span><span class="punctuation">:</span> <span class="string">&quot;首页&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;about&quot;</span><span class="punctuation">:</span> <span class="string">&quot;关于&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;contact&quot;</span><span class="punctuation">:</span> <span class="string">&quot;联系我们&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;products&quot;</span><span class="punctuation">:</span> <span class="string">&quot;产品&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;services&quot;</span><span class="punctuation">:</span> <span class="string">&quot;服务&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;blog&quot;</span><span class="punctuation">:</span> <span class="string">&quot;博客&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;news&quot;</span><span class="punctuation">:</span> <span class="string">&quot;新闻&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;help&quot;</span><span class="punctuation">:</span> <span class="string">&quot;帮助&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;profile&quot;</span><span class="punctuation">:</span> <span class="string">&quot;个人资料&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;settings&quot;</span><span class="punctuation">:</span> <span class="string">&quot;设置&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;logout&quot;</span><span class="punctuation">:</span> <span class="string">&quot;退出登录&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;form&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;validation&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;required&quot;</span><span class="punctuation">:</span> <span class="string">&quot;此字段为必填项&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;email&quot;</span><span class="punctuation">:</span> <span class="string">&quot;请输入有效的邮箱地址&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;phone&quot;</span><span class="punctuation">:</span> <span class="string">&quot;请输入有效的手机号码&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;password&quot;</span><span class="punctuation">:</span> <span class="string">&quot;密码长度至少为 &#123;min&#125; 位&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;confirm_password&quot;</span><span class="punctuation">:</span> <span class="string">&quot;两次输入的密码不一致&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;min_length&quot;</span><span class="punctuation">:</span> <span class="string">&quot;最少输入 &#123;min&#125; 个字符&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;max_length&quot;</span><span class="punctuation">:</span> <span class="string">&quot;最多输入 &#123;max&#125; 个字符&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;numeric&quot;</span><span class="punctuation">:</span> <span class="string">&quot;请输入数字&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;请输入有效的网址&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;placeholder&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;email&quot;</span><span class="punctuation">:</span> <span class="string">&quot;请输入邮箱地址&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;password&quot;</span><span class="punctuation">:</span> <span class="string">&quot;请输入密码&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;请输入姓名&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;phone&quot;</span><span class="punctuation">:</span> <span class="string">&quot;请输入手机号码&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;search&quot;</span><span class="punctuation">:</span> <span class="string">&quot;请输入搜索关键词&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;comment&quot;</span><span class="punctuation">:</span> <span class="string">&quot;请输入评论内容&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;welcome&quot;</span><span class="punctuation">:</span> <span class="string">&quot;欢迎使用我们的应用！&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;login_success&quot;</span><span class="punctuation">:</span> <span class="string">&quot;登录成功&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;login_failed&quot;</span><span class="punctuation">:</span> <span class="string">&quot;登录失败，请检查用户名和密码&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;logout_success&quot;</span><span class="punctuation">:</span> <span class="string">&quot;退出登录成功&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;save_success&quot;</span><span class="punctuation">:</span> <span class="string">&quot;保存成功&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;save_failed&quot;</span><span class="punctuation">:</span> <span class="string">&quot;保存失败&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;delete_success&quot;</span><span class="punctuation">:</span> <span class="string">&quot;删除成功&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;delete_failed&quot;</span><span class="punctuation">:</span> <span class="string">&quot;删除失败&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;delete_confirm&quot;</span><span class="punctuation">:</span> <span class="string">&quot;确定要删除这个项目吗？&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;network_error&quot;</span><span class="punctuation">:</span> <span class="string">&quot;网络连接错误，请稍后重试&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;permission_denied&quot;</span><span class="punctuation">:</span> <span class="string">&quot;权限不足&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;not_found&quot;</span><span class="punctuation">:</span> <span class="string">&quot;页面未找到&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;server_error&quot;</span><span class="punctuation">:</span> <span class="string">&quot;服务器错误&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;date&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;today&quot;</span><span class="punctuation">:</span> <span class="string">&quot;今天&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;yesterday&quot;</span><span class="punctuation">:</span> <span class="string">&quot;昨天&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;tomorrow&quot;</span><span class="punctuation">:</span> <span class="string">&quot;明天&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;this_week&quot;</span><span class="punctuation">:</span> <span class="string">&quot;本周&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;last_week&quot;</span><span class="punctuation">:</span> <span class="string">&quot;上周&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;next_week&quot;</span><span class="punctuation">:</span> <span class="string">&quot;下周&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;this_month&quot;</span><span class="punctuation">:</span> <span class="string">&quot;本月&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;last_month&quot;</span><span class="punctuation">:</span> <span class="string">&quot;上月&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;next_month&quot;</span><span class="punctuation">:</span> <span class="string">&quot;下月&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;this_year&quot;</span><span class="punctuation">:</span> <span class="string">&quot;今年&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;last_year&quot;</span><span class="punctuation">:</span> <span class="string">&quot;去年&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;next_year&quot;</span><span class="punctuation">:</span> <span class="string">&quot;明年&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;pluralization&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;item&quot;</span><span class="punctuation">:</span> <span class="string">&quot;没有项目 | &#123;count&#125; 个项目 | &#123;count&#125; 个项目&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;user&quot;</span><span class="punctuation">:</span> <span class="string">&quot;没有用户 | &#123;count&#125; 个用户 | &#123;count&#125; 个用户&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;comment&quot;</span><span class="punctuation">:</span> <span class="string">&quot;没有评论 | &#123;count&#125; 条评论 | &#123;count&#125; 条评论&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;like&quot;</span><span class="punctuation">:</span> <span class="string">&quot;没有点赞 | &#123;count&#125; 个点赞 | &#123;count&#125; 个点赞&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;view&quot;</span><span class="punctuation">:</span> <span class="string">&quot;没有浏览 | &#123;count&#125; 次浏览 | &#123;count&#125; 次浏览&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;time&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;just_now&quot;</span><span class="punctuation">:</span> <span class="string">&quot;刚刚&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;minutes_ago&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&#123;count&#125; 分钟前&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hours_ago&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&#123;count&#125; 小时前&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;days_ago&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&#123;count&#125; 天前&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;weeks_ago&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&#123;count&#125; 周前&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;months_ago&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&#123;count&#125; 个月前&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;years_ago&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&#123;count&#125; 年前&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;error&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;400&quot;</span><span class="punctuation">:</span> <span class="string">&quot;请求错误&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;401&quot;</span><span class="punctuation">:</span> <span class="string">&quot;未授权访问&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;403&quot;</span><span class="punctuation">:</span> <span class="string">&quot;禁止访问&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;404&quot;</span><span class="punctuation">:</span> <span class="string">&quot;页面不存在&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;500&quot;</span><span class="punctuation">:</span> <span class="string">&quot;服务器内部错误&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;502&quot;</span><span class="punctuation">:</span> <span class="string">&quot;网关错误&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;503&quot;</span><span class="punctuation">:</span> <span class="string">&quot;服务不可用&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;504&quot;</span><span class="punctuation">:</span> <span class="string">&quot;网关超时&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p><strong>英文语言文件</strong></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/i18n/locales/en-US.json</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;common&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;ok&quot;</span><span class="punctuation">:</span> <span class="string">&quot;OK&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;cancel&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Cancel&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;confirm&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Confirm&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;delete&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Delete&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;edit&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Edit&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;save&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Save&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;loading&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Loading...&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;error&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Error&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;success&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Success&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;warning&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Warning&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;info&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Info&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;search&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Search&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;reset&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Reset&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;submit&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Submit&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;back&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Back&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;next&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Next&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;previous&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Previous&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;close&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Close&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;refresh&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Refresh&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;navigation&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;home&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Home&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;about&quot;</span><span class="punctuation">:</span> <span class="string">&quot;About&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;contact&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Contact&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;products&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Products&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;services&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Services&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;blog&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Blog&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;news&quot;</span><span class="punctuation">:</span> <span class="string">&quot;News&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;help&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Help&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;profile&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Profile&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;settings&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Settings&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;logout&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Logout&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;form&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;validation&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;required&quot;</span><span class="punctuation">:</span> <span class="string">&quot;This field is required&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;email&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Please enter a valid email address&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;phone&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Please enter a valid phone number&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;password&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Password must be at least &#123;min&#125; characters&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;confirm_password&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Passwords do not match&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;min_length&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Minimum &#123;min&#125; characters required&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;max_length&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Maximum &#123;max&#125; characters allowed&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;numeric&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Please enter a number&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Please enter a valid URL&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;placeholder&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;email&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Enter email address&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;password&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Enter password&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Enter name&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;phone&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Enter phone number&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;search&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Enter search keywords&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;comment&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Enter comment&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;welcome&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Welcome to our application!&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;login_success&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Login successful&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;login_failed&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Login failed, please check username and password&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;logout_success&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Logout successful&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;save_success&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Save successful&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;save_failed&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Save failed&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;delete_success&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Delete successful&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;delete_failed&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Delete failed&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;delete_confirm&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Are you sure you want to delete this item?&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;network_error&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Network error, please try again later&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;permission_denied&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Permission denied&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;not_found&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Page not found&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;server_error&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Server error&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;date&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;today&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Today&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;yesterday&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Yesterday&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;tomorrow&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Tomorrow&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;this_week&quot;</span><span class="punctuation">:</span> <span class="string">&quot;This week&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;last_week&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Last week&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;next_week&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Next week&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;this_month&quot;</span><span class="punctuation">:</span> <span class="string">&quot;This month&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;last_month&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Last month&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;next_month&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Next month&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;this_year&quot;</span><span class="punctuation">:</span> <span class="string">&quot;This year&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;last_year&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Last year&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;next_year&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Next year&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;pluralization&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;item&quot;</span><span class="punctuation">:</span> <span class="string">&quot;no items | &#123;count&#125; item | &#123;count&#125; items&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;user&quot;</span><span class="punctuation">:</span> <span class="string">&quot;no users | &#123;count&#125; user | &#123;count&#125; users&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;comment&quot;</span><span class="punctuation">:</span> <span class="string">&quot;no comments | &#123;count&#125; comment | &#123;count&#125; comments&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;like&quot;</span><span class="punctuation">:</span> <span class="string">&quot;no likes | &#123;count&#125; like | &#123;count&#125; likes&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;view&quot;</span><span class="punctuation">:</span> <span class="string">&quot;no views | &#123;count&#125; view | &#123;count&#125; views&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;time&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;just_now&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Just now&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;minutes_ago&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&#123;count&#125; minutes ago&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hours_ago&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&#123;count&#125; hours ago&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;days_ago&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&#123;count&#125; days ago&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;weeks_ago&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&#123;count&#125; weeks ago&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;months_ago&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&#123;count&#125; months ago&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;years_ago&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&#123;count&#125; years ago&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;error&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;400&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Bad Request&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;401&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Unauthorized&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;403&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Forbidden&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;404&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Not Found&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;500&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Internal Server Error&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;502&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Bad Gateway&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;503&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Service Unavailable&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;504&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Gateway Timeout&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="高级国际化功能"><a href="#高级国际化功能" class="headerlink" title="高级国际化功能"></a>高级国际化功能</h2><h3 id="1-组合式-API-使用"><a href="#1-组合式-API-使用" class="headerlink" title="1. 组合式 API 使用"></a>1. 组合式 API 使用</h3><p><strong>国际化 Hook</strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// composables/useI18n.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; computed &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; useI18n <span class="keyword">as</span> useVueI18n &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-i18n&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">type</span> &#123; <span class="title class_">Composer</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-i18n&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 扩展的国际化 Hook</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">useI18n</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> i18n = <span class="title function_">useVueI18n</span>()</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 翻译函数（支持 HTML）</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">const</span> th = (<span class="attr">key</span>: <span class="built_in">string</span>, <span class="attr">values</span>?: <span class="title class_">Record</span>&lt;<span class="built_in">string</span>, <span class="built_in">any</span>&gt;): <span class="function"><span class="params">string</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> i18n.<span class="title function_">t</span>(key, values)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 复数翻译</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">const</span> tp = (<span class="attr">key</span>: <span class="built_in">string</span>, <span class="attr">count</span>: <span class="built_in">number</span>, <span class="attr">values</span>?: <span class="title class_">Record</span>&lt;<span class="built_in">string</span>, <span class="built_in">any</span>&gt;): <span class="function"><span class="params">string</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> i18n.<span class="title function_">t</span>(key, &#123; count, ...values &#125;, count)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 日期格式化</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">const</span> td = (<span class="attr">date</span>: <span class="title class_">Date</span> | <span class="built_in">string</span> | <span class="built_in">number</span>, format = <span class="string">&#x27;short&#x27;</span>): <span class="function"><span class="params">string</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> dateObj = <span class="keyword">typeof</span> date === <span class="string">&#x27;string&#x27;</span> || <span class="keyword">typeof</span> date === <span class="string">&#x27;number&#x27;</span> </span><br><span class="line">      ? <span class="keyword">new</span> <span class="title class_">Date</span>(date) </span><br><span class="line">      : date</span><br><span class="line">    <span class="keyword">return</span> i18n.<span class="title function_">d</span>(dateObj, format)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 数字格式化</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">const</span> tn = (<span class="attr">number</span>: <span class="built_in">number</span>, format = <span class="string">&#x27;decimal&#x27;</span>): <span class="function"><span class="params">string</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> i18n.<span class="title function_">n</span>(<span class="built_in">number</span>, format)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 货币格式化</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">const</span> tc = (<span class="attr">amount</span>: <span class="built_in">number</span>): <span class="function"><span class="params">string</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> i18n.<span class="title function_">n</span>(amount, <span class="string">&#x27;currency&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 百分比格式化</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">const</span> tpct = (<span class="attr">value</span>: <span class="built_in">number</span>): <span class="function"><span class="params">string</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> i18n.<span class="title function_">n</span>(value / <span class="number">100</span>, <span class="string">&#x27;percent&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 相对时间格式化</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">const</span> tr = (<span class="attr">date</span>: <span class="title class_">Date</span> | <span class="built_in">string</span> | <span class="built_in">number</span>): <span class="function"><span class="params">string</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> dateObj = <span class="keyword">typeof</span> date === <span class="string">&#x27;string&#x27;</span> || <span class="keyword">typeof</span> date === <span class="string">&#x27;number&#x27;</span> </span><br><span class="line">      ? <span class="keyword">new</span> <span class="title class_">Date</span>(date) </span><br><span class="line">      : date</span><br><span class="line">    <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="title class_">Date</span>()</span><br><span class="line">    <span class="keyword">const</span> diff = now.<span class="title function_">getTime</span>() - dateObj.<span class="title function_">getTime</span>()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">const</span> seconds = <span class="title class_">Math</span>.<span class="title function_">floor</span>(diff / <span class="number">1000</span>)</span><br><span class="line">    <span class="keyword">const</span> minutes = <span class="title class_">Math</span>.<span class="title function_">floor</span>(seconds / <span class="number">60</span>)</span><br><span class="line">    <span class="keyword">const</span> hours = <span class="title class_">Math</span>.<span class="title function_">floor</span>(minutes / <span class="number">60</span>)</span><br><span class="line">    <span class="keyword">const</span> days = <span class="title class_">Math</span>.<span class="title function_">floor</span>(hours / <span class="number">24</span>)</span><br><span class="line">    <span class="keyword">const</span> weeks = <span class="title class_">Math</span>.<span class="title function_">floor</span>(days / <span class="number">7</span>)</span><br><span class="line">    <span class="keyword">const</span> months = <span class="title class_">Math</span>.<span class="title function_">floor</span>(days / <span class="number">30</span>)</span><br><span class="line">    <span class="keyword">const</span> years = <span class="title class_">Math</span>.<span class="title function_">floor</span>(days / <span class="number">365</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (seconds &lt; <span class="number">60</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> i18n.<span class="title function_">t</span>(<span class="string">&#x27;time.just_now&#x27;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (minutes &lt; <span class="number">60</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> i18n.<span class="title function_">t</span>(<span class="string">&#x27;time.minutes_ago&#x27;</span>, &#123; <span class="attr">count</span>: minutes &#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (hours &lt; <span class="number">24</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> i18n.<span class="title function_">t</span>(<span class="string">&#x27;time.hours_ago&#x27;</span>, &#123; <span class="attr">count</span>: hours &#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (days &lt; <span class="number">7</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> i18n.<span class="title function_">t</span>(<span class="string">&#x27;time.days_ago&#x27;</span>, &#123; <span class="attr">count</span>: days &#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (weeks &lt; <span class="number">4</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> i18n.<span class="title function_">t</span>(<span class="string">&#x27;time.weeks_ago&#x27;</span>, &#123; <span class="attr">count</span>: weeks &#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (months &lt; <span class="number">12</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> i18n.<span class="title function_">t</span>(<span class="string">&#x27;time.months_ago&#x27;</span>, &#123; <span class="attr">count</span>: months &#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> i18n.<span class="title function_">t</span>(<span class="string">&#x27;time.years_ago&#x27;</span>, &#123; <span class="attr">count</span>: years &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 检查翻译键是否存在</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">const</span> te = (<span class="attr">key</span>: <span class="built_in">string</span>): <span class="function"><span class="params">boolean</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> i18n.<span class="title function_">te</span>(key)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 获取当前语言</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">const</span> locale = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> i18n.<span class="property">locale</span>.<span class="property">value</span>)</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 获取可用语言列表</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">const</span> availableLocales = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> i18n.<span class="property">availableLocales</span>)</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 是否为 RTL 语言</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">const</span> isRTL = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> rtlLocales = [<span class="string">&#x27;ar&#x27;</span>, <span class="string">&#x27;he&#x27;</span>, <span class="string">&#x27;fa&#x27;</span>, <span class="string">&#x27;ur&#x27;</span>]</span><br><span class="line">    <span class="keyword">return</span> rtlLocales.<span class="title function_">some</span>(<span class="function"><span class="params">rtl</span> =&gt;</span> locale.<span class="property">value</span>.<span class="title function_">startsWith</span>(rtl))</span><br><span class="line">  &#125;)</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="comment">// 原始 i18n 实例</span></span><br><span class="line">    ...i18n,</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 扩展方法</span></span><br><span class="line">    th,</span><br><span class="line">    tp,</span><br><span class="line">    td,</span><br><span class="line">    tn,</span><br><span class="line">    tc,</span><br><span class="line">    tpct,</span><br><span class="line">    tr,</span><br><span class="line">    te,</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 计算属性</span></span><br><span class="line">    locale,</span><br><span class="line">    availableLocales,</span><br><span class="line">    isRTL</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 语言切换 Hook</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">useLocale</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; locale &#125; = <span class="title function_">useI18n</span>()</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 切换语言</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">const</span> setLocale = <span class="title function_">async</span> (<span class="attr">newLocale</span>: <span class="built_in">string</span>): <span class="title class_">Promise</span>&lt;<span class="built_in">void</span>&gt; =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; <span class="attr">setLocale</span>: setI18nLocale &#125; = <span class="keyword">await</span> <span class="keyword">import</span>(<span class="string">&#x27;@/i18n&#x27;</span>)</span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">setI18nLocale</span>(newLocale)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 获取语言信息</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">getLocaleInfo</span> = (<span class="params"><span class="attr">localeCode</span>?: <span class="built_in">string</span></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; <span class="variable constant_">SUPPORT_LOCALES</span> &#125; = <span class="built_in">require</span>(<span class="string">&#x27;@/i18n&#x27;</span>)</span><br><span class="line">    <span class="keyword">const</span> code = localeCode || locale.<span class="property">value</span></span><br><span class="line">    <span class="keyword">return</span> <span class="variable constant_">SUPPORT_LOCALES</span>.<span class="title function_">find</span>(<span class="function">(<span class="params"><span class="attr">l</span>: <span class="built_in">any</span></span>) =&gt;</span> l.<span class="property">code</span> === code)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 获取所有支持的语言</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">getSupportedLocales</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; <span class="variable constant_">SUPPORT_LOCALES</span> &#125; = <span class="built_in">require</span>(<span class="string">&#x27;@/i18n&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="variable constant_">SUPPORT_LOCALES</span></span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    locale,</span><br><span class="line">    setLocale,</span><br><span class="line">    getLocaleInfo,</span><br><span class="line">    getSupportedLocales</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 表单验证国际化 Hook</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">useFormValidation</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; t &#125; = <span class="title function_">useI18n</span>()</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 验证规则</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">const</span> rules = &#123;</span><br><span class="line">    <span class="attr">required</span>: <span class="function">(<span class="params"><span class="attr">message</span>?: <span class="built_in">string</span></span>) =&gt;</span> <span class="function">(<span class="params"><span class="attr">value</span>: <span class="built_in">any</span></span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (!value || (<span class="title class_">Array</span>.<span class="title function_">isArray</span>(value) &amp;&amp; value.<span class="property">length</span> === <span class="number">0</span>)) &#123;</span><br><span class="line">        <span class="keyword">return</span> message || <span class="title function_">t</span>(<span class="string">&#x27;form.validation.required&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    </span><br><span class="line">    <span class="attr">email</span>: <span class="function">(<span class="params"><span class="attr">message</span>?: <span class="built_in">string</span></span>) =&gt;</span> <span class="function">(<span class="params"><span class="attr">value</span>: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> emailRegex = <span class="regexp">/^[^\s@]+@[^\s@]+\.[^\s@]+$/</span></span><br><span class="line">      <span class="keyword">if</span> (value &amp;&amp; !emailRegex.<span class="title function_">test</span>(value)) &#123;</span><br><span class="line">        <span class="keyword">return</span> message || <span class="title function_">t</span>(<span class="string">&#x27;form.validation.email&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    </span><br><span class="line">    <span class="attr">minLength</span>: <span class="function">(<span class="params"><span class="attr">min</span>: <span class="built_in">number</span>, <span class="attr">message</span>?: <span class="built_in">string</span></span>) =&gt;</span> <span class="function">(<span class="params"><span class="attr">value</span>: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (value &amp;&amp; value.<span class="property">length</span> &lt; min) &#123;</span><br><span class="line">        <span class="keyword">return</span> message || <span class="title function_">t</span>(<span class="string">&#x27;form.validation.min_length&#x27;</span>, &#123; min &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    </span><br><span class="line">    <span class="attr">maxLength</span>: <span class="function">(<span class="params"><span class="attr">max</span>: <span class="built_in">number</span>, <span class="attr">message</span>?: <span class="built_in">string</span></span>) =&gt;</span> <span class="function">(<span class="params"><span class="attr">value</span>: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (value &amp;&amp; value.<span class="property">length</span> &gt; max) &#123;</span><br><span class="line">        <span class="keyword">return</span> message || <span class="title function_">t</span>(<span class="string">&#x27;form.validation.max_length&#x27;</span>, &#123; max &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    </span><br><span class="line">    <span class="attr">numeric</span>: <span class="function">(<span class="params"><span class="attr">message</span>?: <span class="built_in">string</span></span>) =&gt;</span> <span class="function">(<span class="params"><span class="attr">value</span>: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (value &amp;&amp; <span class="built_in">isNaN</span>(<span class="title class_">Number</span>(value))) &#123;</span><br><span class="line">        <span class="keyword">return</span> message || <span class="title function_">t</span>(<span class="string">&#x27;form.validation.numeric&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    </span><br><span class="line">    <span class="attr">url</span>: <span class="function">(<span class="params"><span class="attr">message</span>?: <span class="built_in">string</span></span>) =&gt;</span> <span class="function">(<span class="params"><span class="attr">value</span>: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">new</span> <span class="title function_">URL</span>(value)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">      &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> message || <span class="title function_">t</span>(<span class="string">&#x27;form.validation.url&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    </span><br><span class="line">    <span class="attr">phone</span>: <span class="function">(<span class="params"><span class="attr">message</span>?: <span class="built_in">string</span></span>) =&gt;</span> <span class="function">(<span class="params"><span class="attr">value</span>: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> phoneRegex = <span class="regexp">/^[+]?[1-9]\d&#123;1,14&#125;$/</span></span><br><span class="line">      <span class="keyword">if</span> (value &amp;&amp; !phoneRegex.<span class="title function_">test</span>(value.<span class="title function_">replace</span>(<span class="regexp">/[\s-()]/g</span>, <span class="string">&#x27;&#x27;</span>))) &#123;</span><br><span class="line">        <span class="keyword">return</span> message || <span class="title function_">t</span>(<span class="string">&#x27;form.validation.phone&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    </span><br><span class="line">    <span class="attr">password</span>: <span class="function">(<span class="params">min = <span class="number">8</span>, <span class="attr">message</span>?: <span class="built_in">string</span></span>) =&gt;</span> <span class="function">(<span class="params"><span class="attr">value</span>: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (value &amp;&amp; value.<span class="property">length</span> &lt; min) &#123;</span><br><span class="line">        <span class="keyword">return</span> message || <span class="title function_">t</span>(<span class="string">&#x27;form.validation.password&#x27;</span>, &#123; min &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    </span><br><span class="line">    <span class="attr">confirmPassword</span>: <span class="function">(<span class="params"><span class="attr">password</span>: <span class="built_in">string</span>, <span class="attr">message</span>?: <span class="built_in">string</span></span>) =&gt;</span> <span class="function">(<span class="params"><span class="attr">value</span>: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (value !== password) &#123;</span><br><span class="line">        <span class="keyword">return</span> message || <span class="title function_">t</span>(<span class="string">&#x27;form.validation.confirm_password&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    rules</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-动态语言加载"><a href="#2-动态语言加载" class="headerlink" title="2. 动态语言加载"></a>2. 动态语言加载</h3><p><strong>懒加载语言包</strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// utils/i18nLoader.ts</span></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">type</span> &#123; I18n &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-i18n&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 语言包加载器</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">I18nLoader</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> loadedLocales = <span class="keyword">new</span> <span class="title class_">Set</span>&lt;<span class="built_in">string</span>&gt;()</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> loadingPromises = <span class="keyword">new</span> <span class="title class_">Map</span>&lt;<span class="built_in">string</span>, <span class="title class_">Promise</span>&lt;<span class="built_in">any</span>&gt;&gt;()</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 动态加载语言包</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">async</span> <span class="title function_">loadLocale</span>(<span class="attr">i18n</span>: I18n, <span class="attr">locale</span>: <span class="built_in">string</span>): <span class="title class_">Promise</span>&lt;<span class="built_in">void</span>&gt; &#123;</span><br><span class="line">    <span class="comment">// 如果已经加载过，直接返回</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">loadedLocales</span>.<span class="title function_">has</span>(locale)) &#123;</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 如果正在加载，等待加载完成</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">loadingPromises</span>.<span class="title function_">has</span>(locale)) &#123;</span><br><span class="line">      <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="property">loadingPromises</span>.<span class="title function_">get</span>(locale)</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 开始加载</span></span><br><span class="line">    <span class="keyword">const</span> loadingPromise = <span class="variable language_">this</span>.<span class="title function_">doLoadLocale</span>(i18n, locale)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">loadingPromises</span>.<span class="title function_">set</span>(locale, loadingPromise)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">await</span> loadingPromise</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">loadedLocales</span>.<span class="title function_">add</span>(locale)</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">loadingPromises</span>.<span class="title function_">delete</span>(locale)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 执行语言包加载</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">async</span> <span class="title function_">doLoadLocale</span>(<span class="attr">i18n</span>: I18n, <span class="attr">locale</span>: <span class="built_in">string</span>): <span class="title class_">Promise</span>&lt;<span class="built_in">void</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="comment">// 加载主语言包</span></span><br><span class="line">      <span class="keyword">const</span> mainMessages = <span class="keyword">await</span> <span class="keyword">import</span>(<span class="string">`@/i18n/locales/<span class="subst">$&#123;locale&#125;</span>.json`</span>)</span><br><span class="line">      </span><br><span class="line">      <span class="comment">// 加载模块化语言包</span></span><br><span class="line">      <span class="keyword">const</span> moduleMessages = <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">loadModuleMessages</span>(locale)</span><br><span class="line">      </span><br><span class="line">      <span class="comment">// 合并消息</span></span><br><span class="line">      <span class="keyword">const</span> messages = &#123;</span><br><span class="line">        ...mainMessages.<span class="property">default</span>,</span><br><span class="line">        ...moduleMessages</span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">      <span class="comment">// 设置语言消息</span></span><br><span class="line">      i18n.<span class="property">global</span>.<span class="title function_">setLocaleMessage</span>(locale, messages)</span><br><span class="line">      </span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Locale <span class="subst">$&#123;locale&#125;</span> loaded successfully`</span>)</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`Failed to load locale <span class="subst">$&#123;locale&#125;</span>:`</span>, error)</span><br><span class="line">      <span class="keyword">throw</span> error</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 加载模块化语言包</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">async</span> <span class="title function_">loadModuleMessages</span>(<span class="attr">locale</span>: <span class="built_in">string</span>): <span class="title class_">Promise</span>&lt;<span class="title class_">Record</span>&lt;<span class="built_in">string</span>, <span class="built_in">any</span>&gt;&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="attr">moduleMessages</span>: <span class="title class_">Record</span>&lt;<span class="built_in">string</span>, <span class="built_in">any</span>&gt; = &#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 定义需要加载的模块</span></span><br><span class="line">    <span class="keyword">const</span> modules = [</span><br><span class="line">      <span class="string">&#x27;auth&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;dashboard&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;user&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;product&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;order&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;settings&#x27;</span></span><br><span class="line">    ]</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 并行加载所有模块</span></span><br><span class="line">    <span class="keyword">const</span> loadPromises = modules.<span class="title function_">map</span>(<span class="title function_">async</span> (<span class="variable language_">module</span>) =&gt; &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> messages = <span class="keyword">await</span> <span class="keyword">import</span>(<span class="string">`@/modules/<span class="subst">$&#123;<span class="variable language_">module</span>&#125;</span>/i18n/<span class="subst">$&#123;locale&#125;</span>.json`</span>)</span><br><span class="line">        moduleMessages[<span class="variable language_">module</span>] = messages.<span class="property">default</span></span><br><span class="line">      &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">`Failed to load module <span class="subst">$&#123;<span class="variable language_">module</span>&#125;</span> for locale <span class="subst">$&#123;locale&#125;</span>:`</span>, error)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">await</span> <span class="title class_">Promise</span>.<span class="title function_">all</span>(loadPromises)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> moduleMessages</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 预加载语言包</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">async</span> <span class="title function_">preloadLocales</span>(<span class="attr">i18n</span>: I18n, <span class="attr">locales</span>: <span class="built_in">string</span>[]): <span class="title class_">Promise</span>&lt;<span class="built_in">void</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> loadPromises = locales.<span class="title function_">map</span>(<span class="function"><span class="params">locale</span> =&gt;</span> <span class="variable language_">this</span>.<span class="title function_">loadLocale</span>(i18n, locale))</span><br><span class="line">    <span class="keyword">await</span> <span class="title class_">Promise</span>.<span class="title function_">allSettled</span>(loadPromises)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 清理已加载的语言包</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">clearLoadedLocales</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">loadedLocales</span>.<span class="title function_">clear</span>()</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">loadingPromises</span>.<span class="title function_">clear</span>()</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 获取已加载的语言列表</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">getLoadedLocales</span>(): <span class="built_in">string</span>[] &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Array</span>.<span class="title function_">from</span>(<span class="variable language_">this</span>.<span class="property">loadedLocales</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 语言包缓存管理</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">I18nCache</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="variable constant_">CACHE_KEY</span> = <span class="string">&#x27;i18n-cache&#x27;</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="variable constant_">CACHE_VERSION</span> = <span class="string">&#x27;1.0.0&#x27;</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="variable constant_">CACHE_EXPIRY</span> = <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span> <span class="comment">// 24小时</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 缓存语言包</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">async</span> <span class="title function_">cacheLocale</span>(<span class="attr">locale</span>: <span class="built_in">string</span>, <span class="attr">messages</span>: <span class="built_in">any</span>): <span class="title class_">Promise</span>&lt;<span class="built_in">void</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> cacheData = &#123;</span><br><span class="line">        <span class="attr">version</span>: <span class="variable language_">this</span>.<span class="property">CACHE_VERSION</span>,</span><br><span class="line">        <span class="attr">timestamp</span>: <span class="title class_">Date</span>.<span class="title function_">now</span>(),</span><br><span class="line">        locale,</span><br><span class="line">        messages</span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">      <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.CACHE_KEY&#125;</span>-<span class="subst">$&#123;locale&#125;</span>`</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(cacheData))</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">&#x27;Failed to cache locale:&#x27;</span>, error)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 获取缓存的语言包</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">getCachedLocale</span>(<span class="attr">locale</span>: <span class="built_in">string</span>): <span class="built_in">any</span> | <span class="literal">null</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> cached = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.CACHE_KEY&#125;</span>-<span class="subst">$&#123;locale&#125;</span>`</span>)</span><br><span class="line">      <span class="keyword">if</span> (!cached) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">      <span class="keyword">const</span> cacheData = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(cached)</span><br><span class="line">      </span><br><span class="line">      <span class="comment">// 检查版本和过期时间</span></span><br><span class="line">      <span class="keyword">if</span> (cacheData.<span class="property">version</span> !== <span class="variable language_">this</span>.<span class="property">CACHE_VERSION</span> ||</span><br><span class="line">          <span class="title class_">Date</span>.<span class="title function_">now</span>() - cacheData.<span class="property">timestamp</span> &gt; <span class="variable language_">this</span>.<span class="property">CACHE_EXPIRY</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">clearCachedLocale</span>(locale)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">      <span class="keyword">return</span> cacheData.<span class="property">messages</span></span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">&#x27;Failed to get cached locale:&#x27;</span>, error)</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 清理缓存的语言包</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">clearCachedLocale</span>(<span class="attr">locale</span>: <span class="built_in">string</span>): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.CACHE_KEY&#125;</span>-<span class="subst">$&#123;locale&#125;</span>`</span>)</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">&#x27;Failed to clear cached locale:&#x27;</span>, error)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 清理所有缓存</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">clearAllCache</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> keys = <span class="title class_">Object</span>.<span class="title function_">keys</span>(<span class="variable language_">localStorage</span>)</span><br><span class="line">      keys.<span class="title function_">forEach</span>(<span class="function"><span class="params">key</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (key.<span class="title function_">startsWith</span>(<span class="variable language_">this</span>.<span class="property">CACHE_KEY</span>)) &#123;</span><br><span class="line">          <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(key)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">&#x27;Failed to clear all cache:&#x27;</span>, error)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-国际化组件"><a href="#3-国际化组件" class="headerlink" title="3. 国际化组件"></a>3. 国际化组件</h3><p><strong>语言切换器组件</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- components/I18n/LanguageSwitcher.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;language-switcher&quot;&gt;</span><br><span class="line">    &lt;div </span><br><span class="line">      class=&quot;current-language&quot;</span><br><span class="line">      @click=&quot;toggleDropdown&quot;</span><br><span class="line">      :class=&quot;&#123; active: isDropdownOpen &#125;&quot;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;span class=&quot;flag&quot;&gt;&#123;&#123; currentLocaleInfo?.flag &#125;&#125;&lt;/span&gt;</span><br><span class="line">      &lt;span class=&quot;name&quot;&gt;&#123;&#123; currentLocaleInfo?.name &#125;&#125;&lt;/span&gt;</span><br><span class="line">      &lt;ChevronDownIcon </span><br><span class="line">        class=&quot;icon&quot;</span><br><span class="line">        :class=&quot;&#123; rotated: isDropdownOpen &#125;&quot;</span><br><span class="line">      /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;Transition name=&quot;dropdown&quot;&gt;</span><br><span class="line">      &lt;div </span><br><span class="line">        v-if=&quot;isDropdownOpen&quot;</span><br><span class="line">        class=&quot;language-dropdown&quot;</span><br><span class="line">        @click.stop</span><br><span class="line">      &gt;</span><br><span class="line">        &lt;div </span><br><span class="line">          v-for=&quot;locale in supportedLocales&quot;</span><br><span class="line">          :key=&quot;locale.code&quot;</span><br><span class="line">          class=&quot;language-option&quot;</span><br><span class="line">          :class=&quot;&#123; active: locale.code === currentLocale &#125;&quot;</span><br><span class="line">          @click=&quot;selectLanguage(locale.code)&quot;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;span class=&quot;flag&quot;&gt;&#123;&#123; locale.flag &#125;&#125;&lt;/span&gt;</span><br><span class="line">          &lt;span class=&quot;name&quot;&gt;&#123;&#123; locale.name &#125;&#125;&lt;/span&gt;</span><br><span class="line">          &lt;CheckIcon </span><br><span class="line">            v-if=&quot;locale.code === currentLocale&quot;</span><br><span class="line">            class=&quot;check-icon&quot;</span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/Transition&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref, computed, onMounted, onUnmounted &#125; from &#x27;vue&#x27;</span><br><span class="line">import &#123; ChevronDownIcon, CheckIcon &#125; from &#x27;@heroicons/vue/24/outline&#x27;</span><br><span class="line">import &#123; useI18n, useLocale &#125; from &#x27;@/composables/useI18n&#x27;</span><br><span class="line">import &#123; SUPPORT_LOCALES &#125; from &#x27;@/i18n&#x27;</span><br><span class="line"></span><br><span class="line">interface Props &#123;</span><br><span class="line">  placement?: &#x27;bottom&#x27; | &#x27;top&#x27;</span><br><span class="line">  size?: &#x27;small&#x27; | &#x27;medium&#x27; | &#x27;large&#x27;</span><br><span class="line">  showFlag?: boolean</span><br><span class="line">  showName?: boolean</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const props = withDefaults(defineProps&lt;Props&gt;(), &#123;</span><br><span class="line">  placement: &#x27;bottom&#x27;,</span><br><span class="line">  size: &#x27;medium&#x27;,</span><br><span class="line">  showFlag: true,</span><br><span class="line">  showName: true</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">const emit = defineEmits&lt;&#123;</span><br><span class="line">  change: [locale: string]</span><br><span class="line">&#125;&gt;()</span><br><span class="line"></span><br><span class="line">const &#123; locale: currentLocale &#125; = useI18n()</span><br><span class="line">const &#123; setLocale, getLocaleInfo &#125; = useLocale()</span><br><span class="line"></span><br><span class="line">const isDropdownOpen = ref(false)</span><br><span class="line">const isLoading = ref(false)</span><br><span class="line"></span><br><span class="line">// 当前语言信息</span><br><span class="line">const currentLocaleInfo = computed(() =&gt; getLocaleInfo())</span><br><span class="line"></span><br><span class="line">// 支持的语言列表</span><br><span class="line">const supportedLocales = computed(() =&gt; SUPPORT_LOCALES)</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 切换下拉菜单</span><br><span class="line"> */</span><br><span class="line">const toggleDropdown = (): void =&gt; &#123;</span><br><span class="line">  isDropdownOpen.value = !isDropdownOpen.value</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 选择语言</span><br><span class="line"> */</span><br><span class="line">const selectLanguage = async (locale: string): Promise&lt;void&gt; =&gt; &#123;</span><br><span class="line">  if (locale === currentLocale.value || isLoading.value) &#123;</span><br><span class="line">    return</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  try &#123;</span><br><span class="line">    isLoading.value = true</span><br><span class="line">    await setLocale(locale)</span><br><span class="line">    emit(&#x27;change&#x27;, locale)</span><br><span class="line">    isDropdownOpen.value = false</span><br><span class="line">  &#125; catch (error) &#123;</span><br><span class="line">    console.error(&#x27;Failed to change language:&#x27;, error)</span><br><span class="line">  &#125; finally &#123;</span><br><span class="line">    isLoading.value = false</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 点击外部关闭下拉菜单</span><br><span class="line"> */</span><br><span class="line">const handleClickOutside = (event: Event): void =&gt; &#123;</span><br><span class="line">  const target = event.target as HTMLElement</span><br><span class="line">  if (!target.closest(&#x27;.language-switcher&#x27;)) &#123;</span><br><span class="line">    isDropdownOpen.value = false</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 生命周期</span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  document.addEventListener(&#x27;click&#x27;, handleClickOutside)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">onUnmounted(() =&gt; &#123;</span><br><span class="line">  document.removeEventListener(&#x27;click&#x27;, handleClickOutside)</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.language-switcher &#123;</span><br><span class="line">  position: relative;</span><br><span class="line">  display: inline-block;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.current-language &#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  align-items: center;</span><br><span class="line">  gap: 8px;</span><br><span class="line">  padding: 8px 12px;</span><br><span class="line">  border: 1px solid #e5e7eb;</span><br><span class="line">  border-radius: 6px;</span><br><span class="line">  background: white;</span><br><span class="line">  cursor: pointer;</span><br><span class="line">  transition: all 0.2s ease;</span><br><span class="line">  user-select: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.current-language:hover &#123;</span><br><span class="line">  border-color: #d1d5db;</span><br><span class="line">  background: #f9fafb;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.current-language.active &#123;</span><br><span class="line">  border-color: #4f46e5;</span><br><span class="line">  box-shadow: 0 0 0 1px #4f46e5;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.flag &#123;</span><br><span class="line">  font-size: 16px;</span><br><span class="line">  line-height: 1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.name &#123;</span><br><span class="line">  font-size: 14px;</span><br><span class="line">  font-weight: 500;</span><br><span class="line">  color: #374151;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.icon &#123;</span><br><span class="line">  width: 16px;</span><br><span class="line">  height: 16px;</span><br><span class="line">  color: #6b7280;</span><br><span class="line">  transition: transform 0.2s ease;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.icon.rotated &#123;</span><br><span class="line">  transform: rotate(180deg);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.language-dropdown &#123;</span><br><span class="line">  position: absolute;</span><br><span class="line">  top: 100%;</span><br><span class="line">  left: 0;</span><br><span class="line">  right: 0;</span><br><span class="line">  margin-top: 4px;</span><br><span class="line">  background: white;</span><br><span class="line">  border: 1px solid #e5e7eb;</span><br><span class="line">  border-radius: 6px;</span><br><span class="line">  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);</span><br><span class="line">  z-index: 50;</span><br><span class="line">  overflow: hidden;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.language-option &#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  align-items: center;</span><br><span class="line">  gap: 8px;</span><br><span class="line">  padding: 8px 12px;</span><br><span class="line">  cursor: pointer;</span><br><span class="line">  transition: background-color 0.2s ease;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.language-option:hover &#123;</span><br><span class="line">  background: #f3f4f6;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.language-option.active &#123;</span><br><span class="line">  background: #eff6ff;</span><br><span class="line">  color: #1d4ed8;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.check-icon &#123;</span><br><span class="line">  width: 16px;</span><br><span class="line">  height: 16px;</span><br><span class="line">  color: #10b981;</span><br><span class="line">  margin-left: auto;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 动画 */</span><br><span class="line">.dropdown-enter-active,</span><br><span class="line">.dropdown-leave-active &#123;</span><br><span class="line">  transition: all 0.2s ease;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.dropdown-enter-from &#123;</span><br><span class="line">  opacity: 0;</span><br><span class="line">  transform: translateY(-8px);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.dropdown-leave-to &#123;</span><br><span class="line">  opacity: 0;</span><br><span class="line">  transform: translateY(-8px);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 尺寸变体 */</span><br><span class="line">.language-switcher.small .current-language &#123;</span><br><span class="line">  padding: 4px 8px;</span><br><span class="line">  font-size: 12px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.language-switcher.small .flag &#123;</span><br><span class="line">  font-size: 14px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.language-switcher.large .current-language &#123;</span><br><span class="line">  padding: 12px 16px;</span><br><span class="line">  font-size: 16px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.language-switcher.large .flag &#123;</span><br><span class="line">  font-size: 20px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p><strong>翻译文本组件</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- components/I18n/TranslateText.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;component </span><br><span class="line">    :is=&quot;tag&quot;</span><br><span class="line">    :class=&quot;className&quot;</span><br><span class="line">    v-html=&quot;translatedText&quot;</span><br><span class="line">  /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; computed &#125; from &#x27;vue&#x27;</span><br><span class="line">import &#123; useI18n &#125; from &#x27;@/composables/useI18n&#x27;</span><br><span class="line"></span><br><span class="line">interface Props &#123;</span><br><span class="line">  keypath: string</span><br><span class="line">  values?: Record&lt;string, any&gt;</span><br><span class="line">  tag?: string</span><br><span class="line">  className?: string</span><br><span class="line">  plural?: number</span><br><span class="line">  fallback?: string</span><br><span class="line">  html?: boolean</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const props = withDefaults(defineProps&lt;Props&gt;(), &#123;</span><br><span class="line">  tag: &#x27;span&#x27;,</span><br><span class="line">  html: false</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">const &#123; t, te &#125; = useI18n()</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 翻译后的文本</span><br><span class="line"> */</span><br><span class="line">const translatedText = computed(() =&gt; &#123;</span><br><span class="line">  // 检查键是否存在</span><br><span class="line">  if (!te(props.keypath)) &#123;</span><br><span class="line">    console.warn(`Translation key not found: $&#123;props.keypath&#125;`)</span><br><span class="line">    return props.fallback || props.keypath</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  // 处理复数</span><br><span class="line">  if (typeof props.plural === &#x27;number&#x27;) &#123;</span><br><span class="line">    return t(props.keypath, &#123; count: props.plural, ...props.values &#125;, props.plural)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  // 普通翻译</span><br><span class="line">  return t(props.keypath, props.values)</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>Vue 3 结合 Vue I18n 提供了完整的国际化解决方案，通过合理的配置和组件化设计，可以轻松实现多语言支持：</p>
<h3 id="核心特性"><a href="#核心特性" class="headerlink" title="核心特性"></a>核心特性</h3><ol>
<li><strong>组合式 API</strong>：更好的 TypeScript 支持和代码组织</li>
<li><strong>动态加载</strong>：按需加载语言包，优化性能</li>
<li><strong>格式化支持</strong>：日期、数字、货币等本地化格式</li>
<li><strong>复数处理</strong>：智能的复数规则支持</li>
<li><strong>缓存机制</strong>：提升语言切换性能</li>
</ol>
<h3 id="最佳实践"><a href="#最佳实践" class="headerlink" title="最佳实践"></a>最佳实践</h3><ol>
<li><strong>结构化组织</strong>：按模块组织语言文件</li>
<li><strong>类型安全</strong>：使用 TypeScript 确保翻译键的类型安全</li>
<li><strong>性能优化</strong>：懒加载和缓存策略</li>
<li><strong>用户体验</strong>：平滑的语言切换和加载状态</li>
<li><strong>可维护性</strong>：统一的翻译管理和组件化设计</li>
</ol>
<p>通过这些实践，可以构建出用户友好、性能优秀的多语言 Vue 3 应用。</p>

                    
                </div>

                

                <div class="post-bottom-tags-and-share border-box">
                    <div>
                        
                            <ul class="post-tags-box border-box">
                                
                                    <li class="tag-item border-box">
                                        <i class="icon fas fa-hashtag"></i>&nbsp;<a href="/tags/Vue3/">Vue3</a>
                                    </li>
                                
                                    <li class="tag-item border-box">
                                        <i class="icon fas fa-hashtag"></i>&nbsp;<a href="/tags/%E5%9B%BD%E9%99%85%E5%8C%96/">国际化</a>
                                    </li>
                                
                                    <li class="tag-item border-box">
                                        <i class="icon fas fa-hashtag"></i>&nbsp;<a href="/tags/Vue-I18n/">Vue I18n</a>
                                    </li>
                                
                                    <li class="tag-item border-box">
                                        <i class="icon fas fa-hashtag"></i>&nbsp;<a href="/tags/%E5%A4%9A%E8%AF%AD%E8%A8%80/">多语言</a>
                                    </li>
                                
                                    <li class="tag-item border-box">
                                        <i class="icon fas fa-hashtag"></i>&nbsp;<a href="/tags/%E6%9C%AC%E5%9C%B0%E5%8C%96/">本地化</a>
                                    </li>
                                
                            </ul>
                        
                    </div>
                    <div>
                        
                    </div>
                </div>

                

                
                    <div class="post-nav border-box">
                        
                            <div class="prev-post">
                                <a class="prev"
                                   rel="prev"
                                   href="/2023/vue/vue3-ssr-ssg-nuxt3-guide/"
                                   title="Vue 3 服务端渲染与静态站点生成：Nuxt 3 全栈开发实战"
                                >
                                    <span class="left arrow-icon flex-center">
                                        <i class="fas fa-chevron-left"></i>
                                    </span>
                                    <span class="title flex-center">
                                        <span class="post-nav-title-item text-ellipsis">Vue 3 服务端渲染与静态站点生成：Nuxt 3 全栈开发实战</span>
                                        <span class="post-nav-item">上一篇</span>
                                    </span>
                                </a>
                            </div>
                        
                        
                            <div class="next-post">
                                <a class="next"
                                   rel="next"
                                   href="/2023/fastapi/fastapi-async-database-optimization/"
                                   title="FastAPI异步数据库操作优化：从SQLAlchemy到性能调优"
                                >
                                    <span class="title flex-center">
                                        <span class="post-nav-title-item text-ellipsis">FastAPI异步数据库操作优化：从SQLAlchemy到性能调优</span>
                                        <span class="post-nav-item">下一篇</span>
                                    </span>
                                    <span class="right arrow-icon flex-center">
                                        <i class="fas fa-chevron-right"></i>
                                    </span>
                                </a>
                            </div>
                        
                    </div>
                

                
                    






                
            </div>
        </div>

        
            <div class="pc-post-toc right-toc">
                <div class="post-toc-wrap border-box">
    <div class="post-toc border-box">
        <ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Vue-I18n-%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE"><span class="nav-text">Vue I18n 基础配置</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E9%A1%B9%E7%9B%AE%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="nav-text">1. 项目初始化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-I18n-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-text">2. I18n 配置文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E8%AF%AD%E8%A8%80%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84"><span class="nav-text">3. 语言文件结构</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%AB%98%E7%BA%A7%E5%9B%BD%E9%99%85%E5%8C%96%E5%8A%9F%E8%83%BD"><span class="nav-text">高级国际化功能</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E7%BB%84%E5%90%88%E5%BC%8F-API-%E4%BD%BF%E7%94%A8"><span class="nav-text">1. 组合式 API 使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E5%8A%A8%E6%80%81%E8%AF%AD%E8%A8%80%E5%8A%A0%E8%BD%BD"><span class="nav-text">2. 动态语言加载</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E5%9B%BD%E9%99%85%E5%8C%96%E7%BB%84%E4%BB%B6"><span class="nav-text">3. 国际化组件</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%BB%E7%BB%93"><span class="nav-text">总结</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A0%B8%E5%BF%83%E7%89%B9%E6%80%A7"><span class="nav-text">核心特性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5"><span class="nav-text">最佳实践</span></a></li></ol></li></ol>
    </div>
</div>

            </div>
        
    </div>
</div>


                
            </div>
        </div>

        <div class="page-main-content-bottom border-box">
            
<footer class="footer border-box">
    <div class="copyright-info info-item">
    &copy;&nbsp;2025
    
            &nbsp;<i class="fas fa-heart icon-animate"></i>&nbsp;&nbsp;<a href="/">Orion K</a>
        
    </div>


    
        
        <div class="deploy-info info-item">
            
            本站由 <span class="tooltip" data-tooltip-content="GitHub Pages"><img src="/images/brands/github.png"></span> 提供部署服务
            
        </div>
    

    

    
</footer>

        </div>
    </div>

    <!-- post tools -->
    
        <div class="post-tools right-toc">
            <div class="post-tools-container border-box">
    <ul class="post-tools-list border-box">
        <!-- PC encrypt again -->
        

        <!-- PC TOC show toggle -->
        
            <li class="tools-item flex-center toggle-show-toc">
                <i class="fas fa-list"></i>
            </li>
        

        <!-- PC go comment -->
        

        <!-- PC full screen -->
        <li class="tools-item flex-center full-screen">
            <i class="fa-solid fa-expand"></i>
        </li>
    </ul>
</div>

        </div>
    

    <!-- side tools -->
    <div class="side-tools">
        <div class="side-tools-container border-box ">
    <ul class="side-tools-list side-tools-show-handle border-box">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <!-- toggle mode -->
        
            <li class="tools-item tool-toggle-theme-mode flex-center">
                <i class="fas fa-moon"></i>
            </li>
        

        <!-- rss -->
        

        <!-- to bottom -->
        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list border-box">
        
            <li class="tools-item toggle-show-toc-tablet flex-center">
                <i class="fas fa-list"></i>
            </li>
        

        

        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>

        <li class="tools-item tool-scroll-to-top flex-center show-arrow">
            <i class="arrow fas fa-arrow-up"></i>
            <span class="percent"></span>
        </li>
    </ul>
</div>

    </div>

    <!-- image mask -->
    <div class="zoom-in-image-mask">
    <img class="zoom-in-image">
</div>


    <!-- local search -->
    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fas fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="搜索..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="close-popup-btn">
                <i class="fas fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    

    <!-- tablet toc -->
    
        <div class="tablet-post-toc-mask">
            <div class="tablet-post-toc">
                <div class="post-toc-wrap border-box">
    <div class="post-toc border-box">
        <ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Vue-I18n-%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE"><span class="nav-text">Vue I18n 基础配置</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E9%A1%B9%E7%9B%AE%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="nav-text">1. 项目初始化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-I18n-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-text">2. I18n 配置文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E8%AF%AD%E8%A8%80%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84"><span class="nav-text">3. 语言文件结构</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%AB%98%E7%BA%A7%E5%9B%BD%E9%99%85%E5%8C%96%E5%8A%9F%E8%83%BD"><span class="nav-text">高级国际化功能</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E7%BB%84%E5%90%88%E5%BC%8F-API-%E4%BD%BF%E7%94%A8"><span class="nav-text">1. 组合式 API 使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E5%8A%A8%E6%80%81%E8%AF%AD%E8%A8%80%E5%8A%A0%E8%BD%BD"><span class="nav-text">2. 动态语言加载</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E5%9B%BD%E9%99%85%E5%8C%96%E7%BB%84%E4%BB%B6"><span class="nav-text">3. 国际化组件</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%BB%E7%BB%93"><span class="nav-text">总结</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A0%B8%E5%BF%83%E7%89%B9%E6%80%A7"><span class="nav-text">核心特性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5"><span class="nav-text">最佳实践</span></a></li></ol></li></ol>
    </div>
</div>

            </div>
        </div>
    
</main>





<!-- common js -->

<script src="/js/utils.js"></script>

<script src="/js/header-shrink.js"></script>

<script src="/js/back2top.js"></script>

<script src="/js/toggle-theme.js"></script>

<script src="/js/code-block.js"></script>

<script src="/js/main.js"></script>

<script src="/js/libs/anime.min.js"></script>


<!-- local search -->

    
<script src="/js/local-search.js"></script>



<!-- lazyload -->


<div class="">
    <!-- home page -->
    

    <!-- post page -->
    
        <!-- post-helper -->
        
<script src="/js/post/post-helper.js"></script>


        <!-- toc -->
        
            
<script src="/js/post/toc.js"></script>

        

        <!-- copyright-info -->
        

        <!-- share -->
        
    

    <!-- categories page -->
    

    <!-- links page -->
    

    <!-- photos page -->
    

    <!-- tools page -->
    
</div>

<!-- mermaid -->


<!-- pjax -->



</body>
</html>
